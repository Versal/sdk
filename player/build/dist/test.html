<!--
  Demonstration of player URL embed script. More options to come...

  Potential TODOs:
    * target a containing element (don't rely on wrapping div)
    * allow script-based config

  But for now.......
-->
<html>
  <head>
  </head>
  <body style="margin:0">
    <div class="container">

      <!-- Version 1 (DEPRECATED): pure query string -->
      <!--
      <script src="http://localhost:3232/scripts/versal.js?course=9&sid=24100196-987d-433c-83cb-98f60a1998e8&api=http%3A%2F%2Fstaging.vrsl.net%2Fapi2"></script>
      -->

      <!-- Version 2 (DEPRECATED): data-* attributes w/ SID -->
      <!--
      <script src="scripts/versal.js"
        data-course="9"
        data-sid="24100196-987d-433c-83cb-98f60a1998e8"
        data-api="http://stack.versal.com/api2"></script>
      -->

      <!-- Version 3: postMessage injection -->
      <script src="scripts/versal.js"></script>
      <script>
        // If the `data-sid` parameter is omitted, the application will need to
        // inject it from some other source.
        var origin = 'http://localhost:3232',
            sid = '12345';

        window.addEventListener('message', function (e) {

          // Check origin and event
          if (e.origin == origin && JSON.parse(e.data).event == 'player:ready') {

            // Fire up the player
            e.source.postMessage(JSON.stringify({
              event: 'player:launch',
              api: 'http://stack.versal.com/api2',
              course: '9',
              sid: sid
            }), origin);
          }
        });
      </script>
    </div>

    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>

    <script>
      (function ($) {
        // Grab the iframe generated by the Versal embed script
        var $myCourse = $('.versal-embed-9');

        // We can access embedded course frame immediately...
        $myCourse.hide();

        // Or change it once the document is ready...
        $(document).ready(function ($) {
          $myCourse.css({ height: '100%', width: '100%' }).fadeIn('slow');
        });

      })(jQuery);
    </script>
  </body>
</html>
