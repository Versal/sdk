/*!
 * player v1.7.1
 * a masterpiece! from 4ecb0ec on 24. June 2015
 */
(function(){var e,t,n;(function(r){function v(e,t){return h.call(e,t)}function m(e,t){var n,r,i,s,o,u,a,f,c,h,p,v=t&&t.split("/"),m=l.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){e=e.split("/"),o=e.length-1,l.nodeIdCompat&&d.test(e[o])&&(e[o]=e[o].replace(d,"")),e=v.slice(0,v.length-1).concat(e);for(c=0;c<e.length;c+=1){p=e[c];if(p===".")e.splice(c,1),c-=1;else if(p===".."){if(c===1&&(e[2]===".."||e[0]===".."))break;c>0&&(e.splice(c-1,2),c-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(c=n.length;c>0;c-=1){r=n.slice(0,c).join("/");if(v)for(h=v.length;h>0;h-=1){i=m[v.slice(0,h).join("/")];if(i){i=i[r];if(i){s=i,u=c;break}}}if(s)break;!a&&g&&g[r]&&(a=g[r],f=c)}!s&&a&&(s=a,u=f),s&&(n.splice(0,u,s),e=n.join("/"))}return e}function g(e,t){return function(){var n=p.call(arguments,0);return typeof n[0]!="string"&&n.length===1&&n.push(null),s.apply(r,n.concat([e,t]))}}function y(e){return function(t){return m(t,e)}}function b(e){return function(t){a[e]=t}}function w(e){if(v(f,e)){var t=f[e];delete f[e],c[e]=!0,i.apply(r,t)}if(!v(a,e)&&!v(c,e))throw new Error("No "+e);return a[e]}function E(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function S(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice,d=/\.js$/;o=function(e,t){var n,r=E(e),i=r[0];return e=r[1],i&&(i=m(i,t),n=w(i)),i?n&&n.normalize?e=n.normalize(e,y(t)):e=m(e,t):(e=m(e,t),r=E(e),i=r[0],e=r[1],i&&(n=w(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return g(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:S(e)}}},i=function(e,t,n,i){var s,l,h,p,d,m=[],y=typeof n,E;i=i||e;if(y==="undefined"||y==="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(d=0;d<t.length;d+=1){p=o(t[d],i),l=p.f;if(l==="require")m[d]=u.require(e);else if(l==="exports")m[d]=u.exports(e),E=!0;else if(l==="module")s=m[d]=u.module(e);else if(v(a,l)||v(f,l)||v(c,l))m[d]=w(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,g(i,!0),b(l),{}),m[d]=a[l]}}h=n?n.apply(a[e],m):undefined;if(e)if(s&&s.exports!==r&&s.exports!==a[e])a[e]=s.exports;else if(h!==r||!E)a[e]=h}else e&&(a[e]=n)},e=t=s=function(e,t,n,a,f){if(typeof e=="string")return u[e]?u[e](t):w(o(e,t).f);if(!e.splice){l=e,l.deps&&s(l.deps,l.callback);if(!t)return;t.splice?(e=t,t=n,n=null):e=r}return t=t||function(){},typeof n=="function"&&(n=a,a=f),a?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},4),s},s.config=function(e){return s(e)},e._defined=a,n=function(e,t,n){if(typeof e!="string")throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),!v(a,e)&&!v(f,e)&&(f[e]=[e,t,n])},n.amd={jQuery:!0}})(),n("../../bower_components/almond/almond",function(){}),function(){var e=this,t=e._,r={},i=Array.prototype,s=Object.prototype,o=Function.prototype,u=i.push,a=i.slice,f=i.concat,l=s.toString,c=s.hasOwnProperty,h=i.forEach,p=i.map,d=i.reduce,v=i.reduceRight,m=i.filter,g=i.every,y=i.some,b=i.indexOf,w=i.lastIndexOf,E=Array.isArray,S=Object.keys,x=o.bind,T=function(e){if(e instanceof T)return e;if(!(this instanceof T))return new T(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=T),exports._=T):e._=T,T.VERSION="1.6.0";var N=T.each=T.forEach=function(e,t,n){if(e==null)return e;if(h&&e.forEach===h)e.forEach(t,n);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(n,e[i],i,e)===r)return}else{var o=T.keys(e);for(var i=0,s=o.length;i<s;i++)if(t.call(n,e[o[i]],o[i],e)===r)return}return e};T.map=T.collect=function(e,t,n){var r=[];return e==null?r:p&&e.map===p?e.map(t,n):(N(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var C="Reduce of empty array with no initial value";T.reduce=T.foldl=T.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduce===d)return r&&(t=T.bind(t,r)),i?e.reduce(t,n):e.reduce(t);N(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(C);return n},T.reduceRight=T.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(v&&e.reduceRight===v)return r&&(t=T.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=T.keys(e);s=o.length}N(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(C);return n},T.find=T.detect=function(e,t,n){var r;return k(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},T.filter=T.select=function(e,t,n){var r=[];return e==null?r:m&&e.filter===m?e.filter(t,n):(N(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},T.reject=function(e,t,n){return T.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},T.every=T.all=function(e,t,n){t||(t=T.identity);var i=!0;return e==null?i:g&&e.every===g?e.every(t,n):(N(e,function(e,s,o){if(!(i=i&&t.call(n,e,s,o)))return r}),!!i)};var k=T.some=T.any=function(e,t,n){t||(t=T.identity);var i=!1;return e==null?i:y&&e.some===y?e.some(t,n):(N(e,function(e,s,o){if(i||(i=t.call(n,e,s,o)))return r}),!!i)};T.contains=T.include=function(e,t){return e==null?!1:b&&e.indexOf===b?e.indexOf(t)!=-1:k(e,function(e){return e===t})},T.invoke=function(e,t){var n=a.call(arguments,2),r=T.isFunction(t);return T.map(e,function(e){return(r?t:e[t]).apply(e,n)})},T.pluck=function(e,t){return T.map(e,T.property(t))},T.where=function(e,t){return T.filter(e,T.matches(t))},T.findWhere=function(e,t){return T.find(e,T.matches(t))},T.max=function(e,t,n){if(!t&&T.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var r=-Infinity,i=-Infinity;return N(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u>i&&(r=e,i=u)}),r},T.min=function(e,t,n){if(!t&&T.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var r=Infinity,i=Infinity;return N(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u<i&&(r=e,i=u)}),r},T.shuffle=function(e){var t,n=0,r=[];return N(e,function(e){t=T.random(n++),r[n-1]=r[t],r[t]=e}),r},T.sample=function(e,t,n){return t==null||n?(e.length!==+e.length&&(e=T.values(e)),e[T.random(e.length-1)]):T.shuffle(e).slice(0,Math.max(0,t))};var L=function(e){return e==null?T.identity:T.isFunction(e)?e:T.property(e)};T.sortBy=function(e,t,n){return t=L(t),T.pluck(T.map(e,function(e,r,i){return{value:e,index:r,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var A=function(e){return function(t,n,r){var i={};return n=L(n),N(t,function(s,o){var u=n.call(r,s,o,t);e(i,u,s)}),i}};T.groupBy=A(function(e,t,n){T.has(e,t)?e[t].push(n):e[t]=[n]}),T.indexBy=A(function(e,t,n){e[t]=n}),T.countBy=A(function(e,t){T.has(e,t)?e[t]++:e[t]=1}),T.sortedIndex=function(e,t,n,r){n=L(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},T.toArray=function(e){return e?T.isArray(e)?a.call(e):e.length===+e.length?T.map(e,T.identity):T.values(e):[]},T.size=function(e){return e==null?0:e.length===+e.length?e.length:T.keys(e).length},T.first=T.head=T.take=function(e,t,n){return e==null?void 0:t==null||n?e[0]:t<0?[]:a.call(e,0,t)},T.initial=function(e,t,n){return a.call(e,0,e.length-(t==null||n?1:t))},T.last=function(e,t,n){return e==null?void 0:t==null||n?e[e.length-1]:a.call(e,Math.max(e.length-t,0))},T.rest=T.tail=T.drop=function(e,t,n){return a.call(e,t==null||n?1:t)},T.compact=function(e){return T.filter(e,T.identity)};var O=function(e,t,n){return t&&T.every(e,T.isArray)?f.apply(n,e):(N(e,function(e){T.isArray(e)||T.isArguments(e)?t?u.apply(n,e):O(e,t,n):n.push(e)}),n)};T.flatten=function(e,t){return O(e,t,[])},T.without=function(e){return T.difference(e,a.call(arguments,1))},T.partition=function(e,t){var n=[],r=[];return N(e,function(e){(t(e)?n:r).push(e)}),[n,r]},T.uniq=T.unique=function(e,t,n,r){T.isFunction(t)&&(r=n,n=t,t=!1);var i=n?T.map(e,n,r):e,s=[],o=[];return N(i,function(n,r){if(t?!r||o[o.length-1]!==n:!T.contains(o,n))o.push(n),s.push(e[r])}),s},T.union=function(){return T.uniq(T.flatten(arguments,!0))},T.intersection=function(e){var t=a.call(arguments,1);return T.filter(T.uniq(e),function(e){return T.every(t,function(t){return T.contains(t,e)})})},T.difference=function(e){var t=f.apply(i,a.call(arguments,1));return T.filter(e,function(e){return!T.contains(t,e)})},T.zip=function(){var e=T.max(T.pluck(arguments,"length").concat(0)),t=new Array(e);for(var n=0;n<e;n++)t[n]=T.pluck(arguments,""+n);return t},T.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},T.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=T.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(b&&e.indexOf===b)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},T.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(w&&e.lastIndexOf===w)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},T.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var M=function(){};T.bind=function(e,t){var n,r;if(x&&e.bind===x)return x.apply(e,a.call(arguments,1));if(!T.isFunction(e))throw new TypeError;return n=a.call(arguments,2),r=function(){if(this instanceof r){M.prototype=e.prototype;var i=new M;M.prototype=null;var s=e.apply(i,n.concat(a.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(a.call(arguments)))}},T.partial=function(e){var t=a.call(arguments,1);return function(){var n=0,r=t.slice();for(var i=0,s=r.length;i<s;i++)r[i]===T&&(r[i]=arguments[n++]);while(n<arguments.length)r.push(arguments[n++]);return e.apply(this,r)}},T.bindAll=function(e){var t=a.call(arguments,1);if(t.length===0)throw new Error("bindAll must be passed function names");return N(t,function(t){e[t]=T.bind(e[t],e)}),e},T.memoize=function(e,t){var n={};return t||(t=T.identity),function(){var r=t.apply(this,arguments);return T.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},T.delay=function(e,t){var n=a.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},T.defer=function(e){return T.delay.apply(T,[e,1].concat(a.call(arguments,1)))},T.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:T.now(),o=null,s=e.apply(r,i),r=i=null};return function(){var f=T.now();!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0?(clearTimeout(o),o=null,u=f,s=e.apply(r,i),r=i=null):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},T.debounce=function(e,t,n){var r,i,s,o,u,a=function(){var f=T.now()-o;f<t?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i),s=i=null))};return function(){s=this,i=arguments,o=T.now();var f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i),s=i=null),u}},T.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},T.wrap=function(e,t){return T.partial(t,e)},T.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},T.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},T.keys=function(e){if(!T.isObject(e))return[];if(S)return S(e);var t=[];for(var n in e)T.has(e,n)&&t.push(n);return t},T.values=function(e){var t=T.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=e[t[i]];return r},T.pairs=function(e){var t=T.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},T.invert=function(e){var t={},n=T.keys(e);for(var r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},T.functions=T.methods=function(e){var t=[];for(var n in e)T.isFunction(e[n])&&t.push(n);return t.sort()},T.extend=function(e){return N(a.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},T.pick=function(e){var t={},n=f.apply(i,a.call(arguments,1));return N(n,function(n){n in e&&(t[n]=e[n])}),t},T.omit=function(e){var t={},n=f.apply(i,a.call(arguments,1));for(var r in e)T.contains(n,r)||(t[r]=e[r]);return t},T.defaults=function(e){return N(a.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},T.clone=function(e){return T.isObject(e)?T.isArray(e)?e.slice():T.extend({},e):e},T.tap=function(e,t){return t(e),e};var _=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof T&&(e=e._wrapped),t instanceof T&&(t=t._wrapped);var i=l.call(e);if(i!=l.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(T.isFunction(o)&&o instanceof o&&T.isFunction(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),r.push(t);var a=0,f=!0;if(i=="[object Array]"){a=e.length,f=a==t.length;if(f)while(a--)if(!(f=_(e[a],t[a],n,r)))break}else{for(var c in e)if(T.has(e,c)){a++;if(!(f=T.has(t,c)&&_(e[c],t[c],n,r)))break}if(f){for(c in t)if(T.has(t,c)&&!(a--))break;f=!a}}return n.pop(),r.pop(),f};T.isEqual=function(e,t){return _(e,t,[],[])},T.isEmpty=function(e){if(e==null)return!0;if(T.isArray(e)||T.isString(e))return e.length===0;for(var t in e)if(T.has(e,t))return!1;return!0},T.isElement=function(e){return!!e&&e.nodeType===1},T.isArray=E||function(e){return l.call(e)=="[object Array]"},T.isObject=function(e){return e===Object(e)},N(["Arguments","Function","String","Number","Date","RegExp"],function(e){T["is"+e]=function(t){return l.call(t)=="[object "+e+"]"}}),T.isArguments(arguments)||(T.isArguments=function(e){return!!e&&!!T.has(e,"callee")}),typeof /./!="function"&&(T.isFunction=function(e){return typeof e=="function"}),T.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},T.isNaN=function(e){return T.isNumber(e)&&e!=+e},T.isBoolean=function(e){return e===!0||e===!1||l.call(e)=="[object Boolean]"},T.isNull=function(e){return e===null},T.isUndefined=function(e){return e===void 0},T.has=function(e,t){return c.call(e,t)},T.noConflict=function(){return e._=t,this},T.identity=function(e){return e},T.constant=function(e){return function(){return e}},T.property=function(e){return function(t){return t[e]}},T.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},T.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},T.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},T.now=Date.now||function(){return(new Date).getTime()};var D={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};D.unescape=T.invert(D.escape);var P={escape:new RegExp("["+T.keys(D.escape).join("")+"]","g"),unescape:new RegExp("("+T.keys(D.unescape).join("|")+")","g")};T.each(["escape","unescape"],function(e){T[e]=function(t){return t==null?"":(""+t).replace(P[e],function(t){return D[e][t]})}}),T.result=function(e,t){if(e==null)return void 0;var n=e[t];return T.isFunction(n)?n.call(e):n},T.mixin=function(e){N(T.functions(e),function(t){var n=T[t]=e[t];T.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),I.call(this,n.apply(T,e))}})};var H=0;T.uniqueId=function(e){var t=++H+"";return e?e+t:t},T.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\t|\u2028|\u2029/g;T.template=function(e,t,n){var r;n=T.defaults({},n,T.templateSettings);var i=new RegExp([(n.escape||B).source,(n.interpolate||B).source,(n.evaluate||B).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(F,function(e){return"\\"+j[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,T);var a=function(e){return r.call(this,e,T)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},T.chain=function(e){return T(e).chain()};var I=function(e){return this._chain?T(e).chain():e};T.mixin(T),N(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];T.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],I.call(this,n)}}),N(["concat","join","slice"],function(e){var t=i[e];T.prototype[e]=function(){return I.call(this,t.apply(this._wrapped,arguments))}}),T.extend(T.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),typeof n=="function"&&n.amd&&n("underscore",[],function(){return T})}.call(this),function(e,t){function B(e){var t=e.length,n=E.type(e);return E.isWindow(e)?!1:e.nodeType===1&&t?!0:n==="array"||n!=="function"&&(t===0||typeof t=="number"&&t>0&&t-1 in e)}function F(e){var t=j[e]={};return E.each(e.match(x)||[],function(e,n){t[n]=!0}),t}function R(e,n,r,i){if(!E.acceptData(e))return;var s,o,u=E.expando,a=e.nodeType,f=a?E.cache:e,l=a?e[u]:e[u]&&u;if((!l||!f[l]||!i&&!f[l].data)&&r===t&&typeof n=="string")return;l||(a?l=e[u]=h.pop()||E.guid++:l=u),f[l]||(f[l]=a?{}:{toJSON:E.noop});if(typeof n=="object"||typeof n=="function")i?f[l]=E.extend(f[l],n):f[l].data=E.extend(f[l].data,n);return o=f[l],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[E.camelCase(n)]=r),typeof n=="string"?(s=o[n],s==null&&(s=o[E.camelCase(n)])):s=o,s}function U(e,t,n){if(!E.acceptData(e))return;var r,i,s=e.nodeType,o=s?E.cache:e,u=s?e[E.expando]:E.expando;if(!o[u])return;if(t){r=n?o[u]:o[u].data;if(r){E.isArray(t)?t=t.concat(E.map(t,E.camelCase)):t in r?t=[t]:(t=E.camelCase(t),t in r?t=[t]:t=t.split(" ")),i=t.length;while(i--)delete r[t[i]];if(n?!W(r):!E.isEmptyObject(r))return}}if(!n){delete o[u].data;if(!W(o[u]))return}s?E.cleanData([e],!0):E.support.deleteExpando||o!=o.window?delete o[u]:o[u]=null}function z(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(q,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:I.test(r)?E.parseJSON(r):r}catch(s){}E.data(e,n,r)}else r=t}return r}function W(e){var t;for(t in e){if(t==="data"&&E.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function st(){return!0}function ot(){return!1}function ut(){try{return u.activeElement}catch(e){}}function ht(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function pt(e,t,n){if(E.isFunction(t))return E.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return E.grep(e,function(e){return e===t!==n});if(typeof t=="string"){if(at.test(t))return E.filter(t,e,n);t=E.filter(t,e)}return E.grep(e,function(e){return E.inArray(e,t)>=0!==n})}function dt(e){var t=vt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function _t(e,t){return E.nodeName(e,"table")&&E.nodeName(t.nodeType===1?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function Dt(e){return e.type=(E.find.attr(e,"type")!==null)+"/"+e.type,e}function Pt(e){var t=kt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Ht(e,t){var n,r=0;for(;(n=e[r])!=null;r++)E._data(n,"globalEval",!t||E._data(t[r],"globalEval"))}function Bt(e,t){if(t.nodeType!==1||!E.hasData(e))return;var n,r,i,s=E._data(e),o=E._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)E.event.add(t,n,u[n][r])}o.data&&(o.data=E.extend({},o.data))}function jt(e,t){var n,r,i;if(t.nodeType!==1)return;n=t.nodeName.toLowerCase();if(!E.support.noCloneEvent&&t[E.expando]){i=E._data(t);for(r in i.events)E.removeEvent(t,r,i.handle);t.removeAttribute(E.expando)}if(n==="script"&&t.text!==e.text)Dt(t).text=e.text,Pt(t);else if(n==="object")t.parentNode&&(t.outerHTML=e.outerHTML),E.support.html5Clone&&e.innerHTML&&!E.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML);else if(n==="input"&&Tt.test(e.type))t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value);else if(n==="option")t.defaultSelected=t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}function Ft(e,n){var r,i,o=0,u=typeof e.getElementsByTagName!==s?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==s?e.querySelectorAll(n||"*"):t;if(!u)for(u=[],r=e.childNodes||e;(i=r[o])!=null;o++)!n||E.nodeName(i,n)?u.push(i):E.merge(u,Ft(i,n));return n===t||n&&E.nodeName(e,n)?E.merge([e],u):u}function It(e){Tt.test(e.type)&&(e.defaultChecked=e.checked)}function nn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=tn.length;while(i--){t=tn[i]+n;if(t in e)return t}return r}function rn(e,t){return e=t||e,E.css(e,"display")==="none"||!E.contains(e.ownerDocument,e)}function sn(e,t){var n,r,i,s=[],o=0,u=e.length;for(;o<u;o++){r=e[o];if(!r.style)continue;s[o]=E._data(r,"olddisplay"),n=r.style.display,t?(!s[o]&&n==="none"&&(r.style.display=""),r.style.display===""&&rn(r)&&(s[o]=E._data(r,"olddisplay",fn(r.nodeName)))):s[o]||(i=rn(r),(n&&n!=="none"||!i)&&E._data(r,"olddisplay",i?n:E.css(r,"display")))}for(o=0;o<u;o++){r=e[o];if(!r.style)continue;if(!t||r.style.display==="none"||r.style.display==="")r.style.display=t?s[o]||"":"none"}return e}function on(e,t,n){var r=Jt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function un(e,t,n,r,i){var s=n===(r?"border":"content")?4:t==="width"?1:0,o=0;for(;s<4;s+=2)n==="margin"&&(o+=E.css(e,n+en[s],!0,i)),r?(n==="content"&&(o-=E.css(e,"padding"+en[s],!0,i)),n!=="margin"&&(o-=E.css(e,"border"+en[s]+"Width",!0,i))):(o+=E.css(e,"padding"+en[s],!0,i),n!=="padding"&&(o+=E.css(e,"border"+en[s]+"Width",!0,i)));return o}function an(e,t,n){var r=!0,i=t==="width"?e.offsetWidth:e.offsetHeight,s=Rt(e),o=E.support.boxSizing&&E.css(e,"boxSizing",!1,s)==="border-box";if(i<=0||i==null){i=Ut(e,t,s);if(i<0||i==null)i=e.style[t];if(Kt.test(i))return i;r=o&&(E.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+un(e,t,n||(o?"border":"content"),r,s)+"px"}function fn(e){var t=u,n=Gt[e];if(!n){n=ln(e,t);if(n==="none"||!n)qt=(qt||E("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(qt[0].contentWindow||qt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=ln(e,t),qt.detach();Gt[e]=n}return n}function ln(e,t){var n=E(t.createElement(e)).appendTo(t.body),r=E.css(n[0],"display");return n.remove(),r}function mn(e,t,n,r){var i;if(E.isArray(t))E.each(t,function(t,i){n||hn.test(e)?r(e,i):mn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&E.type(t)==="object")for(i in t)mn(e+"["+i+"]",t[i],n,r);else r(e,t)}function Dn(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(x)||[];if(E.isFunction(n))while(r=s[i++])r[0]==="+"?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Pn(e,t,n,r){function o(u){var a;return i[u]=!0,E.each(e[u]||[],function(e,u){var f=u(t,n,r);if(typeof f=="string"&&!s&&!i[f])return t.dataTypes.unshift(f),o(f),!1;if(s)return!(a=f)}),a}var i={},s=e===On;return o(t.dataTypes[0])||!i["*"]&&o("*")}function Hn(e,n){var r,i,s=E.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:r||(r={}))[i]=n[i]);return r&&E.extend(!0,e,r),e}function Bn(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes;while(f[0]==="*")f.shift(),s===t&&(s=e.mimeType||n.getResponseHeader("Content-Type"));if(s)for(u in a)if(a[u]&&a[u].test(s)){f.unshift(u);break}if(f[0]in r)o=f[0];else{for(u in r){if(!f[0]||e.converters[u+" "+f[0]]){o=u;break}i||(i=u)}o=o||i}if(o)return o!==f[0]&&f.unshift(o),r[o]}function jn(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s){e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift();if(s)if(s==="*")s=a;else if(a!=="*"&&a!==s){o=f[a+" "+s]||f["* "+s];if(!o)for(i in f){u=i.split(" ");if(u[1]===s){o=f[a+" "+u[0]]||f["* "+u[0]];if(o){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}}}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}}return{state:"success",data:t}}function Wn(){try{return new e.XMLHttpRequest}catch(t){}}function Xn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Zn(){return setTimeout(function(){Vn=t}),Vn=E.now()}function er(e,t,n){var r,i=(Yn[t]||[]).concat(Yn["*"]),s=0,o=i.length;for(;s<o;s++)if(r=i[s].call(n,t,e))return r}function tr(e,t,n){var r,i,s=0,o=Gn.length,u=E.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=Vn||Zn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;o<a;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),s<1&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:E.extend({},t),opts:E.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Vn||Zn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=E.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;i=!0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;nr(l,f.opts.specialEasing);for(;s<o;s++){r=Gn[s].call(f,e,l,f.opts);if(r)return r}return E.map(l,er,f),E.isFunction(f.opts.start)&&f.opts.start.call(e,f),E.fx.timer(E.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function nr(e,t){var n,r,i,s,o;for(n in e){r=E.camelCase(n),i=t[r],s=e[n],E.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=E.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function rr(e,t,n){var r,i,s,o,u,a,f=this,l={},c=e.style,h=e.nodeType&&rn(e),p=E._data(e,"fxshow");n.queue||(u=E._queueHooks(e,"fx"),u.unqueued==null&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,f.always(function(){f.always(function(){u.unqueued--,E.queue(e,"fx").length||u.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[c.overflow,c.overflowX,c.overflowY],E.css(e,"display")==="inline"&&E.css(e,"float")==="none"&&(!E.support.inlineBlockNeedsLayout||fn(e.nodeName)==="inline"?c.display="inline-block":c.zoom=1)),n.overflow&&(c.overflow="hidden",E.support.shrinkWrapBlocks||f.always(function(){c.overflow=n.overflow[0],c.overflowX=n.overflow[1],c.overflowY=n.overflow[2]}));for(r in t){i=t[r];if(Jn.exec(i)){delete t[r],s=s||i==="toggle";if(i===(h?"hide":"show"))continue;l[r]=p&&p[r]||E.style(e,r)}}if(!E.isEmptyObject(l)){p?"hidden"in p&&(h=p.hidden):p=E._data(e,"fxshow",{}),s&&(p.hidden=!h),h?E(e).show():f.done(function(){E(e).hide()}),f.done(function(){var t;E._removeData(e,"fxshow");for(t in l)E.style(e,t,l[t])});for(r in l)o=er(h?p[r]:0,r,f),r in p||(p[r]=o.start,h&&(o.end=o.start,o.start=r==="width"||r==="height"?1:0))}}function ir(e,t,n,r,i){return new ir.prototype.init(e,t,n,r,i)}function sr(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=en[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function or(e){return E.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var r,i,s=typeof t,o=e.location,u=e.document,a=u.documentElement,f=e.jQuery,l=e.$,c={},h=[],p="1.10.2",d=h.concat,v=h.push,m=h.slice,g=h.indexOf,y=c.toString,b=c.hasOwnProperty,w=p.trim,E=function(e,t){return new E.fn.init(e,t,i)},S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,x=/\S+/g,T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,k=/^[\],:{}\s]*$/,L=/(?:^|:|,)(?:\s*\[)+/g,A=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,O=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,M=/^-ms-/,_=/-([\da-z])/gi,D=function(e,t){return t.toUpperCase()},P=function(e){if(u.addEventListener||e.type==="load"||u.readyState==="complete")H(),E.ready()},H=function(){u.addEventListener?(u.removeEventListener("DOMContentLoaded",P,!1),e.removeEventListener("load",P,!1)):(u.detachEvent("onreadystatechange",P),e.detachEvent("onload",P))};E.fn=E.prototype={jquery:p,constructor:E,init:function(e,n,r){var i,s;if(!e)return this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?i=[null,e,null]:i=N.exec(e);if(i&&(i[1]||!n)){if(i[1]){n=n instanceof E?n[0]:n,E.merge(this,E.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:u,!0));if(C.test(i[1])&&E.isPlainObject(n))for(i in n)E.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}s=u.getElementById(i[2]);if(s&&s.parentNode){if(s.id!==i[2])return r.find(e);this.length=1,this[0]=s}return this.context=u,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):E.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),E.makeArray(e,this))},selector:"",length:0,toArray:function(){return m.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e){var t=E.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return E.each(this,e,t)},ready:function(e){return E.ready.promise().done(e),this},slice:function(){return this.pushStack(m.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},map:function(e){return this.pushStack(E.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:v,sort:[].sort,splice:[].splice},E.fn.init.prototype=E.fn,E.extend=E.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!E.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((s=arguments[a])!=null)for(i in s){e=u[i],r=s[i];if(u===r)continue;l&&r&&(E.isPlainObject(r)||(n=E.isArray(r)))?(n?(n=!1,o=e&&E.isArray(e)?e:[]):o=e&&E.isPlainObject(e)?e:{},u[i]=E.extend(l,o,r)):r!==t&&(u[i]=r)}return u},E.extend({expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===E&&(e.$=l),t&&e.jQuery===E&&(e.jQuery=f),E},isReady:!1,readyWait:1,holdReady:function(e){e?E.readyWait++:E.ready(!0)},ready:function(e){if(e===!0?--E.readyWait:E.isReady)return;if(!u.body)return setTimeout(E.ready);E.isReady=!0;if(e!==!0&&--E.readyWait>0)return;r.resolveWith(u,[E]),E.fn.trigger&&E(u).trigger("ready").off("ready")},isFunction:function(e){return E.type(e)==="function"},isArray:Array.isArray||function(e){return E.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):typeof e=="object"||typeof e=="function"?c[y.call(e)]||"object":typeof e},isPlainObject:function(e){var n;if(!e||E.type(e)!=="object"||e.nodeType||E.isWindow(e))return!1;try{if(e.constructor&&!b.call(e,"constructor")&&!b.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}if(E.support.ownLast)for(n in e)return b.call(e,n);for(n in e);return n===t||b.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t,t=!1),t=t||u;var r=C.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=E.buildFragment([e],t,i),i&&E(i).remove(),E.merge([],r.childNodes))},parseJSON:function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(t===null)return t;if(typeof t=="string"){t=E.trim(t);if(t&&k.test(t.replace(A,"@").replace(O,"]").replace(L,"")))return(new Function("return "+t))()}E.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&E.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&E.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(M,"ms-").replace(_,D)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=B(e);if(n)if(o)for(;i<s;i++){r=t.apply(e[i],n);if(r===!1)break}else for(i in e){r=t.apply(e[i],n);if(r===!1)break}else if(o)for(;i<s;i++){r=t.call(e[i],i,e[i]);if(r===!1)break}else for(i in e){r=t.call(e[i],i,e[i]);if(r===!1)break}return e},trim:w&&!w.call("﻿ ")?function(e){return e==null?"":w.call(e)}:function(e){return e==null?"":(e+"").replace(T,"")},makeArray:function(e,t){var n=t||[];return e!=null&&(B(Object(e))?E.merge(n,typeof e=="string"?[e]:e):v.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(g)return g.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=B(e),u=[];if(o)for(;i<s;i++)r=t(e[i],i,n),r!=null&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),r!=null&&(u[u.length]=r);return d.apply([],u)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(s=e[n],n=e,e=s),E.isFunction(e)?(r=m.call(arguments,2),i=function(){return e.apply(n||this,r.concat(m.call(arguments)))},i.guid=e.guid=e.guid||E.guid++,i):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=r==null;if(E.type(r)==="object"){s=!0;for(a in r)E.access(e,n,a,r[a],!0,o,u)}else if(i!==t){s=!0,E.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(E(e),n)}));if(n)for(;a<f;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)))}return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()},swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),E.ready.promise=function(t){if(!r){r=E.Deferred();if(u.readyState==="complete")setTimeout(E.ready);else if(u.addEventListener)u.addEventListener("DOMContentLoaded",P,!1),e.addEventListener("load",P,!1);else{u.attachEvent("onreadystatechange",P),e.attachEvent("onload",P);var n=!1;try{n=e.frameElement==null&&u.documentElement}catch(i){}n&&n.doScroll&&function s(){if(!E.isReady){try{n.doScroll("left")}catch(e){return setTimeout(s,50)}H(),E.ready()}}()}}return r.promise(t)},E.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){c["[object "+t+"]"]=t.toLowerCase()}),i=E(u),function(e,t){function ot(e,t,n,i){var s,o,u,a,f,l,p,m,g,E;(t?t.ownerDocument||t:w)!==h&&c(t),t=t||h,n=n||[];if(!e||typeof e!="string")return n;if((a=t.nodeType)!==1&&a!==9)return[];if(d&&!i){if(s=Z.exec(e))if(u=s[1]){if(a===9){o=t.getElementById(u);if(!o||!o.parentNode)return n;if(o.id===u)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(u))&&y(t,o)&&o.id===u)return n.push(o),n}else{if(s[2])return H.apply(n,t.getElementsByTagName(e)),n;if((u=s[3])&&r.getElementsByClassName&&t.getElementsByClassName)return H.apply(n,t.getElementsByClassName(u)),n}if(r.qsa&&(!v||!v.test(e))){m=p=b,g=t,E=a===9&&e;if(a===1&&t.nodeName.toLowerCase()!=="object"){l=mt(e),(p=t.getAttribute("id"))?m=p.replace(nt,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",f=l.length;while(f--)l[f]=m+gt(l[f]);g=$.test(e)&&t.parentNode||t,E=l.join(",")}if(E)try{return H.apply(n,g.querySelectorAll(E)),n}catch(S){}finally{p||t.removeAttribute("id")}}}return Nt(e.replace(W,"$1"),t,n,i)}function ut(){function t(n,r){return e.push(n+=" ")>s.cacheLength&&delete t[e.shift()],t[n]=r}var e=[];return t}function at(e){return e[b]=!0,e}function ft(e){var t=h.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function lt(e,t){var n=e.split("|"),r=e.length;while(r--)s.attrHandle[n[r]]=t}function ct(e,t){var n=t&&e,r=n&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||O)-(~e.sourceIndex||O);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function pt(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function dt(e){return at(function(t){return t=+t,at(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function vt(){}function mt(e,t){var n,r,i,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=s.preFilter;while(u){if(!n||(r=X.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(i=[]);n=!1;if(r=V.exec(u))n=r.shift(),i.push({value:n,type:r[0].replace(W," ")}),u=u.slice(n.length);for(o in s.filter)(r=G[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(n=r.shift(),i.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ot.error(e):N(e,a).slice(0)}function gt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function yt(e,t,n){var r=t.dir,s=n&&r==="parentNode",o=x++;return t.first?function(t,n,i){while(t=t[r])if(t.nodeType===1||s)return e(t,n,i)}:function(t,n,u){var a,f,l,c=S+" "+o;if(u){while(t=t[r])if(t.nodeType===1||s)if(e(t,n,u))return!0}else while(t=t[r])if(t.nodeType===1||s){l=t[b]||(t[b]={});if((f=l[r])&&f[0]===c){if((a=f[1])===!0||a===i)return a===!0}else{f=l[r]=[c],f[1]=e(t,n,u)||i;if(f[1]===!0)return!0}}}}function bt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function wt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function Et(e,t,n,r,i,s){return r&&!r[b]&&(r=Et(r)),i&&!i[b]&&(i=Et(i,s)),at(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||Tt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?wt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=wt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?j.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=wt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):H.apply(o,g)})}function St(e){var t,n,r,i=e.length,o=s.relative[e[0].type],u=o||s.relative[" "],a=o?1:0,l=yt(function(e){return e===t},u,!0),c=yt(function(e){return j.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;a<i;a++)if(n=s.relative[e[a].type])h=[yt(bt(h),n)];else{n=s.filter[e[a].type].apply(null,e[a].matches);if(n[b]){r=++a;for(;r<i;r++)if(s.relative[e[r].type])break;return Et(a>1&&bt(h),a>1&&gt(e.slice(0,a-1).concat({value:e[a-2].type===" "?"*":""})).replace(W,"$1"),n,a<r&&St(e.slice(a,r)),r<i&&St(e=e.slice(r)),r<i&&gt(e))}h.push(n)}return bt(h)}function xt(e,t){var n=0,r=t.length>0,o=e.length>0,u=function(u,a,l,c,p){var d,v,m,g=[],y=0,b="0",w=u&&[],E=p!=null,x=f,T=u||o&&s.find.TAG("*",p&&a.parentNode||a),N=S+=x==null?1:Math.random()||.1;E&&(f=a!==h&&a,i=n);for(;(d=T[b])!=null;b++){if(o&&d){v=0;while(m=e[v++])if(m(d,a,l)){c.push(d);break}E&&(S=N,i=++n)}r&&((d=!m&&d)&&y--,u&&w.push(d))}y+=b;if(r&&b!==y){v=0;while(m=t[v++])m(w,g,a,l);if(u){if(y>0)while(b--)!w[b]&&!g[b]&&(g[b]=D.call(c));g=wt(g)}H.apply(c,g),E&&!u&&g.length>0&&y+t.length>1&&ot.uniqueSort(c)}return E&&(S=N,f=x),w};return r?at(u):u}function Tt(e,t,n){var r=0,i=t.length;for(;r<i;r++)ot(e,t[r],n);return n}function Nt(e,t,n,i){var o,u,f,l,c,h=mt(e);if(!i&&h.length===1){u=h[0]=h[0].slice(0);if(u.length>2&&(f=u[0]).type==="ID"&&r.getById&&t.nodeType===9&&d&&s.relative[u[1].type]){t=(s.find.ID(f.matches[0].replace(rt,it),t)||[])[0];if(!t)return n;e=e.slice(u.shift().value.length)}o=G.needsContext.test(e)?0:u.length;while(o--){f=u[o];if(s.relative[l=f.type])break;if(c=s.find[l])if(i=c(f.matches[0].replace(rt,it),$.test(u[0].type)&&t.parentNode||t)){u.splice(o,1),e=i.length&&gt(u);if(!e)return H.apply(n,i),n;break}}}return a(e,h)(i,t,!d,n,$.test(e)),n}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b="sizzle"+ -(new Date),w=e.document,S=0,x=0,T=ut(),N=ut(),C=ut(),k=!1,L=function(e,t){return e===t?(k=!0,0):0},A=typeof t,O=1<<31,M={}.hasOwnProperty,_=[],D=_.pop,P=_.push,H=_.push,B=_.slice,j=_.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",q="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",R=q.replace("w","w#"),U="\\["+I+"*("+q+")"+I+"*(?:([*^$|!~]?=)"+I+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+R+")|)|)"+I+"*\\]",z=":("+q+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+U.replace(3,8)+")*)|.*)\\)|)",W=new RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g"),X=new RegExp("^"+I+"*,"+I+"*"),V=new RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),$=new RegExp(I+"*[+~]"),J=new RegExp("="+I+"*([^\\]'\"]*)"+I+"*\\]","g"),K=new RegExp(z),Q=new RegExp("^"+R+"$"),G={ID:new RegExp("^#("+q+")"),CLASS:new RegExp("^\\.("+q+")"),TAG:new RegExp("^("+q.replace("w","w*")+")"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/^(?:input|select|textarea|button)$/i,tt=/^h\d$/i,nt=/'|\\/g,rt=new RegExp("\\\\([\\da-f]{1,6}"+I+"?|("+I+")|.)","ig"),it=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)};try{H.apply(_=B.call(w.childNodes),w.childNodes),_[w.childNodes.length].nodeType}catch(st){H={apply:_.length?function(e,t){P.apply(e,B.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}u=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},r=ot.support={},c=ot.setDocument=function(e){var t=e?e.ownerDocument||e:w,n=t.defaultView;if(t===h||t.nodeType!==9||!t.documentElement)return h;h=t,p=t.documentElement,d=!u(t),n&&n.attachEvent&&n!==n.top&&n.attachEvent("onbeforeunload",function(){c()}),r.attributes=ft(function(e){return e.className="i",!e.getAttribute("className")}),r.getElementsByTagName=ft(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=ft(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",e.getElementsByClassName("i").length===2}),r.getById=ft(function(e){return p.appendChild(e).id=b,!t.getElementsByName||!t.getElementsByName(b).length}),r.getById?(s.find.ID=function(e,t){if(typeof t.getElementById!==A&&d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},s.filter.ID=function(e){var t=e.replace(rt,it);return function(e){return e.getAttribute("id")===t}}):(delete s.find.ID,s.filter.ID=function(e){var t=e.replace(rt,it);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),s.find.TAG=r.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==A)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++])n.nodeType===1&&r.push(n);return r}return s},s.find.CLASS=r.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!==A&&d)return t.getElementsByClassName(e)},m=[],v=[];if(r.qsa=Y.test(t.querySelectorAll))ft(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||v.push("\\["+I+"*(?:value|"+F+")"),e.querySelectorAll(":checked").length||v.push(":checked")}),ft(function(e){var n=t.createElement("input");n.setAttribute("type","hidden"),e.appendChild(n).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&v.push("[*^$]="+I+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")});return(r.matchesSelector=Y.test(g=p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ft(function(e){r.disconnectedMatch=g.call(e,"div"),g.call(e,"[s!='']:x"),m.push("!=",z)}),v=v.length&&new RegExp(v.join("|")),m=m.length&&new RegExp(m.join("|")),y=Y.test(p.contains)||p.compareDocumentPosition?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},L=p.compareDocumentPosition?function(e,n){if(e===n)return k=!0,0;var i=n.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(n);if(i)return i&1||!r.sortDetached&&n.compareDocumentPosition(e)===i?e===t||y(w,e)?-1:n===t||y(w,n)?1:l?j.call(l,e)-j.call(l,n):0:i&4?-1:1;return e.compareDocumentPosition?-1:1}:function(e,n){var r,i=0,s=e.parentNode,o=n.parentNode,u=[e],a=[n];if(e===n)return k=!0,0;if(!s||!o)return e===t?-1:n===t?1:s?-1:o?1:l?j.call(l,e)-j.call(l,n):0;if(s===o)return ct(e,n);r=e;while(r=r.parentNode)u.unshift(r);r=n;while(r=r.parentNode)a.unshift(r);while(u[i]===a[i])i++;return i?ct(u[i],a[i]):u[i]===w?-1:a[i]===w?1:0},t},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){(e.ownerDocument||e)!==h&&c(e),t=t.replace(J,"='$1']");if(r.matchesSelector&&d&&(!m||!m.test(t))&&(!v||!v.test(t)))try{var n=g.call(e,t);if(n||r.disconnectedMatch||e.document&&e.document.nodeType!==11)return n}catch(i){}return ot(t,h,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==h&&c(e),y(e,t)},ot.attr=function(e,n){(e.ownerDocument||e)!==h&&c(e);var i=s.attrHandle[n.toLowerCase()],o=i&&M.call(s.attrHandle,n.toLowerCase())?i(e,n,!d):t;return o===t?r.attributes||!d?e.getAttribute(n):(o=e.getAttributeNode(n))&&o.specified?o.value:null:o},ot.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,n=[],i=0,s=0;k=!r.detectDuplicates,l=!r.sortStable&&e.slice(0),e.sort(L);if(k){while(t=e[s++])t===e[s]&&(i=n.push(s));while(i--)e.splice(n[i],1)}return e},o=ot.getText=function(e){var t,n="",r=0,i=e.nodeType;if(!i)for(;t=e[r];r++)n+=o(t);else if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(i===3||i===4)return e.nodeValue;return n},s=ot.selectors={cacheLength:50,createPseudo:at,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(rt,it),e[3]=(e[4]||e[5]||"").replace(rt,it),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return G.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&K.test(r)&&(n=mt(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(rt,it).toLowerCase();return e==="*"?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+I+")"+e+"("+I+"|$)"))&&T(e,function(e){return t.test(typeof e.className=="string"&&e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ot.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&y){l=m[b]||(m[b]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(c.nodeType===1&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[b]||(t[b]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++h){y&&((c[b]||(c[b]={}))[e]=[S,h]);if(c===t)break}return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,r=s.pseudos[e]||s.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],s.setFilters.hasOwnProperty(e.toLowerCase())?at(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=j.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:at(function(e){var t=[],n=[],r=a(e.replace(W,"$1"));return r[b]?at(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:at(function(e){return function(t){return ot(e,t).length>0}}),contains:at(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:at(function(e){return Q.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(rt,it).toLowerCase(),function(t){var n;do if(n=d?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||e.nodeType===3||e.nodeType===4)return!1;return!0},parent:function(e){return!s.pseudos.empty(e)},header:function(e){return tt.test(e.nodeName)},input:function(e){return et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()===e.type)},first:dt(function(){return[0]}),last:dt(function(e,t){return[t-1]}),eq:dt(function(e,t,n){return[n<0?n+t:n]}),even:dt(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:dt(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:dt(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:dt(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}},s.pseudos.nth=s.pseudos.eq;for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})s.pseudos[n]=ht(n);for(n in{submit:!0,reset:!0})s.pseudos[n]=pt(n);vt.prototype=s.filters=s.pseudos,s.setFilters=new vt,a=ot.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=mt(e)),n=t.length;while(n--)s=St(t[n]),s[b]?r.push(s):i.push(s);s=C(e,xt(i,r))}return s},r.sortStable=b.split("").sort(L).join("")===b,r.detectDuplicates=k,c(),r.sortDetached=ft(function(e){return e.compareDocumentPosition(h.createElement("div"))&1}),ft(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild.getAttribute("href")==="#"})||lt("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}),(!r.attributes||!ft(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),e.firstChild.getAttribute("value")===""}))&&lt("value",function(e,t,n){if(!n&&e.nodeName.toLowerCase()==="input")return e.defaultValue}),ft(function(e){return e.getAttribute("disabled")==null})||lt(F,function(e,t,n){var r;if(!n)return(r=e.getAttributeNode(t))&&r.specified?r.value:e[t]===!0?t.toLowerCase():null}),E.find=ot,E.expr=ot.selectors,E.expr[":"]=E.expr.pseudos,E.unique=ot.uniqueSort,E.text=ot.getText,E.isXMLDoc=ot.isXML,E.contains=ot.contains}(e);var j={};E.Callbacks=function(e){e=typeof e=="string"?j[e]||F(e):E.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){r=e.memory&&t,i=!0,o=u||0,u=0,s=a.length,n=!0;for(;a&&o<s;o++)if(a[o].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,a&&(f?f.length&&l(f.shift()):r?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function i(t){E.each(t,function(t,n){var r=E.type(n);r==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&r!=="string"&&i(n)})})(arguments),n?s=a.length:r&&(u=t,l(r))}return this},remove:function(){return a&&E.each(arguments,function(e,t){var r;while((r=E.inArray(t,a,r))>-1)a.splice(r,1),n&&(r<=s&&s--,r<=o&&o--)}),this},has:function(e){return e?E.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],s=0,this},disable:function(){return a=f=r=t,this},disabled:function(){return!a},lock:function(){return f=t,r||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return a&&(!i||f)&&(t=t||[],t=[e,t.slice?t.slice():t],n?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},E.extend({Deferred:function(e){var t=[["resolve","done",E.Callbacks("once memory"),"resolved"],["reject","fail",E.Callbacks("once memory"),"rejected"],["notify","progress",E.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return E.Deferred(function(n){E.each(t,function(t,s){var o=s[0],u=E.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&E.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return e!=null?E.extend(e,r):r}},i={};return r.pipe=r.then,E.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=m.call(arguments),r=n.length,i=r!==1||e&&E.isFunction(e.promise)?r:0,s=i===1?e:E.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?m.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&E.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),E.support=function(t){var n,r,i,o,a,f,l,c,h,p=u.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*")||[],r=p.getElementsByTagName("a")[0];if(!r||!r.style||!n.length)return t;o=u.createElement("select"),f=o.appendChild(u.createElement("option")),i=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute=p.className!=="t",t.leadingWhitespace=p.firstChild.nodeType===3,t.tbody=!p.getElementsByTagName("tbody").length,t.htmlSerialize=!!p.getElementsByTagName("link").length,t.style=/top/.test(r.getAttribute("style")),t.hrefNormalized=r.getAttribute("href")==="/a",t.opacity=/^0.5/.test(r.style.opacity),t.cssFloat=!!r.style.cssFloat,t.checkOn=!!i.value,t.optSelected=f.selected,t.enctype=!!u.createElement("form").enctype,t.html5Clone=u.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,i.checked=!0,t.noCloneChecked=i.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!f.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}i=u.createElement("input"),i.setAttribute("value",""),t.input=i.getAttribute("value")==="",i.value="t",i.setAttribute("type","radio"),t.radioValue=i.value==="t",i.setAttribute("checked","t"),i.setAttribute("name","t"),a=u.createDocumentFragment(),a.appendChild(i),t.appendChecked=i.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,p.attachEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})p.setAttribute(l="on"+h,"t"),t[h+"Bubbles"]=l in e||p.attributes[l].expando===!1;p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle=p.style.backgroundClip==="content-box";for(h in E(t))break;return t.ownLast=h!=="0",E(function(){var n,r,i,o="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=u.getElementsByTagName("body")[0];if(!a)return;n=u.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(p),p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=p.getElementsByTagName("td"),i[0].style.cssText="padding:0;margin:0;border:0;display:none",c=i[0].offsetHeight===0,i[0].style.display="",i[1].style.display="none",t.reliableHiddenOffsets=c&&i[0].offsetHeight===0,p.innerHTML="",p.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",E.swap(a,a.style.zoom!=null?{zoom:1}:{},function(){t.boxSizing=p.offsetWidth===4}),e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(p,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(p,null)||{width:"4px"}).width==="4px",r=p.appendChild(u.createElement("div")),r.style.cssText=p.style.cssText=o,r.style.marginRight=r.style.width="0",p.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof p.style.zoom!==s&&(p.innerHTML="",p.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.innerHTML="<div></div>",p.firstChild.style.width="5px",t.shrinkWrapBlocks=p.offsetWidth!==3,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=p=i=r=null}),n=o=a=f=r=i=null,t}({});var I=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,q=/([A-Z])/g;E.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?E.cache[e[E.expando]]:e[E.expando],!!e&&!W(e)},data:function(e,t,n){return R(e,t,n)},removeData:function(e,t){return U(e,t)},_data:function(e,t,n){return R(e,t,n,!0)},_removeData:function(e,t){return U(e,t,!0)},acceptData:function(e){if(e.nodeType&&e.nodeType!==1&&e.nodeType!==9)return!1;var t=e.nodeName&&E.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),E.fn.extend({data:function(e,n){var r,i,s=null,o=0,u=this[0];if(e===t){if(this.length){s=E.data(u);if(u.nodeType===1&&!E._data(u,"parsedAttrs")){r=u.attributes;for(;o<r.length;o++)i=r[o].name,i.indexOf("data-")===0&&(i=E.camelCase(i.slice(5)),z(u,i,s[i]));E._data(u,"parsedAttrs",!0)}}return s}return typeof e=="object"?this.each(function(){E.data(this,e)}):arguments.length>1?this.each(function(){E.data(this,e,n)}):u?z(u,e,E.data(u,e)):null},removeData:function(e){return this.each(function(){E.removeData(this,e)})}}),E.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=E._data(e,t),n&&(!r||E.isArray(n)?r=E._data(e,t,E.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=E.queue(e,t),r=n.length,i=n.shift(),s=E._queueHooks(e,t),o=function(){E.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return E._data(e,n)||E._data(e,n,{empty:E.Callbacks("once memory").add(function(){E._removeData(e,t+"queue"),E._removeData(e,n)})})}}),E.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?E.queue(this[0],e):n===t?this:this.each(function(){var t=E.queue(this,e,n);E._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&E.dequeue(this,e)})},dequeue:function(e){return this.each(function(){E.dequeue(this,e)})},delay:function(e,t){return e=E.fx?E.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=E.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=E._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var X,V,$=/[\t\r\n\f]/g,J=/\r/g,K=/^(?:input|select|textarea|button|object)$/i,Q=/^(?:a|area)$/i,G=/^(?:checked|selected)$/i,Y=E.support.getSetAttribute,Z=E.support.input;E.fn.extend({attr:function(e,t){return E.access(this,E.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){E.removeAttr(this,e)})},prop:function(e,t){return E.access(this,E.prop,e,t,arguments.length>1)},removeProp:function(e){return e=E.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=typeof e=="string"&&e;if(E.isFunction(e))return this.each(function(t){E(this).addClass(e.call(this,t,this.className))});if(a){t=(e||"").match(x)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace($," "):" ");if(r){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");n.className=E.trim(r)}}}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=arguments.length===0||typeof e=="string"&&e;if(E.isFunction(e))return this.each(function(t){E(this).removeClass(e.call(this,t,this.className))});if(a){t=(e||"").match(x)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace($," "):"");if(r){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?E.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e;return typeof t=="boolean"&&n==="string"?t?this.addClass(e):this.removeClass(e):E.isFunction(e)?this.each(function(n){E(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var t,r=0,i=E(this),o=e.match(x)||[];while(t=o[r++])i.hasClass(t)?i.removeClass(t):i.addClass(t)}else if(n===s||n==="boolean")this.className&&E._data(this,"__className__",this.className),this.className=this.className||e===!1?"":E._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace($," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return r=E.valHooks[s.type]||E.valHooks[s.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(s,"value"))!==t?n:(n=s.value,typeof n=="string"?n.replace(J,""):n==null?"":n);return}return i=E.isFunction(e),this.each(function(n){var s;if(this.nodeType!==1)return;i?s=e.call(this,n,E(this).val()):s=e,s==null?s="":typeof s=="number"?s+="":E.isArray(s)&&(s=E.map(s,function(e){return e==null?"":e+""})),r=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()];if(!r||!("set"in r)||r.set(this,s,"value")===t)this.value=s})}}),E.extend({valHooks:{option:{get:function(e){var t=E.find.attr(e,"value");return t!=null?t:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(E.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!E.nodeName(n.parentNode,"optgroup"))){t=E(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n,r,i=e.options,s=E.makeArray(t),o=i.length;while(o--){r=i[o];if(r.selected=E.inArray(E(r).val(),s)>=0)n=!0}return n||(e.selectedIndex=-1),s}}},attr:function(e,n,r){var i,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;if(typeof e.getAttribute===s)return E.prop(e,n,r);if(u!==1||!E.isXMLDoc(e))n=n.toLowerCase(),i=E.attrHooks[n]||(E.expr.match.bool.test(n)?V:X);if(r===t)return i&&"get"in i&&(o=i.get(e,n))!==null?o:(o=E.find.attr(e,n),o==null?t:o);if(r!==null)return i&&"set"in i&&(o=i.set(e,r,n))!==t?o:(e.setAttribute(n,r+""),r);E.removeAttr(e,n)},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(x);if(s&&e.nodeType===1)while(n=s[i++])r=E.propFix[n]||n,E.expr.match.bool.test(n)?Z&&Y||!G.test(n)?e[r]=!1:e[E.camelCase("default-"+n)]=e[r]=!1:E.attr(e,n,""),e.removeAttribute(Y?n:r)},attrHooks:{type:{set:function(e,t){if(!E.support.radioValue&&t==="radio"&&E.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!E.isXMLDoc(e),o&&(n=E.propFix[n]||n,s=E.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var t=E.find.attr(e,"tabindex");return t?parseInt(t,10):K.test(e.nodeName)||Q.test(e.nodeName)&&e.href?0:-1}}}}),V={set:function(e,t,n){return t===!1?E.removeAttr(e,n):Z&&Y||!G.test(n)?e.setAttribute(!Y&&E.propFix[n]||n,n):e[E.camelCase("default-"+n)]=e[n]=!0,n}},E.each(E.expr.match.bool.source.match(/\w+/g),function(e,n){var r=E.expr.attrHandle[n]||E.find.attr;E.expr.attrHandle[n]=Z&&Y||!G.test(n)?function(e,n,i){var s=E.expr.attrHandle[n],o=i?t:(E.expr.attrHandle[n]=t)!=r(e,n,i)?n.toLowerCase():null;return E.expr.attrHandle[n]=s,o}:function(e,n,r){return r?t:e[E.camelCase("default-"+n)]?n.toLowerCase():null}});if(!Z||!Y)E.attrHooks.value={set:function(e,t,n){if(!E.nodeName(e,"input"))return X&&X.set(e,t,n);e.defaultValue=t}};Y||(X={set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="",r==="value"||n===e.getAttribute(r)?n:t}},E.expr.attrHandle.id=E.expr.attrHandle.name=E.expr.attrHandle.coords=function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&i.value!==""?i.value:null},E.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&r.specified?r.value:t},set:X.set},E.attrHooks.contenteditable={set:function(e,t,n){X.set(e,t===""?!1:t,n)}},E.each(["width","height"],function(e,t){E.attrHooks[t]={set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}}})),E.support.hrefNormalized||E.each(["href","src"],function(e,t){E.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),E.support.style||(E.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),E.support.optSelected||(E.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){E.propFix[this.toLowerCase()]=this}),E.support.enctype||(E.propFix.enctype="encoding"),E.each(["radio","checkbox"],function(){E.valHooks[this]={set:function(e,t){if(E.isArray(t))return e.checked=E.inArray(E(e).val(),t)>=0}},E.support.checkOn||(E.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})});var et=/^(?:input|select|textarea)$/i,tt=/^key/,nt=/^(?:mouse|contextmenu)|click/,rt=/^(?:focusinfocus|focusoutblur)$/,it=/^([^.]*)(?:\.(.+)|)$/;E.event={global:{},add:function(e,n,r,i,o){var u,a,f,l,c,h,p,d,v,m,g,y=E._data(e);if(!y)return;r.handler&&(l=r,r=l.handler,o=l.selector),r.guid||(r.guid=E.guid++),(a=y.events)||(a=y.events={}),(h=y.handle)||(h=y.handle=function(e){return typeof E===s||!!e&&E.event.triggered===e.type?t:E.event.dispatch.apply(h.elem,arguments)},h.elem=e),n=(n||"").match(x)||[""],f=n.length;while(f--){u=it.exec(n[f])||[],v=g=u[1],m=(u[2]||"").split(".").sort();if(!v)continue;c=E.event.special[v]||{},v=(o?c.delegateType:c.bindType)||v,c=E.event.special[v]||{},p=E.extend({type:v,origType:g,data:i,handler:r,guid:r.guid,selector:o,needsContext:o&&E.expr.match.needsContext.test(o),namespace:m.join(".")},l);if(!(d=a[v])){d=a[v]=[],d.delegateCount=0;if(!c.setup||c.setup.call(e,i,m,h)===!1)e.addEventListener?e.addEventListener(v,h,!1):e.attachEvent&&e.attachEvent("on"+v,h)}c.add&&(c.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,p):d.push(p),E.event.global[v]=!0}e=null},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=E.hasData(e)&&E._data(e);if(!m||!(l=m.events))return;t=(t||"").match(x)||[""],f=t.length;while(f--){u=it.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort();if(!p){for(p in l)E.event.remove(e,p+t[f],n,r,!0);continue}c=E.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=l[p]||[],u=u[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],(i||v===o.origType)&&(!n||n.guid===o.guid)&&(!u||u.test(o.namespace))&&(!r||r===o.selector||r==="**"&&o.selector)&&(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&((!c.teardown||c.teardown.call(e,d,m.handle)===!1)&&E.removeEvent(e,p,m.handle),delete l[p])}E.isEmptyObject(l)&&(delete m.handle,E._removeData(e,"events"))},trigger:function(n,r,i,s){var o,a,f,l,c,h,p,d=[i||u],v=b.call(n,"type")?n.type:n,m=b.call(n,"namespace")?n.namespace.split("."):[];f=h=i=i||u;if(i.nodeType===3||i.nodeType===8)return;if(rt.test(v+E.event.triggered))return;v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),a=v.indexOf(":")<0&&"on"+v,n=n[E.expando]?n:new E.Event(v,typeof n=="object"&&n),n.isTrigger=s?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=r==null?[n]:E.makeArray(r,[n]),c=E.event.special[v]||{};if(!s&&c.trigger&&c.trigger.apply(i,r)===!1)return;if(!s&&!c.noBubble&&!E.isWindow(i)){l=c.delegateType||v,rt.test(l+v)||(f=f.parentNode);for(;f;f=f.parentNode)d.push(f),h=f;h===(i.ownerDocument||u)&&d.push(h.defaultView||h.parentWindow||e)}p=0;while((f=d[p++])&&!n.isPropagationStopped())n.type=p>1?l:c.bindType||v,o=(E._data(f,"events")||{})[n.type]&&E._data(f,"handle"),o&&o.apply(f,r),o=a&&f[a],o&&E.acceptData(f)&&o.apply&&o.apply(f,r)===!1&&n.preventDefault();n.type=v;if(!s&&!n.isDefaultPrevented()&&(!c._default||c._default.apply(d.pop(),r)===!1)&&E.acceptData(i)&&a&&i[v]&&!E.isWindow(i)){h=i[a],h&&(i[a]=null),E.event.triggered=v;try{i[v]()}catch(g){}E.event.triggered=t,h&&(i[a]=h)}return n.result},dispatch:function(e){e=E.event.fix(e);var n,r,i,s,o,u=[],a=m.call(arguments),f=(E._data(this,"events")||{})[e.type]||[],l=E.event.special[e.type]||{};a[0]=e,e.delegateTarget=this;if(l.preDispatch&&l.preDispatch.call(this,e)===!1)return;u=E.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())if(!e.namespace_re||e.namespace_re.test(i.namespace))e.handleObj=i,e.data=i.data,r=((E.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation())}return l.postDispatch&&l.postDispatch.call(this,e),e.result},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||e.type!=="click"))for(;f!=this;f=f.parentNode||this)if(f.nodeType===1&&(f.disabled!==!0||e.type!=="click")){s=[];for(o=0;o<a;o++)i=n[o],r=i.selector+" ",s[r]===t&&(s[r]=i.needsContext?E(r,this).index(f)>=0:E.find(r,this,null,[f]).length),s[r]&&s.push(i);s.length&&u.push({elem:f,handlers:s})}return a<n.length&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[E.expando])return e;var t,n,r,i=e.type,s=e,o=this.fixHooks[i];o||(this.fixHooks[i]=o=nt.test(i)?this.mouseHooks:tt.test(i)?this.keyHooks:{}),r=o.props?this.props.concat(o.props):this.props,e=new E.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=s.srcElement||u),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,s,o=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(i=e.target.ownerDocument||u,s=i.documentElement,r=i.body,e.pageX=n.clientX+(s&&s.scrollLeft||r&&r.scrollLeft||0)-(s&&s.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||r&&r.scrollTop||0)-(s&&s.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&o!==t&&(e.which=o&1?1:o&2?3:o&4?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ut()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===ut()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(E.nodeName(this,"input")&&this.type==="checkbox"&&this.click)return this.click(),!1},_default:function(e){return E.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=E.extend(new E.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?E.event.trigger(i,null,t):E.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},E.removeEvent=u.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===s&&(e[r]=null),e.detachEvent(r,n))},E.Event=function(e,t){if(!(this instanceof E.Event))return new E.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?st:ot):this.type=e,t&&E.extend(this,t),this.timeStamp=e&&e.timeStamp||E.now(),this[E.expando]=!0},E.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=st;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=st;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=st,this.stopPropagation()}},E.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){E.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!E.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),E.support.submitBubbles||(E.event.special.submit={setup:function(){if(E.nodeName(this,"form"))return!1;E.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=E.nodeName(n,"input")||E.nodeName(n,"button")?n.form:t;r&&!E._data(r,"submitBubbles")&&(E.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),E._data(r,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&E.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(E.nodeName(this,"form"))return!1;E.event.remove(this,"._submit")}}),E.support.changeBubbles||(E.event.special.change={setup:function(){if(et.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")E.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),E.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),E.event.simulate("change",this,e,!0)});return!1}E.event.add(this,"beforeactivate._change",function(e){var t=e.target;et.test(t.nodeName)&&!E._data(t,"changeBubbles")&&(E.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&E.event.simulate("change",this.parentNode,e,!0)}),E._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return E.event.remove(this,"._change"),!et.test(this.nodeName)}}),E.support.focusinBubbles||E.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){E.event.simulate(t,e.target,E.event.fix(e),!0)};E.event.special[t]={setup:function(){n++===0&&u.addEventListener(e,r,!0)},teardown:function(){--n===0&&u.removeEventListener(e,r,!0)}}}),E.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(o in e)this.on(o,n,r,e[o],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=ot;else if(!i)return this;return s===1&&(u=i,i=function(e){return E().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=E.guid++)),this.each(function(){E.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,E(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=ot),this.each(function(){E.event.remove(this,e,r,n)})},trigger:function(e,t){return this.each(function(){E.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return E.event.trigger(e,t,n,!0)}});var at=/^.[^:#\[\.,]*$/,ft=/^(?:parents|prev(?:Until|All))/,lt=E.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};E.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if(typeof e!="string")return this.pushStack(E(e).filter(function(){for(t=0;t<i;t++)if(E.contains(r[t],this))return!0}));for(t=0;t<i;t++)E.find(e,r[t],n);return n=this.pushStack(i>1?E.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=E(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(E.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(pt(this,e||[],!0))},filter:function(e){return this.pushStack(pt(this,e||[],!1))},is:function(e){return!!pt(this,typeof e=="string"&&lt.test(e)?E(e):e||[],!1).length},closest:function(e,t){var n,r=0,i=this.length,s=[],o=lt.test(e)||typeof e!="string"?E(e,t||this.context):0;for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:n.nodeType===1&&E.find.matchesSelector(n,e))){n=s.push(n);break}return this.pushStack(s.length>1?E.unique(s):s)},index:function(e){return e?typeof e=="string"?E.inArray(this[0],E(e)):E.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?E(e,t):E.makeArray(e&&e.nodeType?[e]:e),r=E.merge(this.get(),n);return this.pushStack(E.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),E.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return E.dir(e,"parentNode")},parentsUntil:function(e,t,n){return E.dir(e,"parentNode",n)},next:function(e){return ht(e,"nextSibling")},prev:function(e){return ht(e,"previousSibling")},nextAll:function(e){return E.dir(e,"nextSibling")},prevAll:function(e){return E.dir(e,"previousSibling")},nextUntil:function(e,t,n){return E.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return E.dir(e,"previousSibling",n)},siblings:function(e){return E.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return E.sibling(e.firstChild)},contents:function(e){return E.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:E.merge([],e.childNodes)}},function(e,t){E.fn[e]=function(n,r){var i=E.map(this,t,n);return e.slice(-5)!=="Until"&&(r=n),r&&typeof r=="string"&&(i=E.filter(r,i)),this.length>1&&(ct[e]||(i=E.unique(i)),ft.test(e)&&(i=i.reverse())),this.pushStack(i)}}),E.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),t.length===1&&r.nodeType===1?E.find.matchesSelector(r,e)?[r]:[]:E.find.matches(e,E.grep(t,function(e){return e.nodeType===1}))},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!E(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var vt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",mt=/ jQuery\d+="(?:null|\d+)"/g,gt=new RegExp("<(?:"+vt+")[\\s/>]","i"),yt=/^\s+/,bt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,wt=/<([\w:]+)/,Et=/<tbody/i,St=/<|&#?\w+;/,xt=/<(?:script|style|link)/i,Tt=/^(?:checkbox|radio)$/i,Nt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ct=/^$|\/(?:java|ecma)script/i,kt=/^true\/(.*)/,Lt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,At={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:E.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ot=dt(u),Mt=Ot.appendChild(u.createElement("div"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,E.fn.extend({text:function(e){return E.access(this,function(e){return e===t?E.text(this):this.empty().append((this[0]&&this[0].ownerDocument||u).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=_t(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=_t(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=e?E.filter(e,this):this,i=0;for(;(n=r[i])!=null;i++)!t&&n.nodeType===1&&E.cleanData(Ft(n)),n.parentNode&&(t&&E.contains(n.ownerDocument,n)&&Ht(Ft(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&E.cleanData(Ft(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&E.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return E.clone(this,e,t)})},html:function(e){return E.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(mt,""):t;if(typeof e=="string"&&!xt.test(e)&&(E.support.htmlSerialize||!gt.test(e))&&(E.support.leadingWhitespace||!yt.test(e))&&!At[(wt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(bt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(E.cleanData(Ft(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=E.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),E(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=d.apply([],e);var r,i,s,o,u,a,f=0,l=this.length,c=this,h=l-1,p=e[0],v=E.isFunction(p);if(v||!(l<=1||typeof p!="string"||E.support.checkClone||!Nt.test(p)))return this.each(function(r){var i=c.eq(r);v&&(e[0]=p.call(this,r,i.html())),i.domManip(e,t,n)});if(l){a=E.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=a.firstChild,a.childNodes.length===1&&(a=r);if(r){o=E.map(Ft(a,"script"),Dt),s=o.length;for(;f<l;f++)i=a,f!==h&&(i=E.clone(i,!0,!0),s&&E.merge(o,Ft(i,"script"))),t.call(this[f],i,f);if(s){u=o[o.length-1].ownerDocument,E.map(o,Pt);for(f=0;f<s;f++)i=o[f],Ct.test(i.type||"")&&!E._data(i,"globalEval")&&E.contains(u,i)&&(i.src?E._evalUrl(i.src):E.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Lt,"")))}a=r=null}}return this}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){E.fn[e]=function(e){var n,r=0,i=[],s=E(e),o=s.length-1;for(;r<=o;r++)n=r===o?this:this.clone(!0),E(s[r])[t](n),v.apply(i,n.get());return this.pushStack(i)}}),E.extend({clone:function(e,t,n){var r,i,s,o,u,a=E.contains(e.ownerDocument,e);E.support.html5Clone||E.isXMLDoc(e)||!gt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Mt.innerHTML=e.outerHTML,Mt.removeChild(s=Mt.firstChild));if((!E.support.noCloneEvent||!E.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!E.isXMLDoc(e)){r=Ft(s),u=Ft(e);for(o=0;(i=u[o])!=null;++o)r[o]&&jt(i,r[o])}if(t)if(n){u=u||Ft(e),r=r||Ft(s);for(o=0;(i=u[o])!=null;o++)Bt(i,r[o])}else Bt(e,s);return r=Ft(s,"script"),r.length>0&&Ht(r,!a&&Ft(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,h=dt(t),p=[],d=0;for(;d<c;d++){s=e[d];if(s||s===0)if(E.type(s)==="object")E.merge(p,s.nodeType?[s]:s);else if(!St.test(s))p.push(t.createTextNode(s));else{u=u||h.appendChild(t.createElement("div")),a=(wt.exec(s)||["",""])[1].toLowerCase(),l=At[a]||At._default,u.innerHTML=l[1]+s.replace(bt,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;!E.support.leadingWhitespace&&yt.test(s)&&p.push(t.createTextNode(yt.exec(s)[0]));if(!E.support.tbody){s=a==="table"&&!Et.test(s)?u.firstChild:l[1]==="<table>"&&!Et.test(s)?u:0,i=s&&s.childNodes.length;while(i--)E.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}E.merge(p,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=h.lastChild}}u&&h.removeChild(u),E.support.appendChecked||E.grep(Ft(p,"input"),It),d=0;while(s=p[d++]){if(r&&E.inArray(s,r)!==-1)continue;o=E.contains(s.ownerDocument,s),u=Ft(h.appendChild(s),"script"),o&&Ht(u);if(n){i=0;while(s=u[i++])Ct.test(s.type||"")&&n.push(s)}}return u=null,h},cleanData:function(e,t){var n,r,i,o,u=0,a=E.expando,f=E.cache,l=E.support.deleteExpando,c=E.event.special;for(;(n=e[u])!=null;u++)if(t||E.acceptData(n)){i=n[a],o=i&&f[i];if(o){if(o.events)for(r in o.events)c[r]?E.event.remove(n,r):E.removeEvent(n,r,o.handle);f[i]&&(delete f[i],l?delete n[a]:typeof n.removeAttribute!==s?n.removeAttribute(a):n[a]=null,h.push(i))}}},_evalUrl:function(e){return E.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),E.fn.extend({wrapAll:function(e){if(E.isFunction(e))return this.each(function(t){E(this).wrapAll(e.call(this,t))});if(this[0]){var t=E(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return E.isFunction(e)?this.each(function(t){E(this).wrapInner(e.call(this,t))}):this.each(function(){var t=E(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=E.isFunction(e);return this.each(function(n){E(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){E.nodeName(this,"body")||E(this).replaceWith(this.childNodes)}).end()}});var qt,Rt,Ut,zt=/alpha\([^)]*\)/i,Wt=/opacity\s*=\s*([^)]*)/,Xt=/^(top|right|bottom|left)$/,Vt=/^(none|table(?!-c[ea]).+)/,$t=/^margin/,Jt=new RegExp("^("+S+")(.*)$","i"),Kt=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Qt=new RegExp("^([+-])=("+S+")","i"),Gt={BODY:"block"},Yt={position:"absolute",visibility:"hidden",display:"block"},Zt={letterSpacing:0,fontWeight:400},en=["Top","Right","Bottom","Left"],tn=["Webkit","O","Moz","ms"];E.fn.extend({css:function(e,n){return E.access(this,function(e,n,r){var i,s,o={},u=0;if(E.isArray(n)){s=Rt(e),i=n.length;for(;u<i;u++)o[n[u]]=E.css(e,n[u],!1,s);return o}return r!==t?E.style(e,n,r):E.css(e,n)},e,n,arguments.length>1)},show:function(){return sn(this,!0)},hide:function(){return sn(this)},toggle:function(e){return typeof e=="boolean"?e?this.show():this.hide():this.each(function(){rn(this)?E(this).show():E(this).hide()})}}),E.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ut(e,"opacity");return n===""?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":E.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=E.camelCase(n),f=e.style;n=E.cssProps[a]||(E.cssProps[a]=nn(f,a)),u=E.cssHooks[n]||E.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=Qt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(E.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!E.cssNumber[a]&&(r+="px"),!E.support.clearCloneStyle&&r===""&&n.indexOf("background")===0&&(f[n]="inherit");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=E.camelCase(n);return n=E.cssProps[a]||(E.cssProps[a]=nn(e.style,a)),u=E.cssHooks[n]||E.cssHooks[a],u&&"get"in u&&(o=u.get(e,!0,r)),o===t&&(o=Ut(e,n,i)),o==="normal"&&n in Zt&&(o=Zt[n]),r===""||r?(s=parseFloat(o),r===!0||E.isNumeric(s)?s||0:o):o}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Ut=function(e,n,r){var i,s,o,u=r||Rt(e),a=u?u.getPropertyValue(n)||u[n]:t,f=e.style;return u&&(a===""&&!E.contains(e.ownerDocument,e)&&(a=E.style(e,n)),Kt.test(a)&&$t.test(n)&&(i=f.width,s=f.minWidth,o=f.maxWidth,f.minWidth=f.maxWidth=f.width=a,a=u.width,f.width=i,f.minWidth=s,f.maxWidth=o)),a}):u.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Ut=function(e,n,r){var i,s,o,u=r||Rt(e),a=u?u[n]:t,f=e.style;return a==null&&f&&f[n]&&(a=f[n]),Kt.test(a)&&!Xt.test(n)&&(i=f.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),f.left=n==="fontSize"?"1em":a,a=f.pixelLeft+"px",f.left=i,o&&(s.left=o)),a===""?"auto":a}),E.each(["height","width"],function(e,t){E.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&Vt.test(E.css(e,"display"))?E.swap(e,Yt,function(){return an(e,t,r)}):an(e,t,r)},set:function(e,n,r){var i=r&&Rt(e);return on(e,n,r?un(e,t,r,E.support.boxSizing&&E.css(e,"boxSizing",!1,i)==="border-box",i):0)}}}),E.support.opacity||(E.cssHooks.opacity={get:function(e,t){return Wt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=E.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if((t>=1||t==="")&&E.trim(s.replace(zt,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(t===""||r&&!r.filter)return}n.filter=zt.test(s)?s.replace(zt,i):s+" "+i}}),E(function(){E.support.reliableMarginRight||(E.cssHooks.marginRight={get:function(e,t){if(t)return E.swap(e,{display:"inline-block"},Ut,[e,"marginRight"])}}),!E.support.pixelPosition&&E.fn.position&&E.each(["top","left"],function(e,t){E.cssHooks[t]={get:function(e,n){if(n)return n=Ut(e,t),Kt.test(n)?E(e).position()[t]+"px":n}}})}),E.expr&&E.expr.filters&&(E.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!E.support.reliableHiddenOffsets&&(e.style&&e.style.display||E.css(e,"display"))==="none"},E.expr.filters.visible=function(e){return!E.expr.filters.hidden(e)}),E.each({margin:"",padding:"",border:"Width"},function(e,t){E.cssHooks[e+t]={expand:function(n){var r=0,i={},s=typeof n=="string"?n.split(" "):[n];for(;r<4;r++)i[e+en[r]+t]=s[r]||s[r-2]||s[0];return i}},$t.test(e)||(E.cssHooks[e+t].set=on)});var cn=/%20/g,hn=/\[\]$/,pn=/\r?\n/g,dn=/^(?:submit|button|image|reset|file)$/i,vn=/^(?:input|select|textarea|keygen)/i;E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=E.prop(this,"elements");return e?E.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!E(this).is(":disabled")&&vn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Tt.test(e))}).map(function(e,t){var n=E(this).val();return n==null?null:E.isArray(n)?E.map(n,function(e){return{name:t.name,value:e.replace(pn,"\r\n")}}):{name:t.name,value:n.replace(pn,"\r\n")}}).get()}}),E.param=function(e,n){var r,i=[],s=function(e,t){t=E.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=E.ajaxSettings&&E.ajaxSettings.traditional);if(E.isArray(e)||e.jquery&&!E.isPlainObject(e))E.each(e,function(){s(this.name,this.value)});else for(r in e)mn(r,e[r],n,s);return i.join("&").replace(cn,"+")},E.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){E.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),E.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)}});var gn,yn,bn=E.now(),wn=/\?/,En=/#.*$/,Sn=/([?&])_=[^&]*/,xn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Tn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Nn=/^(?:GET|HEAD)$/,Cn=/^\/\//,kn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Ln=E.fn.load,An={},On={},Mn="*/".concat("*");try{yn=o.href}catch(_n){yn=u.createElement("a"),yn.href="",yn=yn.href}gn=kn.exec(yn.toLowerCase())||[],E.fn.load=function(e,n,r){if(typeof e!="string"&&Ln)return Ln.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),E.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(o="POST"),u.length>0&&E.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){s=arguments,u.html(i?E("<div>").append(E.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,s||[e.responseText,t,e])}),this},E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){E.fn[t]=function(e){return this.on(t,e)}}),E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:"GET",isLocal:Tn.test(gn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Mn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":E.parseJSON,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Hn(Hn(e,E.ajaxSettings),t):Hn(E.ajaxSettings,e)},ajaxPrefilter:Dn(An),ajaxTransport:Dn(On),ajax:function(e,n){function N(e,n,r,i){var l,g,y,w,x,T=n;if(b===2)return;b=2,u&&clearTimeout(u),f=t,o=i||"",S.readyState=e>0?4:0,l=e>=200&&e<300||e===304,r&&(w=Bn(c,S,r)),w=jn(c,w,S,l);if(l)c.ifModified&&(x=S.getResponseHeader("Last-Modified"),x&&(E.lastModified[s]=x),x=S.getResponseHeader("etag"),x&&(E.etag[s]=x)),e===204||c.type==="HEAD"?T="nocontent":e===304?T="notmodified":(T=w.state,g=w.data,y=w.error,l=!y);else{y=T;if(e||!T)T="error",e<0&&(e=0)}S.status=e,S.statusText=(n||T)+"",l?d.resolveWith(h,[g,T,S]):d.rejectWith(h,[S,T,y]),S.statusCode(m),m=t,a&&p.trigger(l?"ajaxSuccess":"ajaxError",[S,c,l?g:y]),v.fireWith(h,[S,T]),a&&(p.trigger("ajaxComplete",[S,c]),--E.active||E.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=E.ajaxSetup({},n),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?E(h):E.event,d=E.Deferred(),v=E.Callbacks("once memory"),m=c.statusCode||{},g={},y={},b=0,w="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(b===2){if(!l){l={};while(t=xn.exec(o))l[t[1].toLowerCase()]=t[2]}t=l[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return b===2?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(b<2)for(t in e)m[t]=[m[t],e[t]];else S.always(e[S.status]);return this},abort:function(e){var t=e||w;return f&&f.abort(t),N(0,t),this}};d.promise(S).complete=v.add,S.success=S.done,S.error=S.fail,c.url=((e||c.url||yn)+"").replace(En,"").replace(Cn,gn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=E.trim(c.dataType||"*").toLowerCase().match(x)||[""],c.crossDomain==null&&(r=kn.exec(c.url.toLowerCase()),c.crossDomain=!(!r||r[1]===gn[1]&&r[2]===gn[2]&&(r[3]||(r[1]==="http:"?"80":"443"))===(gn[3]||(gn[1]==="http:"?"80":"443")))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=E.param(c.data,c.traditional)),Pn(An,c,n,S);if(b===2)return S;a=c.global,a&&E.active++===0&&E.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Nn.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(wn.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=Sn.test(s)?s.replace(Sn,"$1_="+bn++):s+(wn.test(s)?"&":"?")+"_="+bn++)),c.ifModified&&(E.lastModified[s]&&S.setRequestHeader("If-Modified-Since",E.lastModified[s]),E.etag[s]&&S.setRequestHeader("If-None-Match",E.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&S.setRequestHeader("Content-Type",c.contentType),S.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+Mn+"; q=0.01":""):c.accepts["*"]);for(i in c.headers)S.setRequestHeader(i,c.headers[i]);if(!c.beforeSend||c.beforeSend.call(h,S,c)!==!1&&b!==2){w="abort";for(i in{success:1,error:1,complete:1})S[i](c[i]);f=Pn(On,c,n,S);if(!f)N(-1,"No Transport");else{S.readyState=1,a&&p.trigger("ajaxSend",[S,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){S.abort("timeout")},c.timeout));try{b=1,f.send(g,N)}catch(T){if(!(b<2))throw T;N(-1,T)}}return S}return S.abort()},getJSON:function(e,t,n){return E.get(e,t,n,"json")},getScript:function(e,n){return E.get(e,t,n,"script")}}),E.each(["get","post"],function(e,n){E[n]=function(e,r,i,s){return E.isFunction(r)&&(s=s||i,i=r,r=t),E.ajax({url:e,type:n,dataType:s,data:r,success:i})}}),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return E.globalEval(e),e}}}),E.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),E.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=u.head||E("head")[0]||u.documentElement;return{send:function(t,i){n=u.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){if(t||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Fn=[],In=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Fn.pop()||E.expando+"_"+bn++;return this[e]=!0,e}}),E.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.jsonp!==!1&&(In.test(n.url)?"url":typeof n.data=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&In.test(n.data)&&"data");if(a||n.dataTypes[0]==="jsonp")return s=n.jsonpCallback=E.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a]=n[a].replace(In,"$1"+s):n.jsonp!==!1&&(n.url+=(wn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||E.error(s+" was not called"),u[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Fn.push(s)),u&&E.isFunction(o)&&o(u[0]),u=o=t}),"script"});var qn,Rn,Un=0,zn=e.ActiveXObject&&function(){var e;for(e in qn)qn[e](t,!0)};E.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Wn()||Xn()}:Wn,Rn=E.ajaxSettings.xhr(),E.support.cors=!!Rn&&"withCredentials"in Rn,Rn=E.support.ajax=!!Rn,Rn&&E.ajaxTransport(function(n){if(!n.crossDomain||E.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=E.noop,zn&&delete qn[o]);if(i)a.readyState!==4&&a.abort();else{c={},u=a.status,f=a.getAllResponseHeaders(),typeof a.responseText=="string"&&(c.text=a.responseText);try{l=a.statusText}catch(h){l=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(p){i||s(-1,p)}c&&s(u,l,c,f)},n.async?a.readyState===4?setTimeout(r):(o=++Un,zn&&(qn||(qn={},E(e).unload(zn)),qn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Vn,$n,Jn=/^(?:toggle|show|hide)$/,Kn=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),Qn=/queueHooks$/,Gn=[rr],Yn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Kn.exec(t),s=i&&i[3]||(E.cssNumber[e]?"":"px"),o=(E.cssNumber[e]||s!=="px"&&+r)&&Kn.exec(E.css(n.elem,e)),u=1,a=20;if(o&&o[3]!==s){s=s||o[3],i=i||[],o=+r||1;do u=u||".5",o/=u,E.style(n.elem,e,o+s);while(u!==(u=n.cur()/r)&&u!==1&&--a)}return i&&(o=n.start=+o||+r||0,n.unit=s,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};E.Animation=E.extend(tr,{tweener:function(e,t){E.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Yn[n]=Yn[n]||[],Yn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}}),E.Tween=ir,ir.prototype={constructor:ir,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(E.cssNumber[n]?"":"px")},cur:function(){var e=ir.propHooks[this.prop];return e&&e.get?e.get(this):ir.propHooks._default.get(this)},run:function(e){var t,n=ir.propHooks[this.prop];return this.options.duration?this.pos=t=E.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ir.propHooks._default.set(this),this}},ir.prototype.init.prototype=ir.prototype,ir.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=E.css(e.elem,e.prop,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){E.fx.step[e.prop]?E.fx.step[e.prop](e):e.elem.style&&(e.elem.style[E.cssProps[e.prop]]!=null||E.cssHooks[e.prop])?E.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},ir.propHooks.scrollTop=ir.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},E.each(["toggle","show","hide"],function(e,t){var n=E.fn[t];E.fn[t]=function(e,r,i){return e==null||typeof e=="boolean"?n.apply(this,arguments):this.animate(sr(t,!0),e,r,i)}}),E.fn.extend({fadeTo:function(e,t,n,r){return this.filter(rn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=E.isEmptyObject(e),s=E.speed(t,n,r),o=function(){var t=tr(this,E.extend({},e),s);(i||E._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=E.timers,o=E._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Qn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&E.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=E._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=E.timers,o=r?r.length:0;n.finish=!0,E.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0);for(t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),E.each({slideDown:sr("show"),slideUp:sr("hide"),slideToggle:sr("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){E.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),E.speed=function(e,t,n){var r=e&&typeof e=="object"?E.extend({},e):{complete:n||!n&&t||E.isFunction(e)&&e,duration:e,easing:n&&t||t&&!E.isFunction(t)&&t};r.duration=E.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in E.fx.speeds?E.fx.speeds[r.duration]:E.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){E.isFunction(r.old)&&r.old.call(this),r.queue&&E.dequeue(this,r.queue)},r},E.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},E.timers=[],E.fx=ir.prototype.init,E.fx.tick=function(){var e,n=E.timers,r=0;Vn=E.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||E.fx.stop(),Vn=t},E.fx.timer=function(e){e()&&E.timers.push(e)&&E.fx.start()},E.fx.interval=13,E.fx.start=function(){$n||($n=setInterval(E.fx.tick,E.fx.interval))},E.fx.stop=function(){clearInterval($n),$n=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fx.step={},E.expr&&E.expr.filters&&(E.expr.filters.animated=function(e){return E.grep(E.timers,function(t){return e===t.elem}).length}),E.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){E.offset.setOffset(this,e,t)});var n,r,i={top:0,left:0},o=this[0],u=o&&o.ownerDocument;if(!u)return;return n=u.documentElement,E.contains(n,o)?(typeof o.getBoundingClientRect!==s&&(i=o.getBoundingClientRect()),r=or(u),{top:i.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:i.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):i},E.offset={setOffset:function(e,t,n){var r=E.css(e,"position");r==="static"&&(e.style.position="relative");var i=E(e),s=i.offset(),o=E.css(e,"top"),u=E.css(e,"left"),a=(r==="absolute"||r==="fixed")&&E.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),E.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},E.fn.extend({position:function(){if(!this[0])return;var e,t,n={top:0,left:0},r=this[0];return E.css(r,"position")==="fixed"?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),E.nodeName(e[0],"html")||(n=e.offset()),n.top+=E.css(e[0],"borderTopWidth",!0),n.left+=E.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-E.css(r,"marginTop",!0),left:t.left-n.left-E.css(r,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||a;while(e&&!E.nodeName(e,"html")&&E.css(e,"position")==="static")e=e.offsetParent;return e||a})}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);E.fn[e]=function(i){return E.access(this,function(e,i,s){var o=or(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?E(o).scrollLeft():s,r?s:E(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),E.each({Height:"height",Width:"width"},function(e,n){E.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){E.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return E.access(this,function(n,r,i){var s;return E.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?E.css(n,r,u):E.style(n,r,i,u)},n,o?i:t,o,null)}})}),E.fn.size=function(){return this.length},E.fn.andSelf=E.fn.addBack,typeof module=="object"&&module&&typeof module.exports=="object"?module.exports=E:(e.jQuery=e.$=E,typeof n=="function"&&n.amd&&n("jquery",[],function(){return E}))}(window),function(){var e=this,n=e.Backbone,r=[],i=r.push,s=r.slice,o=r.splice,u;typeof exports!="undefined"?u=exports:u=e.Backbone={},u.VERSION="1.0.0";var a=e._;!a&&typeof t!="undefined"&&(a=t("underscore")),u.$=e.jQuery||e.Zepto||e.ender||e.$,u.noConflict=function(){return e.Backbone=n,this},u.emulateHTTP=!1,u.emulateJSON=!1;var f=u.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!c(this,"once",e,[t,n])||!t)return this;var r=this,i=a.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,u,f,l,h;if(!this._events||!c(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:a.keys(this._events);for(u=0,f=o.length;u<f;u++){e=o[u];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(l=0,h=s.length;l<h;l++)i=s[l],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=s.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&h(n,t),r&&h(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){var s=n.split(l);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},p={listenTo:"on",listenToOnce:"once"};a.each(p,function(e,t){f[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=a.uniqueId("l"));return i[s]=t,typeof n=="object"&&(r=this),t[e](n,r,this),this}}),f.bind=f.on,f.unbind=f.off,a.extend(u,f);var d=u.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=a.uniqueId("c"),this.attributes={},a.extend(this,a.pick(t,v)),t.parse&&(r=this.parse(r,t)||{});if(n=a.result(this,"defaults"))r=a.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},v=["url","urlRoot","collection"];a.extend(d.prototype,f,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return a.clone(this.attributes)},sync:function(){return u.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return a.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,u,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,u=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=a.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],a.isEqual(c[r],t)||o.push(r),a.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!u){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!u)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,a.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,a.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!a.isEmpty(this.changed):a.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?a.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(a.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return a.clone(this._previousAttributes)},fetch:function(e){e=e?a.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},F(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t;if(r&&(!n||!n.wait)&&!this.set(r,n))return!1;n=a.extend({validate:!0},n);if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=a.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var u=this,f=n.success;return n.success=function(e){u.attributes=o;var t=u.parse(e,n);n.wait&&(t=a.extend(r||{},t));if(a.isObject(t)&&!u.set(t,n))return!1;f&&f(u,e,n),u.trigger("sync",u,e,n)},F(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?a.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;F(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=a.result(this,"urlRoot")||a.result(this.collection,"url")||j();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},a.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=a.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,a.extend(t||{},{validationError:n})),!1):!0}});var m=["keys","values","pairs","invert","pick","omit"];a.each(m,function(e){d.prototype[e]=function(){var t=s.call(arguments);return t.unshift(this.attributes),a[e].apply(a,t)}});var g=u.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,a.extend({silent:!0},t))},y={add:!0,remove:!0,merge:!0},b={add:!0,merge:!1,remove:!1};a.extend(g.prototype,f,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return u.sync.apply(this,arguments)},add:function(e,t){return this.set(e,a.defaults(t||{},b))},remove:function(e,t){e=a.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},set:function(e,t){t=a.defaults(t||{},y),t.parse&&(e=this.parse(e,t)),a.isArray(e)||(e=e?[e]:[]);var n,r,s,u,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=a.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(n=0,r=e.length;n<r;n++){if(!(s=this._prepareModel(e[n],t)))continue;(f=this.get(s))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(s.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(s),s.on("all",this._onModelEvent,this),this._byId[s.cid]=s,s.id!=null&&(this._byId[s.id]=s))}if(t.remove){for(n=0,r=this.length;n<r;++n)m[(s=this.models[n]).cid]||v.push(s);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?o.apply(this.models,[c,0].concat(d)):i.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,r=d.length;n<r;n++)(s=d[n]).trigger("add",s,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,a.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,a.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,a.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return a.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),a.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(a.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=a.isFunction(t)?t:function(e){return e.get(t)};return a.sortedIndex(this.models,e,r,n)},pluck:function(e){return a.invoke(this.models,"get",e)},fetch:function(e){e=e?a.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},F(this,e),this.sync("read",this,e)},create:function(e,t){t=t?a.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var w=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];a.each(w,function(e){g.prototype[e]=function(){var t=s.call(arguments);return t.unshift(this.models),a[e].apply(a,t)}});var E=["groupBy","countBy","sortBy"];a.each(E,function(e){g.prototype[e]=function(t,n){var r=a.isFunction(t)?t:function(e){return e.get(t)};return a[e](this.models,r,n)}});var S=u.View=function(e){this.cid=a.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName","events"];a.extend(S.prototype,f,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof u.$?e:u.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=a.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];a.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(x),i=r[1],s=r[2];n=a.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=a.extend({},a.result(this,"options"),e)),a.extend(this,a.pick(e,T)),this.options=e},_ensureElement:function(){if(!this.el){var e=a.extend({},a.result(this,"attributes"));this.id&&(e.id=a.result(this,"id")),this.className&&(e["class"]=a.result(this,"className"));var t=u.$("<"+a.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(a.result(this,"el"),!1)}}),u.sync=function(e,t,n){var r=N[e];a.defaults(n||(n={}),{emulateHTTP:u.emulateHTTP,emulateJSON:u.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=a.result(t,"url")||j()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var o=n.xhr=u.ajax(a.extend(i,n));return t.trigger("request",t,o,n),o};var N={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};u.ajax=function(){return u.$.ajax.apply(u.$,arguments)};var C=u.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(C.prototype,f,{initialize:function(){},route:function(e,t,n){a.isRegExp(e)||(e=this._routeToRegExp(e)),a.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return u.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),u.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return u.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=a.result(this,"routes");var e,t=a.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(k,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/]+)"}).replace(A,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return a.map(n,function(e){return e?decodeURIComponent(e):null})}});var M=u.History=function(){this.handlers=[],a.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},_=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/msie [\w.]+/,H=/\/$/;M.started=!1,a.extend(M.prototype,f,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(H,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(_,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=a.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=P.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(D,"/"),r&&this._wantsHashChange&&(this.iframe=u.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?u.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?u.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(_,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){u.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=a.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!M.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),u.history=new M;var B=function(e,t){var n=this,r;e&&a.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},a.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&a.extend(r.prototype,e),r.__super__=n.prototype,r};d.extend=g.extend=C.extend=S.extend=M.extend=B;var j=function(){throw new Error('A "url" property or function must be specified')},F=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),n("backbone",["underscore","jquery"],function(e){return function(){var t,n;return t||e.Backbone}}(this)),Backbone.ChildViewContainer=function(e,t){var n=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(n.prototype,{add:function(e,t){var n=e.cid;this._views[n]=e,e.model&&(this._indexByModel[e.model.cid]=n),t&&(this._indexByCustom[t]=n),this._updateLength()},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var n=e.cid;e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){if(e===n)return delete this._indexByCustom[t],!0},this),delete this._views[n],this._updateLength()},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,n){t.each(this._views,function(r){t.isFunction(r[e])&&r[e].apply(r,n||[])})},_updateLength:function(){this.length=t.size(this._views)}});var r=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return t.each(r,function(e){n.prototype[e]=function(){var n=t.values(this._views),r=[n].concat(t.toArray(arguments));return t[e].apply(t,r)}}),n}(Backbone,_),Backbone.Wreqr=function(e,t,n){var r={};return r.Handlers=function(e,t){var n=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,n){var r=null;t.isObject(e)&&!t.isFunction(e)&&(r=e.context,e=e.callback),this.setHandler(n,e,r)},this)},setHandler:function(e,t,n){var r={callback:t,context:n};this._wreqrHandlers[e]=r,this.trigger("handler:add",e,t,n)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(!t)throw new Error("Handler not found for '"+e+"'");return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),n}(e,n),r.CommandStorage=function(){var t=function(e){this.options=e,this._commands={},n.isFunction(this.initialize)&&this.initialize(e)};return n.extend(t.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var n=this.getCommands(e);n.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),t}(),r.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var n=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,n)},execute:function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},_executeCommands:function(e,t,r){var i=this.storage.getCommands(e);n.each(i.instances,function(e){t.apply(r,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var t,r=e.storageType||this.storageType;n.isFunction(r)?t=new r:t=r,this.storage=t}})}(r),r.RequestResponse=function(e){return e.Handlers.extend({request:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return this.getHandler(e).apply(this,t)}})}(r),r.EventAggregator=function(e,t){var n=function(){};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events),n}(e,n),r}(Backbone,Backbone.Marionette,_);var r=function(e,t,n){function s(e){return i.call(e)}function o(e,t){var n=new Error(e);throw n.name=t||"Error",n}var r={};t.Marionette=r,r.$=t.$;var i=Array.prototype.slice;return r.extend=t.Model.extend,r.getOption=function(e,t){if(!e||!t)return;var n;return e.options&&t in e.options&&e.options[t]!==undefined?n=e.options[t]:n=e[t],n},r.triggerMethod=function(){function t(e,t,n){return n.toUpperCase()}var e=/(^|:)(\w)/gi,r=function(r){var i="on"+r.replace(e,t),s=this[i];n.isFunction(this.trigger)&&this.trigger.apply(this,arguments);if(n.isFunction(s))return s.apply(this,n.tail(arguments))};return r}(),r.MonitorDOMRefresh=function(){function e(e){e._isShown=!0,r(e)}function t(e){e._isRendered=!0,r(e)}function r(e){e._isShown&&e._isRendered&&n.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}return function(n){n.listenTo(n,"show",function(){e(n)}),n.listenTo(n,"render",function(){t(n)})}}(),function(e){function t(e,t,r,i){var s=i.split(/\s+/);n.each(s,function(n){var i=e[n];i||o("Method '"+n+"' was configured as an event handler, but does not exist."),e.listenTo(t,r,i,e)})}function r(e,t,n,r){e.listenTo(t,n,r,e)}function i(e,t,r,i){var s=i.split(/\s+/);n.each(s,function(n){var i=e[n];e.stopListening(t,r,i,e)})}function s(e,t,n,r){e.stopListening(t,n,r,e)}function u(e,t,r,i,s){if(!t||!r)return;n.isFunction(r)&&(r=r.call(e)),n.each(r,function(r,o){n.isFunction(r)?i(e,t,o,r):s(e,t,o,r)})}e.bindEntityEvents=function(e,n,i){u(e,n,i,r,t)},e.unbindEntityEvents=function(e,t,n){u(e,t,n,s,i)}}(r),r.Callbacks=function(){this._deferred=r.$.Deferred(),this._callbacks=[]},n.extend(r.Callbacks.prototype,{add:function(e,t){this._callbacks.push({cb:e,ctx:t}),this._deferred.done(function(n,r){t&&(n=t),e.call(n,r)})},run:function(e,t){this._deferred.resolve(t,e)},reset:function(){var e=this._callbacks;this._deferred=r.$.Deferred(),this._callbacks=[],n.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),r.Controller=function(e){this.triggerMethod=r.triggerMethod,this.options=e||{},n.isFunction(this.initialize)&&this.initialize(this.options)},r.Controller.extend=r.extend,n.extend(r.Controller.prototype,t.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),r.Region=function(e){this.options=e||{},this.el=r.getOption(this,"el");if(!this.el){var t=new Error("An 'el' must be specified for a region.");throw t.name="NoElError",t}if(this.initialize){var n=Array.prototype.slice.apply(arguments);this.initialize.apply(this,n)}},n.extend(r.Region,{buildRegion:function(e,t){var r=typeof e=="string",i=typeof e.selector=="string",s=typeof e.regionType=="undefined",o=typeof e=="function";if(!o&&!r&&!i)throw new Error("Region must be specified as a Region type, a selector string or an object with selector property");var u,a;r&&(u=e),e.selector&&(u=e.selector),o&&(a=e),!o&&s&&(a=t),e.regionType&&(a=e.regionType);var f=new a({el:u});return e.parentEl&&(f.getEl=function(t){var r=e.parentEl;return n.isFunction(r)&&(r=r()),r.find(t)}),f}}),n.extend(r.Region.prototype,t.Events,{show:function(e){this.ensureEl();var t=e.isClosed||n.isUndefined(e.$el),i=e!==this.currentView;i&&this.close(),e.render(),(i||t)&&this.open(e),this.currentView=e,r.triggerMethod.call(this,"show",e),r.triggerMethod.call(e,"show")},ensureEl:function(){if(!this.$el||this.$el.length===0)this.$el=this.getEl(this.el)},getEl:function(e){return r.$(e)},open:function(e){this.$el.empty().append(e.el)},close:function(){var e=this.currentView;if(!e||e.isClosed)return;e.close?e.close():e.remove&&e.remove(),r.triggerMethod.call(this,"close"),delete this.currentView},attachView:function(e){this.currentView=e},reset:function(){this.close(),delete this.$el}}),r.Region.extend=r.extend,r.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={},e.Controller.prototype.constructor.call(this,t)},addRegions:function(e,t){var r={};return n.each(e,function(e,i){typeof e=="string"&&(e={selector:e}),e.selector&&(e=n.defaults({},e,t));var s=this.addRegion(i,e);r[i]=s},this),r},addRegion:function(t,r){var i,s=n.isObject(r),o=n.isString(r),u=!!r.selector;return o||s&&u?i=e.Region.buildRegion(r,e.Region):n.isFunction(r)?i=e.Region.buildRegion(r,e.Region):i=r,this._store(t,i),this.triggerMethod("region:add",t,i),i},get:function(e){return this._regions[e]},removeRegion:function(e){var t=this._regions[e];this._remove(e,t)},removeRegions:function(){n.each(this._regions,function(e,t){this._remove(t,e)},this)},closeRegions:function(){n.each(this._regions,function(e,t){e.close()},this)},close:function(){this.removeRegions();var t=Array.prototype.slice.call(arguments);e.Controller.prototype.close.apply(this,t)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){t.close(),delete this._regions[e],this._setLength(),this.triggerMethod("region:remove",e,t)},_setLength:function(){this.length=n.size(this._regions)}}),r=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return n.each(r,function(e){t.prototype[e]=function(){var t=n.values(this._regions),r=[t].concat(n.toArray(arguments));return n[e].apply(n,r)}}),t}(r),r.TemplateCache=function(e){this.templateId=e},n.extend(r.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new r.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=s(arguments),n=t.length;if(n>0)for(e=0;e<n;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),n.extend(r.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},loadTemplate:function(e){var t=r.$(e).html();return(!t||t.length===0)&&o("Could not find template: '"+e+"'","NoTemplateError"),t},compileTemplate:function(e){return n.template(e)}}),r.Renderer={render:function(e,t){if(!e){var n=new Error("Cannot render the template since it's false, null or undefined.");throw n.name="TemplateNotFoundError",n}var i;return typeof e=="function"?i=e:i=r.TemplateCache.get(e),i(t)}},r.View=t.View.extend({constructor:function(){n.bindAll(this,"render");var e=Array.prototype.slice.apply(arguments);t.View.prototype.constructor.apply(this,e),r.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:r.triggerMethod,getTemplate:function(){return r.getOption(this,"template")},mixinTemplateHelpers:function(e){e=e||{};var t=r.getOption(this,"templateHelpers");return n.isFunction(t)&&(t=t.call(this)),n.extend(e,t)},configureTriggers:function(){if(!this.triggers)return;var e={},t=n.result(this,"triggers");return n.each(t,function(t,n){e[n]=function(e){e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation();var n={view:this,model:this.model,collection:this.collection};this.triggerMethod(t,n)}},this),e},delegateEvents:function(e){this._delegateDOMEvents(e),r.bindEntityEvents(this,this.model,r.getOption(this,"modelEvents")),r.bindEntityEvents(this,this.collection,r.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(e){e=e||this.events,n.isFunction(e)&&(e=e.call(this));var r={},i=this.configureTriggers();n.extend(r,e,i),t.View.prototype.delegateEvents.call(this,r)},undelegateEvents:function(){var e=Array.prototype.slice.call(arguments);t.View.prototype.undelegateEvents.apply(this,e),r.unbindEntityEvents(this,this.model,r.getOption(this,"modelEvents")),r.unbindEntityEvents(this,this.collection,r.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(this.isClosed)return;var e=this.triggerMethod("before:close");if(e===!1)return;this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove()},bindUIElements:function(){if(!this.ui)return;this._uiBindings||(this._uiBindings=this.ui);var e=n.result(this,"_uiBindings");this.ui={},n.each(n.keys(e),function(t){var n=e[t];this.ui[t]=this.$(n)},this)},unbindUIElements:function(){if(!this.ui||!this._uiBindings)return;n.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings}}),r.ItemView=r.View.extend({constructor:function(){r.View.prototype.constructor.apply(this,s(arguments))},serializeData:function(){var e={};return this.model?e=this.model.toJSON():this.collection&&(e={items:this.collection.toJSON()}),e},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate(),n=r.Renderer.render(t,e);return this.$el.html(n),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){if(this.isClosed)return;this.triggerMethod("item:before:close"),r.View.prototype.close.apply(this,s(arguments)),this.triggerMethod("item:closed")}}),r.CollectionView=r.View.extend({itemViewEventPrefix:"itemview",constructor:function(e){this._initChildViewStorage(),r.View.prototype.constructor.apply(this,s(arguments)),this._initialEvents()},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(e,t,n){this.closeEmptyView();var r=this.getItemView(e),i=this.collection.indexOf(e);this.addItemView(e,r,i)},onShowCalled:function(){this.children.each(function(e){r.triggerMethod.call(e,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.closeEmptyView(),this.closeChildren(),this.collection&&this.collection.length>0?this.showCollection():this.showEmptyView()},showCollection:function(){var e;this.collection.each(function(t,n){e=this.getItemView(t),this.addItemView(t,e,n)},this)},showEmptyView:function(){var e=r.getOption(this,"emptyView");if(e&&!this._showingEmptyView){this._showingEmptyView=!0;var n=new t.Model;this.addItemView(n,e,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getItemView:function(e){var t=r.getOption(this,"itemView");return t||o("An `itemView` must be specified","NoItemViewError"),t},addItemView:function(e,t,i){var s=r.getOption(this,"itemViewOptions");n.isFunction(s)&&(s=s.call(this,e,i));var o=this.buildItemView(e,t,s);this.addChildViewEventForwarding(o),this.triggerMethod("before:item:added",o),this.children.add(o),this.renderItemView(o,i),this._isShown&&r.triggerMethod.call(o,"show"),this.triggerMethod("after:item:added",o)},addChildViewEventForwarding:function(e){var t=r.getOption(this,"itemViewEventPrefix");this.listenTo(e,"all",function(){var n=s(arguments);n[0]=t+":"+n[0],n.splice(1,0,e),r.triggerMethod.apply(this,n)},this)},renderItemView:function(e,t){e.render(),this.appendHtml(this,e,t)},buildItemView:function(e,t,r){var i=n.extend({model:e},r);return new t(i)},removeItemView:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},removeChildView:function(e){e&&(this.stopListening(e),e.close?e.close():e.remove&&e.remove(),this.children.remove(e)),this.triggerMethod("item:removed",e)},checkEmpty:function(){(!this.collection||this.collection.length===0)&&this.showEmptyView()},appendHtml:function(e,t,n){e.$el.append(t.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},close:function(){if(this.isClosed)return;this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),r.View.prototype.close.apply(this,s(arguments))},closeChildren:function(){this.children.each(function(e){this.removeChildView(e)},this),this.checkEmpty()}}),r.CompositeView=r.CollectionView.extend({constructor:function(){r.CollectionView.prototype.constructor.apply(this,s(arguments))},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))},getItemView:function(e){var t=r.getOption(this,"itemView")||this.constructor;return t||o("An `itemView` must be specified","NoItemViewError"),t},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON()),e},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var e=this.renderModel();return this.$el.html(e),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(r.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e);var t=this.getTemplate();return r.Renderer.render(t,e)},appendHtml:function(e,t,n){var r=this.getItemViewContainer(e);r.append(t.el)},getItemViewContainer:function(e){if("$itemViewContainer"in e)return e.$itemViewContainer;var t,i=r.getOption(e,"itemViewContainer");if(i){var s=n.isFunction(i)?i():i;t=e.$(s),t.length<=0&&o("The specified `itemViewContainer` was not found: "+e.itemViewContainer,"ItemViewContainerMissingError")}else t=e.$el;return e.$itemViewContainer=t,t},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),r.Layout=r.ItemView.extend({regionType:r.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),r.ItemView.prototype.constructor.call(this,e)},render:function(){this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();var e=Array.prototype.slice.apply(arguments),t=r.ItemView.prototype.render.apply(this,e);return t},close:function(){if(this.isClosed)return;this.regionManager.close();var e=Array.prototype.slice.apply(arguments);r.ItemView.prototype.close.apply(this,e)},addRegion:function(e,t){var n={};return n[e]=t,this._buildRegions(n)[e]},addRegions:function(e){return this.regions=n.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},_buildRegions:function(e){var t=this,n={regionType:r.getOption(this,"regionType"),parentEl:function(){return t.$el}};return this.regionManager.addRegions(e,n)},_initializeRegions:function(e){var t;this._initRegionManager(),n.isFunction(this.regions)?t=this.regions(e):t=this.regions||{},this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(e){e.reset()})},_initRegionManager:function(){this.regionManager=new r.RegionManager,this.listenTo(this.regionManager,"region:add",function(e,t){this[e]=t,this.trigger("region:add",e,t)}),this.listenTo(this.regionManager,"region:remove",function(e,t){delete this[e],this.trigger("region:remove",e,t)})}}),r.AppRouter=t.Router.extend({constructor:function(e){t.Router.prototype.constructor.apply(this,s(arguments)),this.options=e||{};var n=r.getOption(this,"appRoutes"),i=this._getController();this.processAppRoutes(i,n)},appRoute:function(e,t){var n=this._getController();this._addAppRoute(n,e,t)},processAppRoutes:function(e,t){if(!t)return;var r=n.keys(t).reverse();n.each(r,function(n){this._addAppRoute(e,n,t[n])},this)},_getController:function(){return r.getOption(this,"controller")},_addAppRoute:function(e,t,r){var i=e[r];if(!i)throw new Error("Method '"+r+"' was not found on the controller");this.route(t,r,n.bind(i,e))}}),r.Application=function(e){this._initRegionManager(),this._initCallbacks=new r.Callbacks,this.vent=new t.Wreqr.EventAggregator,this.commands=new t.Wreqr.Commands,this.reqres=new t.Wreqr.RequestResponse,this.submodules={},n.extend(this,e),this.triggerMethod=r.triggerMethod},n.extend(r.Application.prototype,t.Events,{execute:function(){var e=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,e)},request:function(){var e=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,e)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("initialize:before",e),this._initCallbacks.run(e,this),this.triggerMethod("initialize:after",e),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(e){this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},module:function(e,t){var n=s(arguments);return n.unshift(this),r.Module.create.apply(r.Module,n)},_initRegionManager:function(){this._regionManager=new r.RegionManager,this.listenTo(this._regionManager,"region:add",function(e,t){this[e]=t}),this.listenTo(this._regionManager,"region:remove",function(e,t){delete this[e]})}}),r.Application.extend=r.extend,r.Module=function(e,t){this.moduleName=e,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,this.startWithParent=!0,this.triggerMethod=r.triggerMethod},n.extend(r.Module.prototype,t.Events,{addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){if(this._isInitialized)return;n.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e)},stop:function(){if(!this._isInitialized)return;this._isInitialized=!1,r.triggerMethod.call(this,"before:stop"),n.each(this.submodules,function(e){e.stop()}),this._finalizerCallbacks.run(undefined,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),r.triggerMethod.call(this,"stop")},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,i){if(!e)return;var s=n.flatten([this,this.app,t,r,r.$,n,i]);e.apply(this,s)},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new r.Callbacks,this._finalizerCallbacks=new r.Callbacks}}),n.extend(r.Module,{create:function(e,t,r){var i=e,o=s(arguments);o.splice(0,3),t=t.split(".");var u=t.length,a=[];return a[u-1]=r,n.each(t,function(t,n){var r=i;i=this._getModule(r,t,e),this._addModuleDefinition(r,i,a[n],o)},this),i},_getModule:function(e,t,n,i,s){var o=e[t];return o||(o=new r.Module(t,n),e[t]=o,e.submodules[t]=o),o},_addModuleDefinition:function(e,t,r,i){var s,o;n.isFunction(r)?(s=r,o=!0):n.isObject(r)?(s=r.define,o=r.startWithParent):o=!0,s&&t.addDefinition(s,i),t.startWithParent=t.startWithParent&&o,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),r}(this,Backbone,_);n("marionette",["backbone"],function(e){return function(){var t,n;return t||e.Backbone.Marionette}}(this)),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof n&&n.amd)n("react",[],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.React=e()}}(function(){var e,n,r;return function i(e,n,r){function s(u,a){if(!n[u]){if(!e[u]){var f=typeof t=="function"&&t;if(!a&&f)return f(u,!0);if(o)return o(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[u]={exports:{}};e[u][0].call(c.exports,function(t){var n=e[u][1][t];return s(n?n:t)},c,c.exports,i,e,n,r)}return n[u].exports}var o=typeof t=="function"&&t;for(var u=0;u<r.length;u++)s(r[u]);return s}({1:[function(e,t,n){var r=e("./LinkedStateMixin"),i=e("./React"),s=e("./ReactComponentWithPureRenderMixin"),o=e("./ReactCSSTransitionGroup"),u=e("./ReactTransitionGroup"),a=e("./ReactUpdates"),f=e("./cx"),l=e("./cloneWithProps"),c=e("./update");i.addons={CSSTransitionGroup:o,LinkedStateMixin:r,PureRenderMixin:s,TransitionGroup:u,batchedUpdates:a.batchedUpdates,classSet:f,cloneWithProps:l,update:c},i.addons.Perf=e("./ReactDefaultPerf"),i.addons.TestUtils=e("./ReactTestUtils"),t.exports=i},{"./LinkedStateMixin":25,"./React":31,"./ReactCSSTransitionGroup":34,"./ReactComponentWithPureRenderMixin":39,"./ReactDefaultPerf":56,"./ReactTestUtils":86,"./ReactTransitionGroup":90,"./ReactUpdates":91,"./cloneWithProps":113,"./cx":118,"./update":159}],2:[function(e,t,n){var r=e("./focusNode"),i={componentDidMount:function(){this.props.autoFocus&&r(this.getDOMNode())}};t.exports=i},{"./focusNode":125}],3:[function(e,t,n){function f(){var e=window.opera;return typeof e=="object"&&typeof e.version=="function"&&parseInt(e.version(),10)<=12}function m(e){return(e.ctrlKey||e.altKey||e.metaKey)&&(!e.ctrlKey||!e.altKey)}var r=e("./EventConstants"),i=e("./EventPropagators"),s=e("./ExecutionEnvironment"),o=e("./SyntheticInputEvent"),u=e("./keyOf"),a=s.canUseDOM&&"TextEvent"in window&&!("documentMode"in document||f()),l=32,c=String.fromCharCode(l),h=r.topLevelTypes,p={beforeInput:{phasedRegistrationNames:{bubbled:u({onBeforeInput:null}),captured:u({onBeforeInputCapture:null})},dependencies:[h.topCompositionEnd,h.topKeyPress,h.topTextInput,h.topPaste]}},d=null,v=!1,g={eventTypes:p,extractEvents:function(e,t,n,r){var s;if(a)switch(e){case h.topKeyPress:var u=r.which;if(u!==l)return;v=!0,s=c;break;case h.topTextInput:s=r.data;if(s===c&&v)return;break;default:return}else{switch(e){case h.topPaste:d=null;break;case h.topKeyPress:r.which&&!m(r)&&(d=String.fromCharCode(r.which));break;case h.topCompositionEnd:d=r.data}if(d===null)return;s=d}if(!s)return;var f=o.getPooled(p.beforeInput,n,r);return f.data=s,d=null,i.accumulateTwoPhaseDispatches(f),f}};t.exports=g},{"./EventConstants":17,"./EventPropagators":22,"./ExecutionEnvironment":23,"./SyntheticInputEvent":101,"./keyOf":147}],4:[function(e,t,n){var r=e("./invariant"),i={addClass:function(e,t){return r(!/\s/.test(t),'CSSCore.addClass takes only a single class name. "%s" contains multiple classes.',t),t&&(e.classList?e.classList.add(t):i.hasClass(e,t)||(e.className=e.className+" "+t)),e},removeClass:function(e,t){return r(!/\s/.test(t),'CSSCore.removeClass takes only a single class name. "%s" contains multiple classes.',t),t&&(e.classList?e.classList.remove(t):i.hasClass(e,t)&&(e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,""))),e},conditionClass:function(e,t,n){return(n?i.addClass:i.removeClass)(e,t)},hasClass:function(e,t){return r(!/\s/.test(t),"CSS.hasClass takes only a single class name."),e.classList?!!t&&e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}};t.exports=i},{"./invariant":140}],5:[function(e,t,n){function i(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var r={columnCount:!0,flex:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,strokeOpacity:!0},s=["Webkit","ms","Moz","O"];Object.keys(r).forEach(function(e){s.forEach(function(t){r[i(t,e)]=r[e]})});var o={background:{backgroundImage:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundColor:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0}},u={isUnitlessNumber:r,shorthandPropertyExpansions:o};t.exports=u},{}],6:[function(e,t,n){var r=e("./CSSProperty"),i=e("./ExecutionEnvironment"),s=e("./camelizeStyleName"),o=e("./dangerousStyleValue"),u=e("./hyphenateStyleName"),a=e("./memoizeStringOnly"),f=e("./warning"),l=a(function(e){return u(e)}),c="cssFloat";i.canUseDOM&&document.documentElement.style.cssFloat===undefined&&(c="styleFloat");var h={},p=function(e){if(h.hasOwnProperty(e)&&h[e])return;h[e]=!0,f(!1,"Unsupported style property "+e+". Did you mean "+s(e)+"?")},d={createMarkupForStyles:function(e){var t="";for(var n in e){if(!e.hasOwnProperty(n))continue;n.indexOf("-")>-1&&p(n);var r=e[n];r!=null&&(t+=l(n)+":",t+=o(n,r)+";")}return t||null},setValueForStyles:function(e,t){var n=e.style;for(var i in t){if(!t.hasOwnProperty(i))continue;i.indexOf("-")>-1&&p(i);var s=o(i,t[i]);i==="float"&&(i=c);if(s)n[i]=s;else{var u=r.shorthandPropertyExpansions[i];if(u)for(var a in u)n[a]="";else n[i]=""}}}};t.exports=d},{"./CSSProperty":5,"./ExecutionEnvironment":23,"./camelizeStyleName":112,"./dangerousStyleValue":119,"./hyphenateStyleName":138,"./memoizeStringOnly":149,"./warning":160}],7:[function(e,t,n){function o(){this._callbacks=null,this._contexts=null}var r=e("./PooledClass"),i=e("./Object.assign"),s=e("./invariant");i(o.prototype,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,t=this._contexts;if(e){s(e.length===t.length,"Mismatched list of contexts in callback queue"),this._callbacks=null,this._contexts=null;for(var n=0,r=e.length;n<r;n++)e[n].call(t[n]);e.length=0,t.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),r.addPoolingTo(o),t.exports=o},{"./Object.assign":29,"./PooledClass":30,"./invariant":140}],8:[function(e,t,n){function y(e){return e.nodeName==="SELECT"||e.nodeName==="INPUT"&&e.type==="file"}function w(e){var t=a.getPooled(p.change,v,e);s.accumulateTwoPhaseDispatches(t),u.batchedUpdates(E,t)}function E(e){i.enqueueEvents(e),i.processEventQueue()}function S(e,t){d=e,v=t,d.attachEvent("onchange",w)}function x(){if(!d)return;d.detachEvent("onchange",w),d=null,v=null}function T(e,t,n){if(e===h.topChange)return n}function N(e,t,n){e===h.topFocus?(x(),S(t,n)):e===h.topBlur&&x()}function L(e,t){d=e,v=t,m=e.value,g=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(d,"value",k),d.attachEvent("onpropertychange",O)}function A(){if(!d)return;delete d.value,d.detachEvent("onpropertychange",O),d=null,v=null,m=null,g=null}function O(e){if(e.propertyName!=="value")return;var t=e.srcElement.value;if(t===m)return;m=t,w(e)}function M(e,t,n){if(e===h.topInput)return n}function _(e,t,n){e===h.topFocus?(A(),L(t,n)):e===h.topBlur&&A()}function D(e,t,n){if(e===h.topSelectionChange||e===h.topKeyUp||e===h.topKeyDown)if(d&&d.value!==m)return m=d.value,v}function P(e){return e.nodeName==="INPUT"&&(e.type==="checkbox"||e.type==="radio")}function H(e,t,n){if(e===h.topClick)return n}var r=e("./EventConstants"),i=e("./EventPluginHub"),s=e("./EventPropagators"),o=e("./ExecutionEnvironment"),u=e("./ReactUpdates"),a=e("./SyntheticEvent"),f=e("./isEventSupported"),l=e("./isTextInputElement"),c=e("./keyOf"),h=r.topLevelTypes,p={change:{phasedRegistrationNames:{bubbled:c({onChange:null}),captured:c({onChangeCapture:null})},dependencies:[h.topBlur,h.topChange,h.topClick,h.topFocus,h.topInput,h.topKeyDown,h.topKeyUp,h.topSelectionChange]}},d=null,v=null,m=null,g=null,b=!1;o.canUseDOM&&(b=f("change")&&(!("documentMode"in document)||document.documentMode>8));var C=!1;o.canUseDOM&&(C=f("input")&&(!("documentMode"in document)||document.documentMode>9));var k={get:function(){return g.get.call(this)},set:function(e){m=""+e,g.set.call(this,e)}},B={eventTypes:p,extractEvents:function(e,t,n,r){var i,o;y(t)?b?i=T:o=N:l(t)?C?i=M:(i=D,o=_):P(t)&&(i=H);if(i){var u=i(e,t,n);if(u){var f=a.getPooled(p.change,u,r);return s.accumulateTwoPhaseDispatches(f),f}}o&&o(e,t,n)}};t.exports=B},{"./EventConstants":17,"./EventPluginHub":19,"./EventPropagators":22,"./ExecutionEnvironment":23,"./ReactUpdates":91,"./SyntheticEvent":99,"./isEventSupported":141,"./isTextInputElement":143,"./keyOf":147}],9:[function(e,t,n){var r=0,i={createReactRootIndex:function(){return r++}};t.exports=i},{}],10:[function(e,t,n){function g(e){switch(e){case d.topCompositionStart:return m.compositionStart;case d.topCompositionEnd:return m.compositionEnd;case d.topCompositionUpdate:return m.compositionUpdate}}function y(e,t){return e===d.topKeyDown&&t.keyCode===c}function b(e,t){switch(e){case d.topKeyUp:return l.indexOf(t.keyCode)!==-1;case d.topKeyDown:return t.keyCode!==c;case d.topKeyPress:case d.topMouseDown:case d.topBlur:return!0;default:return!1}}function w(e){this.root=e,this.startSelection=o.getSelection(e),this.startValue=this.getText()}var r=e("./EventConstants"),i=e("./EventPropagators"),s=e("./ExecutionEnvironment"),o=e("./ReactInputSelection"),u=e("./SyntheticCompositionEvent"),a=e("./getTextContentAccessor"),f=e("./keyOf"),l=[9,13,27,32],c=229,h=s.canUseDOM&&"CompositionEvent"in window,p=!h||"documentMode"in document&&document.documentMode>8&&document.documentMode<=11,d=r.topLevelTypes,v=null,m={compositionEnd:{phasedRegistrationNames:{bubbled:f({onCompositionEnd:null}),captured:f({onCompositionEndCapture:null})},dependencies:[d.topBlur,d.topCompositionEnd,d.topKeyDown,d.topKeyPress,d.topKeyUp,d.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:f({onCompositionStart:null}),captured:f({onCompositionStartCapture:null})},dependencies:[d.topBlur,d.topCompositionStart,d.topKeyDown,d.topKeyPress,d.topKeyUp,d.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:f({onCompositionUpdate:null}),captured:f({onCompositionUpdateCapture:null})},dependencies:[d.topBlur,d.topCompositionUpdate,d.topKeyDown,d.topKeyPress,d.topKeyUp,d.topMouseDown]}};w.prototype.getText=function(){return this.root.value||this.root[a()]},w.prototype.getData=function(){var e=this.getText(),t=this.startSelection.start,n=this.startValue.length-this.startSelection.end;return e.substr(t,e.length-n-t)};var E={eventTypes:m,extractEvents:function(e,t,n,r){var s,o;h?s=g(e):v?b(e,r)&&(s=m.compositionEnd):y(e,r)&&(s=m.compositionStart),p&&(!v&&s===m.compositionStart?v=new w(t):s===m.compositionEnd&&v&&(o=v.getData(),v=null));if(s){var a=u.getPooled(s,n,r);return o&&(a.data=o),i.accumulateTwoPhaseDispatches(a),a}}};t.exports=E},{"./EventConstants":17,"./EventPropagators":22,"./ExecutionEnvironment":23,"./ReactInputSelection":65,"./SyntheticCompositionEvent":97,"./getTextContentAccessor":135,"./keyOf":147}],11:[function(e,t,n){function a(e,t,n){e.insertBefore(t,e.childNodes[n]||null)}var r=e("./Danger"),i=e("./ReactMultiChildUpdateTypes"),s=e("./getTextContentAccessor"),o=e("./invariant"),u=s(),f;u==="textContent"?f=function(e,t){e.textContent=t}:f=function(e,t){while(e.firstChild)e.removeChild(e.firstChild);if(t){var n=e.ownerDocument||document;e.appendChild(n.createTextNode(t))}};var l={dangerouslyReplaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup,updateTextContent:f,processUpdates:function(e,t){var n,s=null,u=null;for(var l=0;n=e[l];l++)if(n.type===i.MOVE_EXISTING||n.type===i.REMOVE_NODE){var c=n.fromIndex,h=n.parentNode.childNodes[c],p=n.parentID;o(h,"processUpdates(): Unable to find child %s of element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting tags like <form>, <p>, or <a>, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",c,p),s=s||{},s[p]=s[p]||[],s[p][c]=h,u=u||[],u.push(h)}var d=r.dangerouslyRenderMarkup(t);if(u)for(var v=0;v<u.length;v++)u[v].parentNode.removeChild(u[v]);for(var m=0;n=e[m];m++)switch(n.type){case i.INSERT_MARKUP:a(n.parentNode,d[n.markupIndex],n.toIndex);break;case i.MOVE_EXISTING:a(n.parentNode,s[n.parentID][n.fromIndex],n.toIndex);break;case i.TEXT_CONTENT:f(n.parentNode,n.textContent);break;case i.REMOVE_NODE:}}};t.exports=l},{"./Danger":14,"./ReactMultiChildUpdateTypes":72,"./getTextContentAccessor":135,"./invariant":140}],12:[function(e,t,n){function i(e,t){return(e&t)===t}var r=e("./invariant"),s={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=e.Properties||{},n=e.DOMAttributeNames||{},o=e.DOMPropertyNames||{},a=e.DOMMutationMethods||{};e.isCustomAttribute&&u._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var f in t){r(!u.isStandardName.hasOwnProperty(f),"injectDOMPropertyConfig(...): You're trying to inject DOM property '%s' which has already been injected. You may be accidentally injecting the same DOM property config twice, or you may be injecting two configs that have conflicting property names.",f),u.isStandardName[f]=!0;var l=f.toLowerCase();u.getPossibleStandardName[l]=f;if(n.hasOwnProperty(f)){var c=n[f];u.getPossibleStandardName[c]=f,u.getAttributeName[f]=c}else u.getAttributeName[f]=l;u.getPropertyName[f]=o.hasOwnProperty(f)?o[f]:f,a.hasOwnProperty(f)?u.getMutationMethod[f]=a[f]:u.getMutationMethod[f]=null;var h=t[f];u.mustUseAttribute[f]=i(h,s.MUST_USE_ATTRIBUTE),u.mustUseProperty[f]=i(h,s.MUST_USE_PROPERTY),u.hasSideEffects[f]=i(h,s.HAS_SIDE_EFFECTS),u.hasBooleanValue[f]=i(h,s.HAS_BOOLEAN_VALUE),u.hasNumericValue[f]=i(h,s.HAS_NUMERIC_VALUE),u.hasPositiveNumericValue[f]=i(h,s.HAS_POSITIVE_NUMERIC_VALUE),u.hasOverloadedBooleanValue[f]=i(h,s.HAS_OVERLOADED_BOOLEAN_VALUE),r(!u.mustUseAttribute[f]||!u.mustUseProperty[f],"DOMProperty: Cannot require using both attribute and property: %s",f),r(u.mustUseProperty[f]||!u.hasSideEffects[f],"DOMProperty: Properties that have side effects must use property: %s",f),r(!!u.hasBooleanValue[f]+!!u.hasNumericValue[f]+!!u.hasOverloadedBooleanValue[f]<=1,"DOMProperty: Value can be one of boolean, overloaded boolean, or numeric value, but not a combination: %s",f)}}},o={},u={ID_ATTRIBUTE_NAME:"data-reactid",isStandardName:{},getPossibleStandardName:{},getAttributeName:{},getPropertyName:{},getMutationMethod:{},mustUseAttribute:{},mustUseProperty:{},hasSideEffects:{},hasBooleanValue:{},hasNumericValue:{},hasPositiveNumericValue:{},hasOverloadedBooleanValue:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<u._isCustomAttributeFunctions.length;t++){var n=u._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},getDefaultValueForProperty:function(e,t){var n=o[e],r;return n||(o[e]=n={}),t in n||(r=document.createElement(e),n[t]=r[t]),n[t]},injection:s};t.exports=u},{"./invariant":140}],13:[function(e,t,n){function u(e,t){return t==null||r.hasBooleanValue[e]&&!t||r.hasNumericValue[e]&&isNaN(t)||r.hasPositiveNumericValue[e]&&t<1||r.hasOverloadedBooleanValue[e]&&t===!1}var r=e("./DOMProperty"),i=e("./escapeTextForBrowser"),s=e("./memoizeStringOnly"),o=e("./warning"),a=s(function(e){return i(e)+'="'}),f={children:!0,dangerouslySetInnerHTML:!0,key:!0,ref:!0},l={},c=function(e){if(f.hasOwnProperty(e)&&f[e]||l.hasOwnProperty(e)&&l[e])return;l[e]=!0;var t=e.toLowerCase(),n=r.isCustomAttribute(t)?t:r.getPossibleStandardName.hasOwnProperty(t)?r.getPossibleStandardName[t]:null;o(n==null,"Unknown DOM property "+e+". Did you mean "+n+"?")},h={createMarkupForID:function(e){return a(r.ID_ATTRIBUTE_NAME)+i(e)+'"'},createMarkupForProperty:function(e,t){if(r.isStandardName.hasOwnProperty(e)&&r.isStandardName[e]){if(u(e,t))return"";var n=r.getAttributeName[e];return r.hasBooleanValue[e]||r.hasOverloadedBooleanValue[e]&&t===!0?i(n):a(n)+i(t)+'"'}return r.isCustomAttribute(e)?t==null?"":a(e)+i(t)+'"':(c(e),null)},setValueForProperty:function(e,t,n){if(r.isStandardName.hasOwnProperty(t)&&r.isStandardName[t]){var i=r.getMutationMethod[t];if(i)i(e,n);else if(u(t,n))this.deleteValueForProperty(e,t);else if(r.mustUseAttribute[t])e.setAttribute(r.getAttributeName[t],""+n);else{var s=r.getPropertyName[t];if(!r.hasSideEffects[t]||""+e[s]!=""+n)e[s]=n}}else r.isCustomAttribute(t)?n==null?e.removeAttribute(t):e.setAttribute(t,""+n):c(t)},deleteValueForProperty:function(e,t){if(r.isStandardName.hasOwnProperty(t)&&r.isStandardName[t]){var n=r.getMutationMethod[t];if(n)n(e,undefined);else if(r.mustUseAttribute[t])e.removeAttribute(r.getAttributeName[t]);else{var i=r.getPropertyName[t],s=r.getDefaultValueForProperty(e.nodeName,i);if(!r.hasSideEffects[t]||""+e[i]!==s)e[i]=s}}else r.isCustomAttribute(t)?e.removeAttribute(t):c(t)}};t.exports=h},{"./DOMProperty":12,"./escapeTextForBrowser":123,"./memoizeStringOnly":149,"./warning":160}],14:[function(e,t,n){function l(e){return e.substring(1,e.indexOf(" "))}var r=e("./ExecutionEnvironment"),i=e("./createNodesFromMarkup"),s=e("./emptyFunction"),o=e("./getMarkupWrap"),u=e("./invariant"),a=/^(<[^ \/>]+)/,f="data-danger-index",c={dangerouslyRenderMarkup:function(e){u(r.canUseDOM,"dangerouslyRenderMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use React.renderToString for server rendering.");var t,n={};for(var c=0;c<e.length;c++)u(e[c],"dangerouslyRenderMarkup(...): Missing markup."),t=l(e[c]),t=o(t)?t:"*",n[t]=n[t]||[],n[t][c]=e[c];var h=[],p=0;for(t in n){if(!n.hasOwnProperty(t))continue;var d=n[t];for(var v in d)if(d.hasOwnProperty(v)){var m=d[v];d[v]=m.replace(a,"$1 "+f+'="'+v+'" ')}var g=i(d.join(""),s);for(c=0;c<g.length;++c){var y=g[c];y.hasAttribute&&y.hasAttribute(f)?(v=+y.getAttribute(f),y.removeAttribute(f),u(!h.hasOwnProperty(v),"Danger: Assigning to an already-occupied result index."),h[v]=y,p+=1):console.error("Danger: Discarding unexpected node:",y)}}return u(p===h.length,"Danger: Did not assign to every index of resultList."),u(h.length===e.length,"Danger: Expected markup to render %s nodes, but rendered %s.",e.length,h.length),h},dangerouslyReplaceNodeWithMarkup:function(e,t){u(r.canUseDOM,"dangerouslyReplaceNodeWithMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use React.renderToString for server rendering."),u(t,"dangerouslyReplaceNodeWithMarkup(...): Missing markup."),u(e.tagName.toLowerCase()!=="html","dangerouslyReplaceNodeWithMarkup(...): Cannot replace markup of the <html> node. This is because browser quirks make this unreliable and/or slow. If you want to render to the root you must use server rendering. See renderComponentToString().");var n=i(t,s)[0];e.parentNode.replaceChild(n,e)}};t.exports=c},{"./ExecutionEnvironment":23,"./createNodesFromMarkup":117,"./emptyFunction":121,"./getMarkupWrap":132,"./invariant":140}],15:[function(e,t,n){var r=e("./keyOf"),i=[r({ResponderEventPlugin:null}),r({SimpleEventPlugin:null}),r({TapEventPlugin:null}),r({EnterLeaveEventPlugin:null}),r({ChangeEventPlugin:null}),r({SelectEventPlugin:null}),r({CompositionEventPlugin:null}),r({BeforeInputEventPlugin:null}),r({AnalyticsEventPlugin:null}),r({MobileSafariClickEventPlugin:null})];t.exports=i},{"./keyOf":147}],16:[function(e,t,n){var r=e("./EventConstants"),i=e("./EventPropagators"),s=e("./SyntheticMouseEvent"),o=e("./ReactMount"),u=e("./keyOf"),a=r.topLevelTypes,f=o.getFirstReactDOM,l={mouseEnter:{registrationName:u({onMouseEnter:null}),dependencies:[a.topMouseOut,a.topMouseOver]},mouseLeave:{registrationName:u({onMouseLeave:null}),dependencies:[a.topMouseOut,a.topMouseOver]}},c=[null,null],h={eventTypes:l,extractEvents:function(e,t,n,r){if(e===a.topMouseOver&&(r.relatedTarget||r.fromElement))return null;if(e!==a.topMouseOut&&e!==a.topMouseOver)return null;var u;if(t.window===t)u=t;else{var h=t.ownerDocument;h?u=h.defaultView||h.parentWindow:u=window}var p,d;e===a.topMouseOut?(p=t,d=f(r.relatedTarget||r.toElement)||u):(p=u,d=t);if(p===d)return null;var v=p?o.getID(p):"",m=d?o.getID(d):"",g=s.getPooled(l.mouseLeave,v,r);g.type="mouseleave",g.target=p,g.relatedTarget=d;var y=s.getPooled(l.mouseEnter,m,r);return y.type="mouseenter",y.target=d,y.relatedTarget=p,i.accumulateEnterLeaveDispatches(g,y,v,m),c[0]=g,c[1]=y,c}};t.exports=h},{"./EventConstants":17,"./EventPropagators":22,"./ReactMount":70,"./SyntheticMouseEvent":103,"./keyOf":147}],17:[function(e,t,n){var r=e("./keyMirror"),i=r({bubbled:null,captured:null}),s=r({topBlur:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topReset:null,topScroll:null,topSelectionChange:null,topSubmit:null,topTextInput:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topWheel:null}),o={topLevelTypes:s,PropagationPhases:i};t.exports=o},{"./keyMirror":146}],18:[function(e,t,n){var r=e("./emptyFunction"),i={listen:function(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}};if(e.attachEvent)return e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):(console.error("Attempted to listen to events during the capture phase on a browser that does not support the capture phase. Your application will not receive some events."),{remove:r})},registerDefault:function(){}};t.exports=i},{"./emptyFunction":121}],19:[function(e,t,n){function h(){var e=!c||!c.traverseTwoPhase||!c.traverseEnterLeave;if(e)throw new Error("InstanceHandle not injected before use!")}var r=e("./EventPluginRegistry"),i=e("./EventPluginUtils"),s=e("./accumulateInto"),o=e("./forEachAccumulated"),u=e("./invariant"),a={},f=null,l=function(e){if(e){var t=i.executeDispatch,n=r.getPluginModuleForEvent(e);n&&n.executeDispatch&&(t=n.executeDispatch),i.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e)}},c=null,p={injection:{injectMount:i.injection.injectMount,injectInstanceHandle:function(e){c=e,h()},getInstanceHandle:function(){return h(),c},injectEventPluginOrder:r.injectEventPluginOrder,injectEventPluginsByName:r.injectEventPluginsByName},eventNameDispatchConfigs:r.eventNameDispatchConfigs,registrationNameModules:r.registrationNameModules,putListener:function(e,t,n){u(!n||typeof n=="function","Expected %s listener to be a function, instead got type %s",t,typeof n);var r=a[t]||(a[t]={});r[e]=n},getListener:function(e,t){var n=a[t];return n&&n[e]},deleteListener:function(e,t){var n=a[t];n&&delete n[e]},deleteAllListeners:function(e){for(var t in a)delete a[t][e]},extractEvents:function(e,t,n,i){var o,u=r.plugins;for(var a=0,f=u.length;a<f;a++){var l=u[a];if(l){var c=l.extractEvents(e,t,n,i);c&&(o=s(o,c))}}return o},enqueueEvents:function(e){e&&(f=s(f,e))},processEventQueue:function(){var e=f;f=null,o(e,l),u(!f,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented.")},__purge:function(){a={}},__getListenerBank:function(){return a}};t.exports=p},{"./EventPluginRegistry":20,"./EventPluginUtils":21,"./accumulateInto":109,"./forEachAccumulated":126,"./invariant":140}],20:[function(e,t,n){function o(){if(!i)return;for(var e in s){var t=s[e],n=i.indexOf(e);r(n>-1,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",e);if(f.plugins[n])continue;r(t.extractEvents,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",e),f.plugins[n]=t;var o=t.eventTypes;for(var a in o)r(u(o[a],t,a),"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",a,e)}}function u(e,t,n){r(!f.eventNameDispatchConfigs.hasOwnProperty(n),"EventPluginHub: More than one plugin attempted to publish the same event name, `%s`.",n),f.eventNameDispatchConfigs[n]=e;var i=e.phasedRegistrationNames;if(i){for(var s in i)if(i.hasOwnProperty(s)){var o=i[s];a(o,t,n)}return!0}return e.registrationName?(a(e.registrationName,t,n),!0):!1}function a(e,t,n){r(!f.registrationNameModules[e],"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",e),f.registrationNameModules[e]=t,f.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var r=e("./invariant"),i=null,s={},f={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){r(!i,"EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React."),i=Array.prototype.slice.call(e),o()},injectEventPluginsByName:function(e){var t=!1;for(var n in e){if(!e.hasOwnProperty(n))continue;var i=e[n];if(!s.hasOwnProperty(n)||s[n]!==i)r(!s[n],"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",n),s[n]=i,t=!0}t&&o()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return f.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames){if(!t.phasedRegistrationNames.hasOwnProperty(n))continue;var r=f.registrationNameModules[t.phasedRegistrationNames[n]];if(r)return r}return null},_resetEventPlugins:function(){i=null;for(var e in s)s.hasOwnProperty(e)&&delete s[e];f.plugins.length=0;var t=f.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=f.registrationNameModules;for(var o in r)r.hasOwnProperty(o)&&delete r[o]}};t.exports=f},{"./invariant":140}],21:[function(e,t,n){function u(e){return e===o.topMouseUp||e===o.topTouchEnd||e===o.topTouchCancel}function a(e){return e===o.topMouseMove||e===o.topTouchMove}function f(e){return e===o.topMouseDown||e===o.topTouchStart}function c(e,t){var n=e._dispatchListeners,r=e._dispatchIDs;l(e);if(Array.isArray(n))for(var i=0;i<n.length;i++){if(e.isPropagationStopped())break;t(e,n[i],r[i])}else n&&t(e,n,r)}function h(e,t,n){e.currentTarget=s.Mount.getNode(n);var r=t(e,n);return e.currentTarget=null,r}function p(e,t){c(e,t),e._dispatchListeners=null,e._dispatchIDs=null}function d(e){var t=e._dispatchListeners,n=e._dispatchIDs;l(e);if(Array.isArray(t))for(var r=0;r<t.length;r++){if(e.isPropagationStopped())break;if(t[r](e,n[r]))return n[r]}else if(t&&t(e,n))return n;return null}function v(e){var t=d(e);return e._dispatchIDs=null,e._dispatchListeners=null,t}function m(e){l(e);var t=e._dispatchListeners,n=e._dispatchIDs;i(!Array.isArray(t),"executeDirectDispatch(...): Invalid `event`.");var r=t?t(e,n):null;return e._dispatchListeners=null,e._dispatchIDs=null,r}function g(e){return!!e._dispatchListeners}var r=e("./EventConstants"),i=e("./invariant"),s={Mount:null,injectMount:function(e){s.Mount=e,i(e&&e.getNode,"EventPluginUtils.injection.injectMount(...): Injected Mount module is missing getNode.")}},o=r.topLevelTypes,l;l=function(e){var t=e._dispatchListeners,n=e._dispatchIDs,r=Array.isArray(t),s=Array.isArray(n),o=s?n.length:n?1:0,u=r?t.length:t?1:0;i(s===r&&o===u,"EventPluginUtils: Invalid `event`.")};var y={isEndish:u,isMoveish:a,isStartish:f,executeDirectDispatch:m,executeDispatch:h,executeDispatchesInOrder:p,executeDispatchesInOrderStopAtTrue:v,hasDispatches:g,injection:s,useTouchEvents:!1};t.exports=y},{"./EventConstants":17,"./invariant":140}],22:[function(e,t,n){function f(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return a(e,r)}function l(e,t,n){if(!e)throw new Error("Dispatching id must not be null");var r=t?u.bubbled:u.captured,i=f(e,n,r);i&&(n._dispatchListeners=s(n._dispatchListeners,i),n._dispatchIDs=s(n._dispatchIDs,e))}function c(e){e&&e.dispatchConfig.phasedRegistrationNames&&i.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,l,e)}function h(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,i=a(e,r);i&&(n._dispatchListeners=s(n._dispatchListeners,i),n._dispatchIDs=s(n._dispatchIDs,e))}}function p(e){e&&e.dispatchConfig.registrationName&&h(e.dispatchMarker,null,e)}function d(e){o(e,c)}function v(e,t,n,r){i.injection.getInstanceHandle().traverseEnterLeave(n,r,h,e,t)}function m(e){o(e,p)}var r=e("./EventConstants"),i=e("./EventPluginHub"),s=e("./accumulateInto"),o=e("./forEachAccumulated"),u=r.PropagationPhases,a=i.getListener,g={accumulateTwoPhaseDispatches:d,accumulateDirectDispatches:m,accumulateEnterLeaveDispatches:v};t.exports=g},{"./EventConstants":17,"./EventPluginHub":19,"./accumulateInto":109,"./forEachAccumulated":126}],23:[function(e,t,n){var r=typeof window!="undefined"&&!!window.document&&!!window.document.createElement,i={canUseDOM:r,canUseWorkers:typeof Worker!="undefined",canUseEventListeners:r&&(!!window.addEventListener||!!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};t.exports=i},{}],24:[function(e,t,n){var r=e("./DOMProperty"),i=e("./ExecutionEnvironment"),s=r.injection.MUST_USE_ATTRIBUTE,o=r.injection.MUST_USE_PROPERTY,u=r.injection.HAS_BOOLEAN_VALUE,a=r.injection.HAS_SIDE_EFFECTS,f=r.injection.HAS_NUMERIC_VALUE,l=r.injection.HAS_POSITIVE_NUMERIC_VALUE,c=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE,h;if(i.canUseDOM){var p=document.implementation;h=p&&p.hasFeature&&p.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var d={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:s|u,allowTransparency:s,alt:null,async:u,autoComplete:null,autoPlay:u,cellPadding:null,cellSpacing:null,charSet:s,checked:o|u,classID:s,className:h?s:o,cols:s|l,colSpan:null,content:null,contentEditable:null,contextMenu:s,controls:o|u,coords:null,crossOrigin:null,data:null,dateTime:s,defer:u,dir:null,disabled:s|u,download:c,draggable:null,encType:null,form:s,formAction:s,formEncType:s,formMethod:s,formNoValidate:u,formTarget:s,frameBorder:s,height:s,hidden:s|u,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:o,label:null,lang:null,list:s,loop:o|u,manifest:s,marginHeight:null,marginWidth:null,max:null,maxLength:s,media:s,mediaGroup:null,method:null,min:null,multiple:o|u,muted:o|u,name:null,noValidate:u,open:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:o|u,rel:null,required:u,role:s,rows:s|l,rowSpan:null,sandbox:null,scope:null,scrolling:null,seamless:s|u,selected:o|u,shape:null,size:s|l,sizes:s,span:l,spellCheck:null,src:null,srcDoc:o,srcSet:s,start:f,step:null,style:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:o|a,width:s,wmode:s,autoCapitalize:null,autoCorrect:null,itemProp:s,itemScope:s|u,itemType:s,property:null},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",encType:"enctype",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};t.exports=d},{"./DOMProperty":12,"./ExecutionEnvironment":23}],25:[function(e,t,n){var r=e("./ReactLink"),i=e("./ReactStateSetters"),s={linkState:function(e){return new r(this.state[e],i.createStateKeySetter(this,e))}};t.exports=s},{"./ReactLink":68,"./ReactStateSetters":85}],26:[function(e,t,n){function o(e){i(e.props.checkedLink==null||e.props.valueLink==null,"Cannot provide a checkedLink and a valueLink. If you want to use checkedLink, you probably don't want to use valueLink and vice versa.")}function u(e){o(e),i(e.props.value==null&&e.props.onChange==null,"Cannot provide a valueLink and a value or onChange event. If you want to use value or onChange, you probably don't want to use valueLink.")}function a(e){o(e),i(e.props.checked==null&&e.props.onChange==null,"Cannot provide a checkedLink and a checked property or onChange event. If you want to use checked or onChange, you probably don't want to use checkedLink")}function f(e){this.props.valueLink.requestChange(e.target.value)}function l(e){this.props.checkedLink.requestChange(e.target.checked)}var r=e("./ReactPropTypes"),i=e("./invariant"),s={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},c={Mixin:{propTypes:{value:function(e,t,n){if(!e[t]||s[e.type]||e.onChange||e.readOnly||e.disabled)return;return new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){if(!e[t]||e.onChange||e.readOnly||e.disabled)return;return new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:r.func}},getValue:function(e){return e.props.valueLink?(u(e),e.props.valueLink.value):e.props.value},getChecked:function(e){return e.props.checkedLink?(a(e),e.props.checkedLink.value):e.props.checked},getOnChange:function(e){return e.props.valueLink?(u(e),f):e.props.checkedLink?(a(e),l):e.props.onChange}};t.exports=c},{"./ReactPropTypes":79,"./invariant":140}],27:[function(e,t,n){function u(e){e.remove()}var r=e("./ReactBrowserEventEmitter"),i=e("./accumulateInto"),s=e("./forEachAccumulated"),o=e("./invariant"),a={trapBubbledEvent:function(e,t){o(this.isMounted(),"Must be mounted to trap events");var n=r.trapBubbledEvent(e,t,this.getDOMNode());this._localEventListeners=i(this._localEventListeners,n)},componentWillUnmount:function(){this._localEventListeners&&s(this._localEventListeners,u)}};t.exports=a},{"./ReactBrowserEventEmitter":33,"./accumulateInto":109,"./forEachAccumulated":126,"./invariant":140}],28:[function(e,t,n){var r=e("./EventConstants"),i=e("./emptyFunction"),s=r.topLevelTypes,o={eventTypes:null,extractEvents:function(e,t,n,r){if(e===s.topTouchStart){var o=r.target;o&&!o.onclick&&(o.onclick=i)}}};t.exports=o},{"./EventConstants":17,"./emptyFunction":121}],29:[function(e,t,n){function r(e,t){if(e==null)throw new TypeError("Object.assign target cannot be null or undefined");var n=Object(e),r=Object.prototype.hasOwnProperty;for(var i=1;i<arguments.length;i++){var s=arguments[i];if(s==null)continue;var o=Object(s);for(var u in o)r.call(o,u)&&(n[u]=o[u])}return n}t.exports=r},{}],30:[function(e,t,n){var r=e("./invariant"),i=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},s=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},o=function(e,t,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,e,t,n),i}return new r(e,t,n)},u=function(e,t,n,r,i){var s=this;if(s.instancePool.length){var o=s.instancePool.pop();return s.call(o,e,t,n,r,i),o}return new s(e,t,n,r,i)},a=function(e){var t=this;r(e instanceof t,"Trying to release an instance into a pool of a different type."),e.destructor&&e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},f=10,l=i,c=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||l,n.poolSize||(n.poolSize=f),n.release=a,n},h={addPoolingTo:c,oneArgumentPooler:i,twoArgumentPooler:s,threeArgumentPooler:o,fiveArgumentPooler:u};t.exports=h},{"./invariant":140}],31:[function(e,t,n){var r=e("./DOMPropertyOperations"),i=e("./EventPluginUtils"),s=e("./ReactChildren"),o=e("./ReactComponent"),u=e("./ReactCompositeComponent"),a=e("./ReactContext"),f=e("./ReactCurrentOwner"),l=e("./ReactElement"),c=e("./ReactElementValidator"),h=e("./ReactDOM"),p=e("./ReactDOMComponent"),d=e("./ReactDefaultInjection"),v=e("./ReactInstanceHandles"),m=e("./ReactLegacyElement"),g=e("./ReactMount"),y=e("./ReactMultiChild"),b=e("./ReactPerf"),w=e("./ReactPropTypes"),E=e("./ReactServerRendering"),S=e("./ReactTextComponent"),x=e("./Object.assign"),T=e("./deprecated"),N=e("./onlyChild");d.inject();var C=l.createElement,k=l.createFactory;C=c.createElement,k=c.createFactory,C=m.wrapCreateElement(C),k=m.wrapCreateFactory(k);var L=b.measure("React","render",g.render),A={Children:{map:s.map,forEach:s.forEach,count:s.count,only:N},DOM:h,PropTypes:w,initializeTouchEvents:function(e){i.useTouchEvents=e},createClass:u.createClass,createElement:C,createFactory:k,constructAndRenderComponent:g.constructAndRenderComponent,constructAndRenderComponentByID:g.constructAndRenderComponentByID,render:L,renderToString:E.renderToString,renderToStaticMarkup:E.renderToStaticMarkup,unmountComponentAtNode:g.unmountComponentAtNode,isValidClass:m.isValidClass,isValidElement:l.isValidElement,withContext:a.withContext,__spread:x,renderComponent:T("React","renderComponent","render",this,L),renderComponentToString:T("React","renderComponentToString","renderToString",this,E.renderToString),renderComponentToStaticMarkup:T("React","renderComponentToStaticMarkup","renderToStaticMarkup",this,E.renderToStaticMarkup),isValidComponent:T("React","isValidComponent","isValidElement",this,l.isValidElement)};typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({Component:o,CurrentOwner:f,DOMComponent:p,DOMPropertyOperations:r,InstanceHandles:v,Mount:g,MultiChild:y,TextComponent:S});var O=e("./ExecutionEnvironment");if(O.canUseDOM&&window.top===window.self){navigator.userAgent.indexOf("Chrome")>-1&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"&&console.debug("Download the React DevTools for a better development experience: http://fb.me/react-devtools");var M=[Array.isArray,Array.prototype.every,Array.prototype.forEach,Array.prototype.indexOf,Array.prototype.map,Date.now,Function.prototype.bind,Object.keys,String.prototype.split,String.prototype.trim,Object.create,Object.freeze];for(var _=0;_<M.length;_++)if(!M[_]){console.error("One or more ES5 shim/shams expected by React are not available: http://fb.me/react-warning-polyfills");break}}A.version="0.12.2",t.exports=A},{"./DOMPropertyOperations":13,"./EventPluginUtils":21,"./ExecutionEnvironment":23,"./Object.assign":29,"./ReactChildren":36,"./ReactComponent":37,"./ReactCompositeComponent":40,"./ReactContext":41,"./ReactCurrentOwner":42,"./ReactDOM":43,"./ReactDOMComponent":45,"./ReactDefaultInjection":55,"./ReactElement":58,"./ReactElementValidator":59,"./ReactInstanceHandles":66,"./ReactLegacyElement":67,"./ReactMount":70,"./ReactMultiChild":71,"./ReactPerf":75,"./ReactPropTypes":79,"./ReactServerRendering":83,"./ReactTextComponent":87,"./deprecated":120,"./onlyChild":151}],32:[function(e,t,n){var r=e("./ReactEmptyComponent"),i=e("./ReactMount"),s=e("./invariant"),o={getDOMNode:function(){return s(this.isMounted(),"getDOMNode(): A component must be mounted to have a DOM node."),r.isNullComponentID(this._rootNodeID)?null:i.getNode(this._rootNodeID)}};t.exports=o},{"./ReactEmptyComponent":60,"./ReactMount":70,"./invariant":140}],33:[function(e,t,n){function v(e){return Object.prototype.hasOwnProperty.call(e,d)||(e[d]=h++,l[e[d]]={}),l[e[d]]}var r=e("./EventConstants"),i=e("./EventPluginHub"),s=e("./EventPluginRegistry"),o=e("./ReactEventEmitterMixin"),u=e("./ViewportMetrics"),a=e("./Object.assign"),f=e("./isEventSupported"),l={},c=!1,h=0,p={topBlur:"blur",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topWheel:"wheel"},d="_reactListenersID"+String(Math.random()).slice(2),m=a({},o,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(m.handleTopLevel),m.ReactEventListener=e}},setEnabled:function(e){m.ReactEventListener&&m.ReactEventListener.setEnabled(e)},isEnabled:function(){return!!m.ReactEventListener&&!!m.ReactEventListener.isEnabled()},listenTo:function(e,t){var n=t,i=v(n),o=s.registrationNameDependencies[e],u=r.topLevelTypes;for(var a=0,l=o.length;a<l;a++){var c=o[a];if(!i.hasOwnProperty(c)||!i[c])c===u.topWheel?f("wheel")?m.ReactEventListener.trapBubbledEvent(u.topWheel,"wheel",n):f("mousewheel")?m.ReactEventListener.trapBubbledEvent(u.topWheel,"mousewheel",n):m.ReactEventListener.trapBubbledEvent(u.topWheel,"DOMMouseScroll",n):c===u.topScroll?f("scroll",!0)?m.ReactEventListener.trapCapturedEvent(u.topScroll,"scroll",n):m.ReactEventListener.trapBubbledEvent(u.topScroll,"scroll",m.ReactEventListener.WINDOW_HANDLE):c===u.topFocus||c===u.topBlur?(f("focus",!0)?(m.ReactEventListener.trapCapturedEvent(u.topFocus,"focus",n),m.ReactEventListener.trapCapturedEvent(u.topBlur,"blur",n)):f("focusin")&&(m.ReactEventListener.trapBubbledEvent(u.topFocus,"focusin",n),m.ReactEventListener.trapBubbledEvent(u.topBlur,"focusout",n)),i[u.topBlur]=!0,i[u.topFocus]=!0):p.hasOwnProperty(c)&&m.ReactEventListener.trapBubbledEvent(c,p[c],n),i[c]=!0}},trapBubbledEvent:function(e,t,n){return m.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return m.ReactEventListener.trapCapturedEvent(e,t,n)},ensureScrollValueMonitoring:function(){if(!c){var e=u.refreshScrollValues;m.ReactEventListener.monitorScrollValue(e),c=!0}},eventNameDispatchConfigs:i.eventNameDispatchConfigs,registrationNameModules:i.registrationNameModules,putListener:i.putListener,getListener:i.getListener,deleteListener:i.deleteListener,deleteAllListeners:i.deleteAllListeners});t.exports=m},{"./EventConstants":17,"./EventPluginHub":19,"./EventPluginRegistry":20,"./Object.assign":29,"./ReactEventEmitterMixin":62,"./ViewportMetrics":108,"./isEventSupported":141}],34:[function(e,t,n){var r=e("./React"),i=e("./Object.assign"),s=r.createFactory(e("./ReactTransitionGroup")),o=r.createFactory(e("./ReactCSSTransitionGroupChild")),u=r.createClass({displayName:"ReactCSSTransitionGroup",propTypes:{transitionName:r.PropTypes.string.isRequired,transitionEnter:r.PropTypes.bool,transitionLeave:r.PropTypes.bool},getDefaultProps:function(){return{transitionEnter:!0,transitionLeave:!0}},_wrapChild:function(e){return o({name:this.props.transitionName,enter:this.props.transitionEnter,leave:this.props.transitionLeave},e)},render:function(){return s(i({},this.props,{childFactory:this._wrapChild}))}});t.exports=u},{"./Object.assign":29,"./React":31,"./ReactCSSTransitionGroupChild":35,"./ReactTransitionGroup":90}],35:[function(e,t,n){var r=e("./React"),i=e("./CSSCore"),s=e("./ReactTransitionEvents"),o=e("./onlyChild"),u=17,a=5e3,f=null;f=function(){console.warn("transition(): tried to perform an animation without an animationend or transitionend event after timeout ("+a+"ms). You should either disable this "+"transition in JS or add a CSS animation/transition.")};var l=r.createClass({displayName:"ReactCSSTransitionGroupChild",transition:function(e,t){var n=this.getDOMNode(),r=this.props.name+"-"+e,o=r+"-active",u=null,l=function(e){if(e&&e.target!==n)return;clearTimeout(u),i.removeClass(n,r),i.removeClass(n,o),s.removeEndEventListener(n,l),t&&t()};s.addEndEventListener(n,l),i.addClass(n,r),this.queueClass(o),u=setTimeout(f,a)},queueClass:function(e){this.classNameQueue.push(e),this.timeout||(this.timeout=setTimeout(this.flushClassNameQueue,u))},flushClassNameQueue:function(){this.isMounted()&&this.classNameQueue.forEach(i.addClass.bind(i,this.getDOMNode())),this.classNameQueue.length=0,this.timeout=null},componentWillMount:function(){this.classNameQueue=[]},componentWillUnmount:function(){this.timeout&&clearTimeout(this.timeout)},componentWillEnter:function(e){this.props.enter?this.transition("enter",e):e()},componentWillLeave:function(e){this.props.leave?this.transition("leave",e):e()},render:function(){return o(this.props.children)}});t.exports=l},{"./CSSCore":4,"./React":31,"./ReactTransitionEvents":89,"./onlyChild":151}],36:[function(e,t,n){function a(e,t){this.forEachFunction=e,this.forEachContext=t}function f(e,t,n,r){var i=e;i.forEachFunction.call(i.forEachContext,t,r)}function l(e,t,n){if(e==null)return e;var r=a.getPooled(t,n);i(e,f,r),a.release(r)}function c(e,t,n){this.mapResult=e,this.mapFunction=t,this.mapContext=n}function h(e,t,n,r){var i=e,o=i.mapResult,u=!o.hasOwnProperty(n);s(u,"ReactChildren.map(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",n);if(u){var a=i.mapFunction.call(i.mapContext,t,r);o[n]=a}}function p(e,t,n){if(e==null)return e;var r={},s=c.getPooled(r,t,n);return i(e,h,s),c.release(s),r}function d(e,t,n,r){return null}function v(e,t){return i(e,d,null)}var r=e("./PooledClass"),i=e("./traverseAllChildren"),s=e("./warning"),o=r.twoArgumentPooler,u=r.threeArgumentPooler;r.addPoolingTo(a,o),r.addPoolingTo(c,u);var m={forEach:l,map:p,count:v};t.exports=m},{"./PooledClass":30,"./traverseAllChildren":158,"./warning":160}],37:[function(e,t,n){var r=e("./ReactElement"),i=e("./ReactOwner"),s=e("./ReactUpdates"),o=e("./Object.assign"),u=e("./invariant"),a=e("./keyMirror"),f=a({MOUNTED:null,UNMOUNTED:null}),l=!1,c=null,h=null,p={injection:{injectEnvironment:function(e){u(!l,"ReactComponent: injectEnvironment() can only be called once."),h=e.mountImageIntoNode,c=e.unmountIDFromEnvironment,p.BackendIDOperations=e.BackendIDOperations,l=!0}},LifeCycle:f,BackendIDOperations:null,Mixin:{isMounted:function(){return this._lifeCycleState===f.MOUNTED},setProps:function(e,t){var n=this._pendingElement||this._currentElement;this.replaceProps(o({},n.props,e),t)},replaceProps:function(e,t){u(this.isMounted(),"replaceProps(...): Can only update a mounted component."),u(this._mountDepth===0,"replaceProps(...): You called `setProps` or `replaceProps` on a component with a parent. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created."),this._pendingElement=r.cloneAndReplaceProps(this._pendingElement||this._currentElement,e),s.enqueueUpdate(this,t)},_setPropsInternal:function(e,t){var n=this._pendingElement||this._currentElement;this._pendingElement=r.cloneAndReplaceProps(n,o({},n.props,e)),s.enqueueUpdate(this,t)},construct:function(e){this.props=e.props,this._owner=e._owner,this._lifeCycleState=f.UNMOUNTED,this._pendingCallbacks=null,this._currentElement=e,this._pendingElement=null},mountComponent:function(e,t,n){u(!this.isMounted(),"mountComponent(%s, ...): Can only mount an unmounted component. Make sure to avoid storing components between renders or reusing a single component instance in multiple places.",e);var r=this._currentElement.ref;if(r!=null){var s=this._currentElement._owner;i.addComponentAsRefTo(this,r,s)}this._rootNodeID=e,this._lifeCycleState=f.MOUNTED,this._mountDepth=n},unmountComponent:function(){u(this.isMounted(),"unmountComponent(): Can only unmount a mounted component.");var e=this._currentElement.ref;e!=null&&i.removeComponentAsRefFrom(this,e,this._owner),c(this._rootNodeID),this._rootNodeID=null,this._lifeCycleState=f.UNMOUNTED},receiveComponent:function(e,t){u(this.isMounted(),"receiveComponent(...): Can only update a mounted component."),this._pendingElement=e,this.performUpdateIfNecessary(t)},performUpdateIfNecessary:function(e){if(this._pendingElement==null)return;var t=this._currentElement,n=this._pendingElement;this._currentElement=n,this.props=n.props,this._owner=n._owner,this._pendingElement=null,this.updateComponent(e,t)},updateComponent:function(e,t){var n=this._currentElement;if(n._owner!==t._owner||n.ref!==t.ref)t.ref!=null&&i.removeComponentAsRefFrom(this,t.ref,t._owner),n.ref!=null&&i.addComponentAsRefTo(this,n.ref,n._owner)},mountComponentIntoNode:function(e,t,n){var r=s.ReactReconcileTransaction.getPooled();r.perform(this._mountComponentIntoNode,this,e,t,r,n),s.ReactReconcileTransaction.release(r)},_mountComponentIntoNode:function(e,t,n,r){var i=this.mountComponent(e,n,0);h(i,t,r)},isOwnedBy:function(e){return this._owner===e},getSiblingByRef:function(e){var t=this._owner;return!t||!t.refs?null:t.refs[e]}}};t.exports=p},{"./Object.assign":29,"./ReactElement":58,"./ReactOwner":74,"./ReactUpdates":91,"./invariant":140,"./keyMirror":146}],38:[function(e,t,n){var r=e("./ReactDOMIDOperations"),i=e("./ReactMarkupChecksum"),s=e("./ReactMount"),o=e("./ReactPerf"),u=e("./ReactReconcileTransaction"),a=e("./getReactRootElementInContainer"),f=e("./invariant"),l=e("./setInnerHTML"),c=1,h=9,p={ReactReconcileTransaction:u,BackendIDOperations:r,unmountIDFromEnvironment:function(e){s.purgeID(e)},mountImageIntoNode:o.measure("ReactComponentBrowserEnvironment","mountImageIntoNode",function(e,t,n){f(t&&(t.nodeType===c||t.nodeType===h),"mountComponentIntoNode(...): Target container is not valid.");if(n){if(i.canReuseMarkup(e,a(t)))return;f(t.nodeType!==h,"You're trying to render a component to the document using server rendering but the checksum was invalid. This usually means you rendered a different component type or props on the client from the one on the server, or your render() methods are impure. React cannot handle this case due to cross-browser quirks by rendering at the document root. You should look for environment dependent code in your components and ensure the props are the same client and server side."),console.warn("React attempted to use reuse markup in a container but the checksum was invalid. This generally means that you are using server rendering and the markup generated on the server was not what the client was expecting. React injected new markup to compensate which works but you have lost many of the benefits of server rendering. Instead, figure out why the markup being generated is different on the client or server.")}f(t.nodeType!==h,"You're trying to render a component to the document but you didn't use server rendering. We can't do this without using server rendering due to cross-browser quirks. See renderComponentToString() for server rendering."),l(t,e)})};t.exports=p},{"./ReactDOMIDOperations":47,"./ReactMarkupChecksum":69,"./ReactMount":70,"./ReactPerf":75,"./ReactReconcileTransaction":81,"./getReactRootElementInContainer":134,"./invariant":140,"./setInnerHTML":154}],39:[function(e,t,n){var r=e("./shallowEqual"),i={shouldComponentUpdate:function(e,t){return!r(this.props,e)||!r(this.state,t)}};t.exports=i},{"./shallowEqual":155}],40:[function(e,t,n){function M(e){var t=e._owner||null;return t&&t.constructor&&t.constructor.displayName?" Check the render method of `"+t.constructor.displayName+"`.":""}function _(e,t,n){for(var r in t)t.hasOwnProperty(r)&&b(typeof t[r]=="function","%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",e.displayName||"ReactCompositeComponent",v[n],r)}function D(e,t){var n=A.hasOwnProperty(t)?A[t]:null;R.hasOwnProperty(t)&&b(n===k.OVERRIDE_BASE,"ReactCompositeComponentInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e.hasOwnProperty(t)&&b(n===k.DEFINE_MANY||n===k.DEFINE_MANY_MERGED,"ReactCompositeComponentInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function P(e){var t=e._compositeLifeCycleState;b(e.isMounted()||t===q.MOUNTING,"replaceState(...): Can only update a mounted or mounting component."),b(s.current==null,"replaceState(...): Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state."),b(t!==q.UNMOUNTING,"replaceState(...): Cannot update while unmounting component. This usually means you called setState() on an unmounted component.")}function H(e,t){if(!t)return;b(!l.isValidFactory(t),"ReactCompositeComponent: You're attempting to use a component class as a mixin. Instead, just use a regular object."),b(!o.isValidElement(t),"ReactCompositeComponent: You're attempting to use a component as a mixin. Instead, just use a regular object.");var n=e.prototype;t.hasOwnProperty(C)&&O.mixins(e,t.mixins);for(var r in t){if(!t.hasOwnProperty(r))continue;if(r===C)continue;var i=t[r];D(n,r);if(O.hasOwnProperty(r))O[r](e,i);else{var s=A.hasOwnProperty(r),u=n.hasOwnProperty(r),a=i&&i.__reactDontBind,f=typeof i=="function",c=f&&!s&&!u&&!a;if(c)n.__reactAutoBindMap||(n.__reactAutoBindMap={}),n.__reactAutoBindMap[r]=i,n[r]=i;else if(u){var h=A[r];b(s&&(h===k.DEFINE_MANY_MERGED||h===k.DEFINE_MANY),"ReactCompositeComponent: Unexpected spec policy %s for key %s when mixing in component specs.",h,r),h===k.DEFINE_MANY_MERGED?n[r]=F(n[r],i):h===k.DEFINE_MANY&&(n[r]=I(n[r],i))}else n[r]=i,typeof i=="function"&&t.displayName&&(n[r].displayName=t.displayName+"_"+r)}}}function B(e,t){if(!t)return;for(var n in t){var r=t[n];if(!t.hasOwnProperty(n))continue;var i=n in O;b(!i,'ReactCompositeComponent: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var s=n in e;b(!s,"ReactCompositeComponent: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),e[n]=r}}function j(e,t){return b(e&&t&&typeof e=="object"&&typeof t=="object","mergeObjectsWithNoDuplicateKeys(): Cannot merge non-objects"),x(t,function(t,n){b(e[n]===undefined,"mergeObjectsWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),e[n]=t}),e}function F(e,t){return function(){var r=e.apply(this,arguments),i=t.apply(this,arguments);return r==null?i:i==null?r:j(r,i)}}function I(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}var r=e("./ReactComponent"),i=e("./ReactContext"),s=e("./ReactCurrentOwner"),o=e("./ReactElement"),u=e("./ReactElementValidator"),a=e("./ReactEmptyComponent"),f=e("./ReactErrorUtils"),l=e("./ReactLegacyElement"),c=e("./ReactOwner"),h=e("./ReactPerf"),p=e("./ReactPropTransferer"),d=e("./ReactPropTypeLocations"),v=e("./ReactPropTypeLocationNames"),m=e("./ReactUpdates"),g=e("./Object.assign"),y=e("./instantiateReactComponent"),b=e("./invariant"),w=e("./keyMirror"),E=e("./keyOf"),S=e("./monitorCodeUse"),x=e("./mapObject"),T=e("./shouldUpdateReactComponent"),N=e("./warning"),C=E({mixins:null}),k=w({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),L=[],A={mixins:k.DEFINE_MANY,statics:k.DEFINE_MANY,propTypes:k.DEFINE_MANY,contextTypes:k.DEFINE_MANY,childContextTypes:k.DEFINE_MANY,getDefaultProps:k.DEFINE_MANY_MERGED,getInitialState:k.DEFINE_MANY_MERGED,getChildContext:k.DEFINE_MANY_MERGED,render:k.DEFINE_ONCE,componentWillMount:k.DEFINE_MANY,componentDidMount:k.DEFINE_MANY,componentWillReceiveProps:k.DEFINE_MANY,shouldComponentUpdate:k.DEFINE_ONCE,componentWillUpdate:k.DEFINE_MANY,componentDidUpdate:k.DEFINE_MANY,componentWillUnmount:k.DEFINE_MANY,updateComponent:k.OVERRIDE_BASE},O={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)H(e,t[n])},childContextTypes:function(e,t){_(e,t,d.childContext),e.childContextTypes=g({},e.childContextTypes,t)},contextTypes:function(e,t){_(e,t,d.context),e.contextTypes=g({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=F(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){_(e,t,d.prop),e.propTypes=g({},e.propTypes,t)},statics:function(e,t){B(e,t)}},q=w({MOUNTING:null,UNMOUNTING:null,RECEIVING_PROPS:null}),R={construct:function(e){r.Mixin.construct.apply(this,arguments),c.Mixin.construct.apply(this,arguments),this.state=null,this._pendingState=null,this.context=null,this._compositeLifeCycleState=null},isMounted:function(){return r.Mixin.isMounted.call(this)&&this._compositeLifeCycleState!==q.MOUNTING},mountComponent:h.measure("ReactCompositeComponent","mountComponent",function(e,t,n){r.Mixin.mountComponent.call(this,e,t,n),this._compositeLifeCycleState=q.MOUNTING,this.__reactAutoBindMap&&this._bindAutoBindMethods(),this.context=this._processContext(this._currentElement._context),this.props=this._processProps(this.props),this.state=this.getInitialState?this.getInitialState():null,b(typeof this.state=="object"&&!Array.isArray(this.state),"%s.getInitialState(): must return an object or null",this.constructor.displayName||"ReactCompositeComponent"),this._pendingState=null,this._pendingForceUpdate=!1,this.componentWillMount&&(this.componentWillMount(),this._pendingState&&(this.state=this._pendingState,this._pendingState=null)),this._renderedComponent=y(this._renderValidatedComponent(),this._currentElement.type),this._compositeLifeCycleState=null;var i=this._renderedComponent.mountComponent(e,t,n+1);return this.componentDidMount&&t.getReactMountReady().enqueue(this.componentDidMount,this),i}),unmountComponent:function(){this._compositeLifeCycleState=q.UNMOUNTING,this.componentWillUnmount&&this.componentWillUnmount(),this._compositeLifeCycleState=null,this._renderedComponent.unmountComponent(),this._renderedComponent=null,r.Mixin.unmountComponent.call(this)},setState:function(e,t){b(typeof e=="object"||e==null,"setState(...): takes an object of state variables to update."),N(e!=null,"setState(...): You passed an undefined or null state object; instead, use forceUpdate()."),this.replaceState(g({},this._pendingState||this.state,e),t)},replaceState:function(e,t){P(this),this._pendingState=e,this._compositeLifeCycleState!==q.MOUNTING&&m.enqueueUpdate(this,t)},_processContext:function(e){var t=null,n=this.constructor.contextTypes;if(n){t={};for(var r in n)t[r]=e[r];this._checkPropTypes(n,t,d.context)}return t},_processChildContext:function(e){var t=this.getChildContext&&this.getChildContext(),n=this.constructor.displayName||"ReactCompositeComponent";if(t){b(typeof this.constructor.childContextTypes=="object","%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",n),this._checkPropTypes(this.constructor.childContextTypes,t,d.childContext);for(var r in t)b(r in this.constructor.childContextTypes,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',n,r);return g({},e,t)}return e},_processProps:function(e){var t=this.constructor.propTypes;return t&&this._checkPropTypes(t,e,d.prop),e},_checkPropTypes:function(e,t,n){var r=this.constructor.displayName;for(var i in e)if(e.hasOwnProperty(i)){var s=e[i](t,i,r,n);if(s instanceof Error){var o=M(this);N(!1,s.message+o)}}},performUpdateIfNecessary:function(e){var t=this._compositeLifeCycleState;if(t===q.MOUNTING||t===q.RECEIVING_PROPS)return;if(this._pendingElement==null&&this._pendingState==null&&!this._pendingForceUpdate)return;var n=this.context,r=this.props,i=this._currentElement;this._pendingElement!=null&&(i=this._pendingElement,n=this._processContext(i._context),r=this._processProps(i.props),this._pendingElement=null,this._compositeLifeCycleState=q.RECEIVING_PROPS,this.componentWillReceiveProps&&this.componentWillReceiveProps(r,n)),this._compositeLifeCycleState=null;var s=this._pendingState||this.state;this._pendingState=null;var o=this._pendingForceUpdate||!this.shouldComponentUpdate||this.shouldComponentUpdate(r,s,n);typeof o=="undefined"&&console.warn((this.constructor.displayName||"ReactCompositeComponent")+".shouldComponentUpdate(): Returned undefined instead of a "+"boolean value. Make sure to return true or false."),o?(this._pendingForceUpdate=!1,this._performComponentUpdate(i,r,s,n,e)):(this._currentElement=i,this.props=r,this.state=s,this.context=n,this._owner=i._owner)},_performComponentUpdate:function(e,t,n,r,i){var s=this._currentElement,o=this.props,u=this.state,a=this.context;this.componentWillUpdate&&this.componentWillUpdate(t,n,r),this._currentElement=e,this.props=t,this.state=n,this.context=r,this._owner=e._owner,this.updateComponent(i,s),this.componentDidUpdate&&i.getReactMountReady().enqueue(this.componentDidUpdate.bind(this,o,u,a),this)},receiveComponent:function(e,t){if(e===this._currentElement&&e._owner!=null)return;r.Mixin.receiveComponent.call(this,e,t)},updateComponent:h.measure("ReactCompositeComponent","updateComponent",function(e,t){r.Mixin.updateComponent.call(this,e,t);var n=this._renderedComponent,i=n._currentElement,s=this._renderValidatedComponent();if(T(i,s))n.receiveComponent(s,e);else{var o=this._rootNodeID,u=n._rootNodeID;n.unmountComponent(),this._renderedComponent=y(s,this._currentElement.type);var a=this._renderedComponent.mountComponent(o,e,this._mountDepth+1);r.BackendIDOperations.dangerouslyReplaceNodeWithMarkupByID(u,a)}}),forceUpdate:function(e){var t=this._compositeLifeCycleState;b(this.isMounted()||t===q.MOUNTING,"forceUpdate(...): Can only force an update on mounted or mounting components."),b(t!==q.UNMOUNTING&&s.current==null,"forceUpdate(...): Cannot force an update while unmounting component or within a `render` function."),this._pendingForceUpdate=!0,m.enqueueUpdate(this,e)},_renderValidatedComponent:h.measure("ReactCompositeComponent","_renderValidatedComponent",function(){var e,t=i.current;i.current=this._processChildContext(this._currentElement._context),s.current=this;try{e=this.render(),e===null||e===!1?(e=a.getEmptyComponent(),a.registerNullComponentID(this._rootNodeID)):a.deregisterNullComponentID(this._rootNodeID)}finally{i.current=t,s.current=null}return b(o.isValidElement(e),"%s.render(): A valid ReactComponent must be returned. You may have returned undefined, an array or some other invalid object.",this.constructor.displayName||"ReactCompositeComponent"),e}),_bindAutoBindMethods:function(){for(var e in this.__reactAutoBindMap){if(!this.__reactAutoBindMap.hasOwnProperty(e))continue;var t=this.__reactAutoBindMap[e];this[e]=this._bindAutoBindMethod(f.guard(t,this.constructor.displayName+"."+e))}},_bindAutoBindMethod:function(e){var t=this,n=e.bind(t);n.__reactBoundContext=t,n.__reactBoundMethod=e,n.__reactBoundArguments=null;var r=t.constructor.displayName,i=n.bind;return n.bind=function(s){for(var o=[],u=1,a=arguments.length;u<a;u++)o.push(arguments[u]);if(s!==t&&s!==null)S("react_bind_warning",{component:r}),console.warn("bind(): React component methods may only be bound to the component instance. See "+r);else if(!o.length)return S("react_bind_warning",{component:r}),console.warn("bind(): You are binding a component method to the component. React does this for you automatically in a high-performance way, so you can safely remove this call. See "+r),n;var f=i.apply(n,arguments);return f.__reactBoundContext=t,f.__reactBoundMethod=e,f.__reactBoundArguments=o,f},n}},U=function(){};g(U.prototype,r.Mixin,c.Mixin,p.Mixin,R);var z={LifeCycle:q,Base:U,createClass:function(e){var t=function(e){};t.prototype=new U,t.prototype.constructor=t,L.forEach(H.bind(null,t)),H(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),b(t.prototype.render,"createClass(...): Class specification must implement a `render` method."),t.prototype.componentShouldUpdate&&(S("react_component_should_update_warning",{component:e.displayName}),console.warn((e.displayName||"A component")+" has a method called "+"componentShouldUpdate(). Did you mean shouldComponentUpdate()? "+"The name is phrased as a question because the function is "+"expected to return a value."));for(var n in A)t.prototype[n]||(t.prototype[n]=null);return l.wrapFactory(u.createFactory(t))},injection:{injectMixin:function(e){L.push(e)}}};t.exports=z},{"./Object.assign":29,"./ReactComponent":37,"./ReactContext":41,"./ReactCurrentOwner":42,"./ReactElement":58,"./ReactElementValidator":59,"./ReactEmptyComponent":60,"./ReactErrorUtils":61,"./ReactLegacyElement":67,"./ReactOwner":74,"./ReactPerf":75,"./ReactPropTransferer":76,"./ReactPropTypeLocationNames":77,"./ReactPropTypeLocations":78,"./ReactUpdates":91,"./instantiateReactComponent":139,"./invariant":140,"./keyMirror":146,"./keyOf":147,"./mapObject":148,"./monitorCodeUse":150,"./shouldUpdateReactComponent":156,"./warning":160}],41:[function(e,t,n){var r=e("./Object.assign"),i={current:{},withContext:function(e,t){var n,s=i.current;i.current=r({},s,e);try{n=t()}finally{i.current=s}return n}};t.exports=i},{"./Object.assign":29}],42:[function(e,t,n){var r={current:null};t.exports=r},{}],43:[function(e,t,n){function u(e){return s.markNonLegacyFactory(i.createFactory(e))}var r=e("./ReactElement"),i=e("./ReactElementValidator"),s=e("./ReactLegacyElement"),o=e("./mapObject"),a=o({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul","var":"var",video:"video",wbr:"wbr",circle:"circle",defs:"defs",ellipse:"ellipse",g:"g",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},u);t.exports=a},{"./ReactElement":58,"./ReactElementValidator":59,"./ReactLegacyElement":67,"./mapObject":148}],44:[function(e,t,n){var r=e("./AutoFocusMixin"),i=e("./ReactBrowserComponentMixin"),s=e("./ReactCompositeComponent"),o=e("./ReactElement"),u=e("./ReactDOM"),a=e("./keyMirror"),f=o.createFactory(u.button.type),l=a({onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0}),c=s.createClass({displayName:"ReactDOMButton",mixins:[r,i],render:function(){var e={};for(var t in this.props)this.props.hasOwnProperty(t)&&(!this.props.disabled||!l[t])&&(e[t]=this.props[t]);return f(e,this.props.children)}});t.exports=c},{"./AutoFocusMixin":2,"./ReactBrowserComponentMixin":32,"./ReactCompositeComponent":40,"./ReactDOM":43,"./ReactElement":58,"./keyMirror":146}],45:[function(e,t,n){function T(e){if(!e)return;d(e.children==null||e.dangerouslySetInnerHTML==null,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."),e.contentEditable&&e.children!=null&&console.warn("A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),d(e.style==null||typeof e.style=="object","The `style` prop expects a mapping from style properties to values, not a string.")}function N(e,t,n,r){t==="onScroll"&&!v("scroll",!0)&&(g("react_no_scroll_event"),console.warn("This browser doesn't support the `onScroll` event"));var i=f.findReactContainerForID(e);if(i){var s=i.nodeType===x?i.ownerDocument:i;b(t,s)}r.getPutListenerQueue().enqueuePutListener(e,t,n)}function O(e){A.call(L,e)||(d(k.test(e),"Invalid tag: %s",e),L[e]=!0)}function M(e){O(e),this._tag=e,this.tagName=e.toUpperCase()}var r=e("./CSSPropertyOperations"),i=e("./DOMProperty"),s=e("./DOMPropertyOperations"),o=e("./ReactBrowserComponentMixin"),u=e("./ReactComponent"),a=e("./ReactBrowserEventEmitter"),f=e("./ReactMount"),l=e("./ReactMultiChild"),c=e("./ReactPerf"),h=e("./Object.assign"),p=e("./escapeTextForBrowser"),d=e("./invariant"),v=e("./isEventSupported"),m=e("./keyOf"),g=e("./monitorCodeUse"),y=a.deleteListener,b=a.listenTo,w=a.registrationNameModules,E={string:!0,number:!0},S=m({style:null}),x=1,C={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},k=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,L={},A={}.hasOwnProperty;M.displayName="ReactDOMComponent",M.Mixin={mountComponent:c.measure("ReactDOMComponent","mountComponent",function(e,t,n){u.Mixin.mountComponent.call(this,e,t,n),T(this.props);var r=C[this._tag]?"":"</"+this._tag+">";return this._createOpenTagMarkupAndPutListeners(t)+this._createContentMarkup(t)+r}),_createOpenTagMarkupAndPutListeners:function(e){var t=this.props,n="<"+this._tag;for(var i in t){if(!t.hasOwnProperty(i))continue;var o=t[i];if(o==null)continue;if(w.hasOwnProperty(i))N(this._rootNodeID,i,o,e);else{i===S&&(o&&(o=t.style=h({},t.style)),o=r.createMarkupForStyles(o));var u=s.createMarkupForProperty(i,o);u&&(n+=" "+u)}}if(e.renderToStaticMarkup)return n+">";var a=s.createMarkupForID(this._rootNodeID);return n+" "+a+">"},_createContentMarkup:function(e){var t=this.props.dangerouslySetInnerHTML;if(t!=null){if(t.__html!=null)return t.__html}else{var n=E[typeof this.props.children]?this.props.children:null,r=n!=null?null:this.props.children;if(n!=null)return p(n);if(r!=null){var i=this.mountChildren(r,e);return i.join("")}}return""},receiveComponent:function(e,t){if(e===this._currentElement&&e._owner!=null)return;u.Mixin.receiveComponent.call(this,e,t)},updateComponent:c.measure("ReactDOMComponent","updateComponent",function(e,t){T(this._currentElement.props),u.Mixin.updateComponent.call(this,e,t),this._updateDOMProperties(t.props,e),this._updateDOMChildren(t.props,e)}),_updateDOMProperties:function(e,t){var n=this.props,r,s,o;for(r in e){if(n.hasOwnProperty(r)||!e.hasOwnProperty(r))continue;if(r===S){var a=e[r];for(s in a)a.hasOwnProperty(s)&&(o=o||{},o[s]="")}else w.hasOwnProperty(r)?y(this._rootNodeID,r):(i.isStandardName[r]||i.isCustomAttribute(r))&&u.BackendIDOperations.deletePropertyByID(this._rootNodeID,r)}for(r in n){var f=n[r],l=e[r];if(!n.hasOwnProperty(r)||f===l)continue;if(r===S){f&&(f=n.style=h({},f));if(l){for(s in l)l.hasOwnProperty(s)&&(!f||!f.hasOwnProperty(s))&&(o=o||{},o[s]="");for(s in f)f.hasOwnProperty(s)&&l[s]!==f[s]&&(o=o||{},o[s]=f[s])}else o=f}else w.hasOwnProperty(r)?N(this._rootNodeID,r,f,t):(i.isStandardName[r]||i.isCustomAttribute(r))&&u.BackendIDOperations.updatePropertyByID(this._rootNodeID,r,f)}o&&u.BackendIDOperations.updateStylesByID(this._rootNodeID,o)},_updateDOMChildren:function(e,t){var n=this.props,r=E[typeof e.children]?e.children:null,i=E[typeof n.children]?n.children:null,s=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,o=n.dangerouslySetInnerHTML&&n.dangerouslySetInnerHTML.__html,a=r!=null?null:e.children,f=i!=null?null:n.children,l=r!=null||s!=null,c=i!=null||o!=null;a!=null&&f==null?this.updateChildren(null,t):l&&!c&&this.updateTextContent(""),i!=null?r!==i&&this.updateTextContent(""+i):o!=null?s!==o&&u.BackendIDOperations.updateInnerHTMLByID(this._rootNodeID,o):f!=null&&this.updateChildren(f,t)},unmountComponent:function(){this.unmountChildren(),a.deleteAllListeners(this._rootNodeID),u.Mixin.unmountComponent.call(this)}},h(M.prototype,u.Mixin,M.Mixin,l.Mixin,o),t.exports=M},{"./CSSPropertyOperations":6,"./DOMProperty":12,"./DOMPropertyOperations":13,"./Object.assign":29,"./ReactBrowserComponentMixin":32,"./ReactBrowserEventEmitter":33,"./ReactComponent":37,"./ReactMount":70,"./ReactMultiChild":71,"./ReactPerf":75,"./escapeTextForBrowser":123,"./invariant":140,"./isEventSupported":141,"./keyOf":147,"./monitorCodeUse":150}],46:[function(e,t,n){var r=e("./EventConstants"),i=e("./LocalEventTrapMixin"),s=e("./ReactBrowserComponentMixin"),o=e("./ReactCompositeComponent"),u=e("./ReactElement"),a=e("./ReactDOM"),f=u.createFactory(a.form.type),l=o.createClass({displayName:"ReactDOMForm",mixins:[s,i],render:function(){return f(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topReset,"reset"),this.trapBubbledEvent(r.topLevelTypes.topSubmit,"submit")}});t.exports=l},{"./EventConstants":17,"./LocalEventTrapMixin":27,"./ReactBrowserComponentMixin":32,"./ReactCompositeComponent":40,"./ReactDOM":43,"./ReactElement":58}],47:[function(e,t,n){var r=e("./CSSPropertyOperations"),i=e("./DOMChildrenOperations"),s=e("./DOMPropertyOperations"),o=e("./ReactMount"),u=e("./ReactPerf"),a=e("./invariant"),f=e("./setInnerHTML"),l={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},c={updatePropertyByID:u.measure("ReactDOMIDOperations","updatePropertyByID",function(e,t,n){var r=o.getNode(e);a(!l.hasOwnProperty(t),"updatePropertyByID(...): %s",l[t]),n!=null?s.setValueForProperty(r,t,n):s.deleteValueForProperty(r,t)}),deletePropertyByID:u.measure("ReactDOMIDOperations","deletePropertyByID",function(e,t,n){var r=o.getNode(e);a(!l.hasOwnProperty(t),"updatePropertyByID(...): %s",l[t]),s.deleteValueForProperty(r,t,n)}),updateStylesByID:u.measure("ReactDOMIDOperations","updateStylesByID",function(e,t){var n=o.getNode(e);r.setValueForStyles(n,t)}),updateInnerHTMLByID:u.measure("ReactDOMIDOperations","updateInnerHTMLByID",function(e,t){var n=o.getNode(e);f(n,t)}),updateTextContentByID:u.measure("ReactDOMIDOperations","updateTextContentByID",function(e,t){var n=o.getNode(e);i.updateTextContent(n,t)}),dangerouslyReplaceNodeWithMarkupByID:u.measure("ReactDOMIDOperations","dangerouslyReplaceNodeWithMarkupByID",function(e,t){var n=o.getNode(e);i.dangerouslyReplaceNodeWithMarkup(n,t)}),dangerouslyProcessChildrenUpdates:u.measure("ReactDOMIDOperations","dangerouslyProcessChildrenUpdates",function(e,t){for(var n=0;n<e.length;n++)e[n].parentNode=o.getNode(e[n].parentID);i.processUpdates(e,t)})};t.exports=c},{"./CSSPropertyOperations":6,"./DOMChildrenOperations":11,"./DOMPropertyOperations":13,"./ReactMount":70,"./ReactPerf":75,"./invariant":140,"./setInnerHTML":154}],48:[function(e,t,n){var r=e("./EventConstants"),i=e("./LocalEventTrapMixin"),s=e("./ReactBrowserComponentMixin"),o=e("./ReactCompositeComponent"),u=e("./ReactElement"),a=e("./ReactDOM"),f=u.createFactory(a.img.type),l=o.createClass({displayName:"ReactDOMImg",tagName:"IMG",mixins:[s,i],render:function(){return f(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topLoad,"load"),this.trapBubbledEvent(r.topLevelTypes.topError,"error")}});t.exports=l},{"./EventConstants":17,"./LocalEventTrapMixin":27,"./ReactBrowserComponentMixin":32,"./ReactCompositeComponent":40,"./ReactDOM":43,"./ReactElement":58}],49:[function(e,t,n){function m(){this.isMounted()&&this.forceUpdate()}var r=e("./AutoFocusMixin"),i=e("./DOMPropertyOperations"),s=e("./LinkedValueUtils"),o=e("./ReactBrowserComponentMixin"),u=e("./ReactCompositeComponent"),a=e("./ReactElement"),f=e("./ReactDOM"),l=e("./ReactMount"),c=e("./ReactUpdates"),h=e("./Object.assign"),p=e("./invariant"),d=a.createFactory(f.input.type),v={},g=u.createClass({displayName:"ReactDOMInput",mixins:[r,s.Mixin,o],getInitialState:function(){var e=this.props.defaultValue;return{initialChecked:this.props.defaultChecked||!1,initialValue:e!=null?e:null}},render:function(){var e=h({},this.props);e.defaultChecked=null,e.defaultValue=null;var t=s.getValue(this);e.value=t!=null?t:this.state.initialValue;var n=s.getChecked(this);return e.checked=n!=null?n:this.state.initialChecked,e.onChange=this._handleChange,d(e,this.props.children)},componentDidMount:function(){var e=l.getID(this.getDOMNode());v[e]=this},componentWillUnmount:function(){var e=this.getDOMNode(),t=l.getID(e);delete v[t]},componentDidUpdate:function(e,t,n){var r=this.getDOMNode();this.props.checked!=null&&i.setValueForProperty(r,"checked",this.props.checked||!1);var o=s.getValue(this);o!=null&&i.setValueForProperty(r,"value",""+o)},_handleChange:function(e){var t,n=s.getOnChange(this);n&&(t=n.call(this,e)),c.asap(m,this);var r=this.props.name;if(this.props.type==="radio"&&r!=null){var i=this.getDOMNode(),o=i;while(o.parentNode)o=o.parentNode;var u=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]');for(var a=0,f=u.length;a<f;a++){var h=u[a];if(h===i||h.form!==i.form)continue;var d=l.getID(h);p(d,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");var g=v[d];p(g,"ReactDOMInput: Unknown radio button ID %s.",d),c.asap(m,g)}}return t}});t.exports=g},{"./AutoFocusMixin":2,"./DOMPropertyOperations":13,"./LinkedValueUtils":26,"./Object.assign":29,"./ReactBrowserComponentMixin":32,"./ReactCompositeComponent":40,"./ReactDOM":43,"./ReactElement":58,"./ReactMount":70,"./ReactUpdates":91,"./invariant":140}],50:[function(e,t,n){var r=e("./ReactBrowserComponentMixin"),i=e("./ReactCompositeComponent"),s=e("./ReactElement"),o=e("./ReactDOM"),u=e("./warning"),a=s.createFactory(o.option.type),f=i.createClass({displayName:"ReactDOMOption",mixins:[r],componentWillMount:function(){u(this.props.selected==null,"Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>.")},render:function(){return a(this.props,this.props.children)}});t.exports=f},{"./ReactBrowserComponentMixin":32,"./ReactCompositeComponent":40,"./ReactDOM":43,"./ReactElement":58,"./warning":160}],51:[function(e,t,n){function h(){this.isMounted()&&(this.setState({value:this._pendingValue}),this._pendingValue=0)}function p(e,t,n){if(e[t]==null)return;if(e.multiple){if(!Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be an array if "+"`multiple` is true.")}else if(Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be a scalar "+"value if `multiple` is false.")}function d(e,t){var n=e.props.multiple,r=t!=null?t:e.state.value,i=e.getDOMNode().options,s,o,u;if(n){s={};for(o=0,u=r.length;o<u;++o)s[""+r[o]]=!0}else s=""+r;for(o=0,u=i.length;o<u;o++){var a=n?s.hasOwnProperty(i[o].value):i[o].value===s;a!==i[o].selected&&(i[o].selected=a)}}var r=e("./AutoFocusMixin"),i=e("./LinkedValueUtils"),s=e("./ReactBrowserComponentMixin"),o=e("./ReactCompositeComponent"),u=e("./ReactElement"),a=e("./ReactDOM"),f=e("./ReactUpdates"),l=e("./Object.assign"),c=u.createFactory(a.select.type),v=o.createClass({displayName:"ReactDOMSelect",mixins:[r,i.Mixin,s],propTypes:{defaultValue:p,value:p},getInitialState:function(){return{value:this.props.defaultValue||(this.props.multiple?[]:"")}},componentWillMount:function(){this._pendingValue=null},componentWillReceiveProps:function(e){!this.props.multiple&&e.multiple?this.setState({value:[this.state.value]}):this.props.multiple&&!e.multiple&&this.setState({value:this.state.value[0]})},render:function(){var e=l({},this.props);return e.onChange=this._handleChange,e.value=null,c(e,this.props.children)},componentDidMount:function(){d(this,i.getValue(this))},componentDidUpdate:function(e){var t=i.getValue(this),n=!!e.multiple,r=!!this.props.multiple;(t!=null||n!==r)&&d(this,t)},_handleChange:function(e){var t,n=i.getOnChange(this);n&&(t=n.call(this,e));var r;if(this.props.multiple){r=[];var s=e.target.options;for(var o=0,u=s.length;o<u;o++)s[o].selected&&r.push(s[o].value)}else r=e.target.value;return this._pendingValue=r,f.asap(h,this),t}});t.exports=v},{"./AutoFocusMixin":2,"./LinkedValueUtils":26,"./Object.assign":29,"./ReactBrowserComponentMixin":32,"./ReactCompositeComponent":40,"./ReactDOM":43,"./ReactElement":58,"./ReactUpdates":91}],52:[function(e,t,n){function o(e,t,n,r){return e===n&&t===r}function u(e){var t=document.selection,n=t.createRange(),r=n.text.length,i=n.duplicate();i.moveToElementText(e),i.setEndPoint("EndToStart",n);var s=i.text.length,o=s+r;return{start:s,end:o}}function a(e){var t=window.getSelection&&window.getSelection();if(!t||t.rangeCount===0)return null;var n=t.anchorNode,r=t.anchorOffset,i=t.focusNode,s=t.focusOffset,u=t.getRangeAt(0),a=o(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),f=a?0:u.toString().length,l=u.cloneRange();l.selectNodeContents(e),l.setEnd(u.startContainer,u.startOffset);var c=o(l.startContainer,l.startOffset,l.endContainer,l.endOffset),h=c?0:l.toString().length,p=h+f,d=document.createRange();d.setStart(n,r),d.setEnd(i,s);var v=d.collapsed;return{start:v?p:h,end:v?h:p}}function f(e,t){var n=document.selection.createRange().duplicate(),r,i;typeof t.end=="undefined"?(r=t.start,i=r):t.start>t.end?(r=t.end,i=t.start):(r=t.start,i=t.end),n.moveToElementText(e),n.moveStart("character",r),n.setEndPoint("EndToStart",n),n.moveEnd("character",i-r),n.select()}function l(e,t){if(!window.getSelection)return;var n=window.getSelection(),r=e[s()].length,o=Math.min(t.start,r),u=typeof t.end=="undefined"?o:Math.min(t.end,r);if(!n.extend&&o>u){var a=u;u=o,o=a}var f=i(e,o),l=i(e,u);if(f&&l){var c=document.createRange();c.setStart(f.node,f.offset),n.removeAllRanges(),o>u?(n.addRange(c),n.extend(l.node,l.offset)):(c.setEnd(l.node,l.offset),n.addRange(c))}}var r=e("./ExecutionEnvironment"),i=e("./getNodeForCharacterOffset"),s=e("./getTextContentAccessor"),c=r.canUseDOM&&document.selection,h={getOffsets:c?u:a,setOffsets:c?f:l};t.exports=h},{"./ExecutionEnvironment":23,"./getNodeForCharacterOffset":133,"./getTextContentAccessor":135}],53:[function(e,t,n){function v(){this.isMounted()&&this.forceUpdate()}var r=e("./AutoFocusMixin"),i=e("./DOMPropertyOperations"),s=e("./LinkedValueUtils"),o=e("./ReactBrowserComponentMixin"),u=e("./ReactCompositeComponent"),a=e("./ReactElement"),f=e("./ReactDOM"),l=e("./ReactUpdates"),c=e("./Object.assign"),h=e("./invariant"),p=e("./warning"),d=a.createFactory(f.textarea.type),m=u.createClass({displayName:"ReactDOMTextarea",mixins:[r,s.Mixin,o],getInitialState:function(){var e=this.props.defaultValue,t=this.props.children;t!=null&&(p(!1,"Use the `defaultValue` or `value` props instead of setting children on <textarea>."),h(e==null,"If you supply `defaultValue` on a <textarea>, do not pass children."),Array.isArray(t)&&(h(t.length<=1,"<textarea> can only have at most one child."),t=t[0]),e=""+t),e==null&&(e="");var n=s.getValue(this);return{initialValue:""+(n!=null?n:e)}},render:function(){var e=c({},this.props);return h(e.dangerouslySetInnerHTML==null,"`dangerouslySetInnerHTML` does not make sense on <textarea>."),e.defaultValue=null,e.value=null,e.onChange=this._handleChange,d(e,this.state.initialValue)},componentDidUpdate:function(e,t,n){var r=s.getValue(this);if(r!=null){var o=this.getDOMNode();i.setValueForProperty(o,"value",""+r)}},_handleChange:function(e){var t,n=s.getOnChange(this);return n&&(t=n.call(this,e)),l.asap(v,this),t}});t.exports=m},{"./AutoFocusMixin":2,"./DOMPropertyOperations":13,"./LinkedValueUtils":26,"./Object.assign":29,"./ReactBrowserComponentMixin":32,"./ReactCompositeComponent":40,"./ReactDOM":43,"./ReactElement":58,"./ReactUpdates":91,"./invariant":140,"./warning":160}],54:[function(e,t,n){function l(){this.reinitializeTransaction()}var r=e("./ReactUpdates"),i=e("./Transaction"),s=e("./Object.assign"),o=e("./emptyFunction"),u={initialize:o,close:function(){h.isBatchingUpdates=!1}},a={initialize:o,close:r.flushBatchedUpdates.bind(r)},f=[a,u];s(l.prototype,i.Mixin,{getTransactionWrappers:function(){return f}});var c=new l,h={isBatchingUpdates:!1,batchedUpdates:function(e,t,n){var r=h.isBatchingUpdates;h.isBatchingUpdates=!0,r?e(t,n):c.perform(e,null,t,n)}};t.exports=h},{"./Object.assign":29,"./ReactUpdates":91,"./Transaction":107,"./emptyFunction":121}],55:[function(e,t,n){function _(){T.EventEmitter.injectReactEventListener(x),T.EventPluginHub.injectEventPluginOrder(u),T.EventPluginHub.injectInstanceHandle(N),T.EventPluginHub.injectMount(C),T.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:A,EnterLeaveEventPlugin:a,ChangeEventPlugin:i,CompositionEventPlugin:o,MobileSafariClickEventPlugin:c,SelectEventPlugin:k,BeforeInputEventPlugin:r}),T.NativeComponent.injectGenericComponentClass(v),T.NativeComponent.injectComponentClasses({button:m,form:g,img:y,input:b,option:w,select:E,textarea:S,html:M("html"),head:M("head"),body:M("body")}),T.CompositeComponent.injectMixin(h),T.DOMProperty.injectDOMPropertyConfig(l),T.DOMProperty.injectDOMPropertyConfig(O),T.EmptyComponent.injectEmptyComponent("noscript"),T.Updates.injectReconcileTransaction(p.ReactReconcileTransaction),T.Updates.injectBatchingStrategy(d),T.RootIndex.injectCreateReactRootIndex(f.canUseDOM?s.createReactRootIndex:L.createReactRootIndex),T.Component.injectEnvironment(p);var t=f.canUseDOM&&window.location.href||"";if(/[?&]react_perf\b/.test(t)){var n=e("./ReactDefaultPerf");n.start()}}var r=e("./BeforeInputEventPlugin"),i=e("./ChangeEventPlugin"),s=e("./ClientReactRootIndex"),o=e("./CompositionEventPlugin"),u=e("./DefaultEventPluginOrder"),a=e("./EnterLeaveEventPlugin"),f=e("./ExecutionEnvironment"),l=e("./HTMLDOMPropertyConfig"),c=e("./MobileSafariClickEventPlugin"),h=e("./ReactBrowserComponentMixin"),p=e("./ReactComponentBrowserEnvironment"),d=e("./ReactDefaultBatchingStrategy"),v=e("./ReactDOMComponent"),m=e("./ReactDOMButton"),g=e("./ReactDOMForm"),y=e("./ReactDOMImg"),b=e("./ReactDOMInput"),w=e("./ReactDOMOption"),E=e("./ReactDOMSelect"),S=e("./ReactDOMTextarea"),x=e("./ReactEventListener"),T=e("./ReactInjection"),N=e("./ReactInstanceHandles"),C=e("./ReactMount"),k=e("./SelectEventPlugin"),L=e("./ServerReactRootIndex"),A=e("./SimpleEventPlugin"),O=e("./SVGDOMPropertyConfig"),M=e("./createFullPageComponent");t.exports={inject:_}},{"./BeforeInputEventPlugin":3,"./ChangeEventPlugin":8,"./ClientReactRootIndex":9,"./CompositionEventPlugin":10,"./DefaultEventPluginOrder":15,"./EnterLeaveEventPlugin":16,"./ExecutionEnvironment":23,"./HTMLDOMPropertyConfig":24,"./MobileSafariClickEventPlugin":28,"./ReactBrowserComponentMixin":32,"./ReactComponentBrowserEnvironment":38,"./ReactDOMButton":44,"./ReactDOMComponent":45,"./ReactDOMForm":46,"./ReactDOMImg":48,"./ReactDOMInput":49,"./ReactDOMOption":50,"./ReactDOMSelect":51,"./ReactDOMTextarea":53,"./ReactDefaultBatchingStrategy":54,"./ReactDefaultPerf":56,"./ReactEventListener":63,"./ReactInjection":64,"./ReactInstanceHandles":66,"./ReactMount":70,"./SVGDOMPropertyConfig":92,"./SelectEventPlugin":93,"./ServerReactRootIndex":94,"./SimpleEventPlugin":95,"./createFullPageComponent":116}],56:[function(e,t,n){function a(e){return Math.floor(e*100)/100}function f(e,t,n){e[t]=(e[t]||0)+n}var r=e("./DOMProperty"),i=e("./ReactDefaultPerfAnalysis"),s=e("./ReactMount"),o=e("./ReactPerf"),u=e("./performanceNow"),l={_allMeasurements:[],_mountStack:[0],_injected:!1,start:function(){l._injected||o.injection.injectMeasure(l.measure),l._allMeasurements.length=0,o.enableMeasure=!0},stop:function(){o.enableMeasure=!1},getLastMeasurements:function(){return l._allMeasurements},printExclusive:function(e){e=e||l._allMeasurements;var t=i.getExclusiveSummary(e);console.table(t.map(function(e){return{"Component class name":e.componentName,"Total inclusive time (ms)":a(e.inclusive),"Exclusive mount time (ms)":a(e.exclusive),"Exclusive render time (ms)":a(e.render),"Mount time per instance (ms)":a(e.exclusive/e.count),"Render time per instance (ms)":a(e.render/e.count),Instances:e.count}}))},printInclusive:function(e){e=e||l._allMeasurements;var t=i.getInclusiveSummary(e);console.table(t.map(function(e){return{"Owner > component":e.componentName,"Inclusive time (ms)":a(e.time),Instances:e.count}})),console.log("Total time:",i.getTotalTime(e).toFixed(2)+" ms")},getMeasurementsSummaryMap:function(e){var t=i.getInclusiveSummary(e,!0);return t.map(function(e){return{"Owner > component":e.componentName,"Wasted time (ms)":e.time,Instances:e.count}})},printWasted:function(e){e=e||l._allMeasurements,console.table(l.getMeasurementsSummaryMap(e)),console.log("Total time:",i.getTotalTime(e).toFixed(2)+" ms")},printDOM:function(e){e=e||l._allMeasurements;var t=i.getDOMSummary(e);console.table(t.map(function(e){var t={};return t[r.ID_ATTRIBUTE_NAME]=e.id,t.type=e.type,t.args=JSON.stringify(e.args),t})),console.log("Total time:",i.getTotalTime(e).toFixed(2)+" ms")},_recordWrite:function(e,t,n,r){var i=l._allMeasurements[l._allMeasurements.length-1].writes;i[e]=i[e]||[],i[e].push({type:t,time:n,args:r})},measure:function(e,t,n){return function(){for(var r=[],i=0,o=arguments.length;i<o;i++)r.push(arguments[i]);var a,c,h;if(t==="_renderNewRootComponent"||t==="flushBatchedUpdates")return l._allMeasurements.push({exclusive:{},inclusive:{},render:{},counts:{},writes:{},displayNames:{},totalTime:0}),h=u(),c=n.apply(this,r),l._allMeasurements[l._allMeasurements.length-1].totalTime=u()-h,c;if(e==="ReactDOMIDOperations"||e==="ReactComponentBrowserEnvironment"){h=u(),c=n.apply(this,r),a=u()-h;if(t==="mountImageIntoNode"){var p=s.getID(r[1]);l._recordWrite(p,t,a,r[0])}else t==="dangerouslyProcessChildrenUpdates"?r[0].forEach(function(e){var t={};e.fromIndex!==null&&(t.fromIndex=e.fromIndex),e.toIndex!==null&&(t.toIndex=e.toIndex),e.textContent!==null&&(t.textContent=e.textContent),e.markupIndex!==null&&(t.markup=r[1][e.markupIndex]),l._recordWrite(e.parentID,e.type,a,t)}):l._recordWrite(r[0],t,a,Array.prototype.slice.call(r,1));return c}if(e!=="ReactCompositeComponent"||t!=="mountComponent"&&t!=="updateComponent"&&t!=="_renderValidatedComponent")return n.apply(this,r);var d=t==="mountComponent"?r[0]:this._rootNodeID,v=t==="_renderValidatedComponent",m=t==="mountComponent",g=l._mountStack,y=l._allMeasurements[l._allMeasurements.length-1];v?f(y.counts,d,1):m&&g.push(0),h=u(),c=n.apply(this,r),a=u()-h;if(v)f(y.render,d,a);else if(m){var b=g.pop();g[g.length-1]+=a,f(y.exclusive,d,a-b),f(y.inclusive,d,a)}else f(y.inclusive,d,a);return y.displayNames[d]={current:this.constructor.displayName,owner:this._owner?this._owner.constructor.displayName:"<root>"},c}}};t.exports=l},{"./DOMProperty":12,"./ReactDefaultPerfAnalysis":57,"./ReactMount":70,"./ReactPerf":75,"./performanceNow":153}],57:[function(e,t,n){function o(e){var t=0;for(var n=0;n<e.length;n++){var r=e[n];t+=r.totalTime}return t}function u(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n],i;for(i in r.writes)r.writes[i].forEach(function(e){t.push({id:i,type:s[e.type]||e.type,args:e.args})})}return t}function a(e){var t={},n;for(var s=0;s<e.length;s++){var o=e[s],u=r({},o.exclusive,o.inclusive);for(var a in u)n=o.displayNames[a].current,t[n]=t[n]||{componentName:n,inclusive:0,exclusive:0,render:0,count:0},o.render[a]&&(t[n].render+=o.render[a]),o.exclusive[a]&&(t[n].exclusive+=o.exclusive[a]),o.inclusive[a]&&(t[n].inclusive+=o.inclusive[a]),o.counts[a]&&(t[n].count+=o.counts[a])}var f=[];for(n in t)t[n].exclusive>=i&&f.push(t[n]);return f.sort(function(e,t){return t.exclusive-e.exclusive}),f}function f(e,t){var n={},s;for(var o=0;o<e.length;o++){var u=e[o],a=r({},u.exclusive,u.inclusive),f;t&&(f=l(u));for(var c in a){if(t&&!f[c])continue;var h=u.displayNames[c];s=h.owner+" > "+h.current,n[s]=n[s]||{componentName:s,time:0,count:0},u.inclusive[c]&&(n[s].time+=u.inclusive[c]),u.counts[c]&&(n[s].count+=u.counts[c])}}var p=[];for(s in n)n[s].time>=i&&p.push(n[s]);return p.sort(function(e,t){return t.time-e.time}),p}function l(e){var t={},n=Object.keys(e.writes),i=r({},e.exclusive,e.inclusive);for(var s in i){var o=!1;for(var u=0;u<n.length;u++)if(n[u].indexOf(s)===0){o=!0;break}!o&&e.counts[s]>0&&(t[s]=!0)}return t}var r=e("./Object.assign"),i=1.2,s={mountImageIntoNode:"set innerHTML",INSERT_MARKUP:"set innerHTML",MOVE_EXISTING:"move",REMOVE_NODE:"remove",TEXT_CONTENT:"set textContent",updatePropertyByID:"update attribute",deletePropertyByID:"delete attribute",updateStylesByID:"update styles",updateInnerHTMLByID:"set innerHTML",dangerouslyReplaceNodeWithMarkupByID:"replace"},c={getExclusiveSummary:a,getInclusiveSummary:f,getDOMSummary:u,getTotalTime:o};t.exports=c},{"./Object.assign":29}],58:[function(e,t,n){function u(e,t){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:function(){return this._store?this._store[t]:null},set:function(e){s(!1,"Don't set the "+t+" property of the component. "+"Mutate the existing props object instead."),this._store[t]=e}})}function f(e){try{var t={props:!0};for(var n in t)u(e,n);a=!0}catch(r){}}var r=e("./ReactContext"),i=e("./ReactCurrentOwner"),s=e("./warning"),o={key:!0,ref:!0},a=!1,l=function(e,t,n,r,i,s){this.type=e,this.key=t,this.ref=n,this._owner=r,this._context=i,this._store={validated:!1,props:s};if(a){Object.freeze(this);return}this.props=s};l.prototype={_isReactElement:!0},f(l.prototype),l.createElement=function(e,t,n){var u,a={},f=null,c=null;if(t!=null){c=t.ref===undefined?null:t.ref,s(t.key!==null,"createElement(...): Encountered component with a `key` of null. In a future version, this will be treated as equivalent to the string 'null'; instead, provide an explicit key or use undefined."),f=t.key==null?null:""+t.key;for(u in t)t.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(a[u]=t[u])}var h=arguments.length-2;if(h===1)a.children=n;else if(h>1){var p=Array(h);for(var d=0;d<h;d++)p[d]=arguments[d+2];a.children=p}if(e&&e.defaultProps){var v=e.defaultProps;for(u in v)typeof a[u]=="undefined"&&(a[u]=v[u])}return new l(e,f,c,i.current,r.current,a)},l.createFactory=function(e){var t=l.createElement.bind(null,e);return t.type=e,t},l.cloneAndReplaceProps=function(e,t){var n=new l(e.type,e.key,e.ref,e._owner,e._context,t);return n._store.validated=e._store.validated,n},l.isValidElement=function(e){var t=!!e&&!!e._isReactElement;return t},t.exports=l},{"./ReactContext":41,"./ReactCurrentOwner":42,"./warning":160}],59:[function(e,t,n){function h(){var e=s.current;return e&&e.constructor.displayName||undefined}function p(e,t){if(e._store.validated||e.key!=null)return;e._store.validated=!0,v("react_key_warning",'Each child in an array should have a unique "key" prop.',e,t)}function d(e,t,n){if(!c.test(e))return;v("react_numeric_key_warning","Child objects should have non-numeric keys so ordering is preserved.",t,n)}function v(e,t,n,r){var i=h(),u=r.displayName,f=i||u,l=a[e];if(l.hasOwnProperty(f))return;l[f]=!0,t+=i?" Check the render method of "+i+".":" Check the renderComponent call using <"+u+">.";var c=null;n._owner&&n._owner!==s.current&&(c=n._owner.constructor.displayName,t+=" It was passed a child from "+c+"."),t+=" See http://fb.me/react-warning-keys for more information.",o(e,{component:f,componentOwner:c}),console.warn(t)}function m(){var e=h()||"";if(f.hasOwnProperty(e))return;f[e]=!0,o("react_object_map_children")}function g(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++){var i=e[n];r.isValidElement(i)&&p(i,t)}else if(r.isValidElement(e))e._store.validated=!0;else if(e&&typeof e=="object"){m();for(var s in e)d(s,e[s],t)}}function y(e,t,n,r){for(var i in t)if(t.hasOwnProperty(i)){var s;try{s=t[i](n,i,e,r)}catch(u){s=u}s instanceof Error&&!(s.message in l)&&(l[s.message]=!0,o("react_failed_descriptor_type_check",{message:s.message}))}}var r=e("./ReactElement"),i=e("./ReactPropTypeLocations"),s=e("./ReactCurrentOwner"),o=e("./monitorCodeUse"),u=e("./warning"),a={react_key_warning:{},react_numeric_key_warning:{}},f={},l={},c=/^\d+$/,b={createElement:function(e,t,n){u(e!=null,"React.createElement: type should not be null or undefined. It should be a string (for DOM elements) or a ReactClass (for composite components).");var s=r.createElement.apply(this,arguments);if(s==null)return s;for(var o=2;o<arguments.length;o++)g(arguments[o],e);if(e){var a=e.displayName;e.propTypes&&y(a,e.propTypes,s.props,i.prop),e.contextTypes&&y(a,e.contextTypes,s._context,i.context)}return s},createFactory:function(e){var t=b.createElement.bind(null,e);return t.type=e,t}};t.exports=b},{"./ReactCurrentOwner":42,"./ReactElement":58,"./ReactPropTypeLocations":78,"./monitorCodeUse":150,"./warning":160}],60:[function(e,t,n){function a(){return i(s,"Trying to return null from a render, but no null placeholder component was injected."),s()}function f(e){o[e]=!0}function l(e){delete o[e]}function c(e){return o[e]}var r=e("./ReactElement"),i=e("./invariant"),s,o={},u={injectEmptyComponent:function(e){s=r.createFactory(e)}},h={deregisterNullComponentID:l,getEmptyComponent:a,injection:u,isNullComponentID:c,registerNullComponentID:f};t.exports=h},{"./ReactElement":58,"./invariant":140}],61:[function(e,t,n){var r={guard:function(e,t){return e}};t.exports=r},{}],62:[function(e,t,n){function i(e){r.enqueueEvents(e),r.processEventQueue()}var r=e("./EventPluginHub"),s={handleTopLevel:function(e,t,n,s){var o=r.extractEvents(e,t,n,s);i(o)}};t.exports=s},{"./EventPluginHub":19}],63:[function(e,t,n){function h(e){var t=u.getID(e),n=o.getReactRootIDFromNodeID(t),r=u.findReactContainerForID(n),i=u.getFirstReactDOM(r);return i}function p(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function d(e){var t=u.getFirstReactDOM(l(e.nativeEvent))||window,n=t;while(n)e.ancestors.push(n),n=h(n);for(var r=0,i=e.ancestors.length;r<i;r++){t=e.ancestors[r];var s=u.getID(t)||"";m._handleTopLevel(e.topLevelType,t,s,e.nativeEvent)}}function v(e){var t=c(window);e(t)}var r=e("./EventListener"),i=e("./ExecutionEnvironment"),s=e("./PooledClass"),o=e("./ReactInstanceHandles"),u=e("./ReactMount"),a=e("./ReactUpdates"),f=e("./Object.assign"),l=e("./getEventTarget"),c=e("./getUnboundedScrollPosition");f(p.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),s.addPoolingTo(p,s.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:i.canUseDOM?window:null,setHandleTopLevel:function(e){m._handleTopLevel=e},setEnabled:function(e){m._enabled=!!e},isEnabled:function(){return m._enabled},trapBubbledEvent:function(e,t,n){var i=n;if(!i)return;return r.listen(i,t,m.dispatchEvent.bind(null,e))},trapCapturedEvent:function(e,t,n){var i=n;if(!i)return;return r.capture(i,t,m.dispatchEvent.bind(null,e))},monitorScrollValue:function(e){var t=v.bind(null,e);r.listen(window,"scroll",t),r.listen(window,"resize",t)},dispatchEvent:function(e,t){if(!m._enabled)return;var n=p.getPooled(e,t);try{a.batchedUpdates(d,n)}finally{p.release(n)}}};t.exports=m},{"./EventListener":18,"./ExecutionEnvironment":23,"./Object.assign":29,"./PooledClass":30,"./ReactInstanceHandles":66,"./ReactMount":70,"./ReactUpdates":91,"./getEventTarget":131,"./getUnboundedScrollPosition":136}],64:[function(e,t,n){var r=e("./DOMProperty"),i=e("./EventPluginHub"),s=e("./ReactComponent"),o=e("./ReactCompositeComponent"),u=e("./ReactEmptyComponent"),a=e("./ReactBrowserEventEmitter"),f=e("./ReactNativeComponent"),l=e("./ReactPerf"),c=e("./ReactRootIndex"),h=e("./ReactUpdates"),p={Component:s.injection,CompositeComponent:o.injection,DOMProperty:r.injection,EmptyComponent:u.injection,EventPluginHub:i.injection,EventEmitter:a.injection,NativeComponent:f.injection,Perf:l.injection,RootIndex:c.injection,Updates:h.injection};t.exports=p},{"./DOMProperty":12,"./EventPluginHub":19,"./ReactBrowserEventEmitter":33,"./ReactComponent":37,"./ReactCompositeComponent":40,"./ReactEmptyComponent":60,"./ReactNativeComponent":73,"./ReactPerf":75,"./ReactRootIndex":82,"./ReactUpdates":91}],65:[function(e,t,n){function u(e){return i(document.documentElement,e)}var r=e("./ReactDOMSelection"),i=e("./containsNode"),s=e("./focusNode"),o=e("./getActiveElement"),a={hasSelectionCapabilities:function(e){return e&&(e.nodeName==="INPUT"&&e.type==="text"||e.nodeName==="TEXTAREA"||e.contentEditable==="true")},getSelectionInformation:function(){var e=o();return{focusedElem:e,selectionRange:a.hasSelectionCapabilities(e)?a.getSelection(e):null}},restoreSelection:function(e){var t=o(),n=e.focusedElem,r=e.selectionRange;t!==n&&u(n)&&(a.hasSelectionCapabilities(n)&&a.setSelection(n,r),s(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName==="INPUT"){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=r.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,i=t.end;typeof i=="undefined"&&(i=n);if("selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(i,e.value.length);else if(document.selection&&e.nodeName==="INPUT"){var s=e.createTextRange();s.collapse(!0),s.moveStart("character",n),s.moveEnd("character",i-n),s.select()}else r.setOffsets(e,t)}};t.exports=a},{"./ReactDOMSelection":52,"./containsNode":114,"./focusNode":125,"./getActiveElement":127}],66:[function(e,t,n){function a(e){return s+e.toString(36)}function f(e,t){return e.charAt(t)===s||t===e.length}function l(e){return e===""||e.charAt(0)===s&&e.charAt(e.length-1)!==s}function c(e,t){return t.indexOf(e)===0&&f(t,e.length)}function h(e){return e?e.substr(0,e.lastIndexOf(s)):""}function p(e,t){i(l(e)&&l(t),"getNextDescendantID(%s, %s): Received an invalid React DOM ID.",e,t),i(c(e,t),"getNextDescendantID(...): React has made an invalid assumption about the DOM hierarchy. Expected `%s` to be an ancestor of `%s`.",e,t);if(e===t)return e;var n=e.length+o;for(var r=n;r<t.length;r++)if(f(t,r))break;return t.substr(0,r)}function d(e,t){var n=Math.min(e.length,t.length);if(n===0)return"";var r=0;for(var s=0;s<=n;s++)if(f(e,s)&&f(t,s))r=s;else if(e.charAt(s)!==t.charAt(s))break;var o=e.substr(0,r);return i(l(o),"getFirstCommonAncestorID(%s, %s): Expected a valid React DOM ID: %s",e,t,o),o}function v(e,t,n,r,s,o){e=e||"",t=t||"",i(e!==t,"traverseParentPath(...): Cannot traverse from and to the same ID, `%s`.",e);var a=c(t,e);i(a||c(e,t),"traverseParentPath(%s, %s, ...): Cannot traverse from two IDs that do not have a parent path.",e,t);var f=0,l=a?h:p;for(var d=e;;d=l(d,t)){var v;(!s||d!==e)&&(!o||d!==t)&&(v=n(d,a,r));if(v===!1||d===t)break;i(f++<u,"traverseParentPath(%s, %s, ...): Detected an infinite loop while traversing the React DOM ID tree. This may be due to malformed IDs: %s",e,t)}}var r=e("./ReactRootIndex"),i=e("./invariant"),s=".",o=s.length,u=100,m={createReactRootID:function(){return a(r.createReactRootIndex())},createReactID:function(e,t){return e+t},getReactRootIDFromNodeID:function(e){if(e&&e.charAt(0)===s&&e.length>1){var t=e.indexOf(s,1);return t>-1?e.substr(0,t):e}return null},traverseEnterLeave:function(e,t,n,r,i){var s=d(e,t);s!==e&&v(e,s,n,r,!1,!0),s!==t&&v(s,t,n,i,!0,!1)},traverseTwoPhase:function(e,t,n){e&&(v("",e,t,n,!0,!1),v(e,"",t,n,!1,!0))},traverseAncestors:function(e,t,n){v("",e,t,n,!0,!1)},_getFirstCommonAncestorID:d,_getNextDescendantID:p,isAncestorIDOf:c,SEPARATOR:s};t.exports=m},{"./ReactRootIndex":82,"./invariant":140}],67:[function(e,t,n){function a(){if(!d._isLegacyCallWarningEnabled)return;var e=r.current,t=e&&e.constructor?e.constructor.displayName:"";t||(t="Something");if(u.hasOwnProperty(t))return;u[t]=!0,o(!1,t+" is calling a React component directly. "+"Use a factory or JSX instead. See: http://fb.me/react-legacyfactory"),s("react_legacy_factory_call",{version:3,name:t})}function f(e){var t=e.prototype&&typeof e.prototype.mountComponent=="function"&&typeof e.prototype.receiveComponent=="function";if(t)o(!1,"Did not expect to get a React class here. Use `Component` instead of `Component.type` or `this.constructor`.");else{if(!e._reactWarnedForThisType){try{e._reactWarnedForThisType=!0}catch(n){}s("react_non_component_in_jsx",{version:3,name:e.name})}o(!1,"This JSX uses a plain function. Only React components are valid in React's JSX transform.")}}function l(e){o(!1,"Do not pass React.DOM."+e.type+" to JSX or createFactory. "+'Use the string "'+e.type+'" instead.')}function c(e,t){if(typeof t!="function")return;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];if(typeof r=="function"){var i=r.bind(t);for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s]);e[n]=i}else e[n]=r}}var r=e("./ReactCurrentOwner"),i=e("./invariant"),s=e("./monitorCodeUse"),o=e("./warning"),u={},h={},p={},d={};d.wrapCreateFactory=function(e){var t=function(t){return typeof t!="function"?e(t):t.isReactNonLegacyFactory?(l(t),e(t.type)):t.isReactLegacyFactory?e(t.type):(f(t),t)};return t},d.wrapCreateElement=function(e){var t=function(t,n,r){if(typeof t!="function")return e.apply(this,arguments);var i;return t.isReactNonLegacyFactory?(l(t),i=Array.prototype.slice.call(arguments,0),i[0]=t.type,e.apply(this,i)):t.isReactLegacyFactory?(t._isMockFunction&&(t.type._mockedReactClassConstructor=t),i=Array.prototype.slice.call(arguments,0),i[0]=t.type,e.apply(this,i)):(f(t),t.apply(null,Array.prototype.slice.call(arguments,1)))};return t},d.wrapFactory=function(e){i(typeof e=="function","This is suppose to accept a element factory");var t=function(t,n){return a(),e.apply(this,arguments)};return c(t,e.type),t.isReactLegacyFactory=h,t.type=e.type,t},d.markNonLegacyFactory=function(e){return e.isReactNonLegacyFactory=p,e},d.isValidFactory=function(e){return typeof e=="function"&&e.isReactLegacyFactory===h},d.isValidClass=function(e){return o(!1,"isValidClass is deprecated and will be removed in a future release. Use a more specific validator instead."),d.isValidFactory(e)},d._isLegacyCallWarningEnabled=!0,t.exports=d},{"./ReactCurrentOwner":42,"./invariant":140,"./monitorCodeUse":150,"./warning":160}],68:[function(e,t,n){function i(e,t){this.value=e,this.requestChange=t}function s(e){var t={value:typeof e=="undefined"?r.PropTypes.any.isRequired:e.isRequired,requestChange:r.PropTypes.func.isRequired};return r.PropTypes.shape(t)}var r=e("./React");i.PropTypes={link:s},t.exports=i},{"./React":31}],69:[function(e,t,n){var r=e("./adler32"),i={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=r(e);return e.replace(">"," "+i.CHECKSUM_ATTR_NAME+'="'+t+'">')},canReuseMarkup:function(e,t){var n=t.getAttribute(i.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var s=r(e);return s===n}};t.exports=i},{"./adler32":110}],70:[function(e,t,n){function k(e){var t=h(e);return t&&j.getID(t)}function L(e){var t=A(e);if(t)if(w.hasOwnProperty(t)){var n=w[t];n!==e&&(d(!_(n,t),"ReactMount: Two valid but unequal nodes with the same `%s`: %s",b,t),w[t]=e)}else w[t]=e;return t}function A(e){return e&&e.getAttribute&&e.getAttribute(b)||""}function O(e,t){var n=A(e);n!==t&&delete w[n],e.setAttribute(b,t),w[t]=e}function M(e){if(!w.hasOwnProperty(e)||!_(w[e],e))w[e]=j.findReactNodeByID(e);return w[e]}function _(e,t){if(e){d(A(e)===t,"ReactMount: Unexpected modification of `%s`",b);var n=j.findReactContainerForID(t);if(n&&l(n,e))return!0}return!1}function D(e){delete w[e]}function H(e){var t=w[e];if(!t||!_(t,e))return!1;P=t}function B(e){P=null,a.traverseAncestors(e,H);var t=P;return P=null,t}var r=e("./DOMProperty"),i=e("./ReactBrowserEventEmitter"),s=e("./ReactCurrentOwner"),o=e("./ReactElement"),u=e("./ReactLegacyElement"),a=e("./ReactInstanceHandles"),f=e("./ReactPerf"),l=e("./containsNode"),c=e("./deprecated"),h=e("./getReactRootElementInContainer"),p=e("./instantiateReactComponent"),d=e("./invariant"),v=e("./shouldUpdateReactComponent"),m=e("./warning"),g=u.wrapCreateElement(o.createElement),y=a.SEPARATOR,b=r.ID_ATTRIBUTE_NAME,w={},E=1,S=9,x={},T={},N={},C=[],P=null,j={_instancesByReactRootID:x,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,r){var i=t.props;return j.scrollMonitor(n,function(){e.replaceProps(i,r)}),N[k(n)]=h(n),e},_registerComponent:function(e,t){d(t&&(t.nodeType===E||t.nodeType===S),"_registerComponent(...): Target container is not a DOM element."),i.ensureScrollValueMonitoring();var n=j.registerContainer(t);return x[n]=e,n},_renderNewRootComponent:f.measure("ReactMount","_renderNewRootComponent",function(e,t,n){m(s.current==null,"_renderNewRootComponent(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.");var r=p(e,null),i=j._registerComponent(r,t);return r.mountComponentIntoNode(i,t,n),N[i]=h(t),r}),render:function(e,t,n){d(o.isValidElement(e),"renderComponent(): Invalid component element.%s",typeof e=="string"?" Instead of passing an element string, make sure to instantiate it by passing it to React.createElement.":u.isValidFactory(e)?" Instead of passing a component class, make sure to instantiate it by passing it to React.createElement.":typeof e.props!="undefined"?" This may be caused by unintentionally loading two independent copies of React.":"");var r=x[k(t)];if(r){var i=r._currentElement;if(v(i,e))return j._updateRootComponent(r,e,t,n);j.unmountComponentAtNode(t)}var s=h(t),a=s&&j.isRenderedByReact(s),f=a&&!r,l=j._renderNewRootComponent(e,t,f);return n&&n.call(l),l},constructAndRenderComponent:function(e,t,n){var r=g(e,t);return j.render(r,n)},constructAndRenderComponentByID:function(e,t,n){var r=document.getElementById(n);return d(r,'Tried to get element with id of "%s" but it is not present on the page.',n),j.constructAndRenderComponent(e,t,r)},registerContainer:function(e){var t=k(e);return t&&(t=a.getReactRootIDFromNodeID(t)),t||(t=a.createReactRootID()),T[t]=e,t},unmountComponentAtNode:function(e){m(s.current==null,"unmountComponentAtNode(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.");var t=k(e),n=x[t];return n?(j.unmountComponentFromNode(n,e),delete x[t],delete T[t],delete N[t],!0):!1},unmountComponentFromNode:function(e,t){e.unmountComponent(),t.nodeType===S&&(t=t.documentElement);while(t.lastChild)t.removeChild(t.lastChild)},findReactContainerForID:function(e){var t=a.getReactRootIDFromNodeID(e),n=T[t],r=N[t];if(r&&r.parentNode!==n){d(A(r)===t,"ReactMount: Root element ID differed from reactRootID.");var i=n.firstChild;i&&t===A(i)?N[t]=i:console.warn("ReactMount: Root element has been removed from its original container. New container:",r.parentNode)}return n},findReactNodeByID:function(e){var t=j.findReactContainerForID(e);return j.findComponentRoot(t,e)},isRenderedByReact:function(e){if(e.nodeType!==1)return!1;var t=j.getID(e);return t?t.charAt(0)===y:!1},getFirstReactDOM:function(e){var t=e;while(t&&t.parentNode!==t){if(j.isRenderedByReact(t))return t;t=t.parentNode}return null},findComponentRoot:function(e,t){var n=C,r=0,i=B(t)||e;n[0]=i.firstChild,n.length=1;while(r<n.length){var s=n[r++],o;while(s){var u=j.getID(s);u?t===u?o=s:a.isAncestorIDOf(u,t)&&(n.length=r=0,n.push(s.firstChild)):n.push(s.firstChild),s=s.nextSibling}if(o)return n.length=0,o}n.length=0,d(!1,"findComponentRoot(..., %s): Unable to find element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting tags like <form>, <p>, or <a>, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",t,j.getID(e))},getReactRootID:k,getID:L,setID:O,getNode:M,purgeID:D};j.renderComponent=c("ReactMount","renderComponent","render",this,j.render),t.exports=j},{"./DOMProperty":12,"./ReactBrowserEventEmitter":33,"./ReactCurrentOwner":42,"./ReactElement":58,"./ReactInstanceHandles":66,"./ReactLegacyElement":67,"./ReactPerf":75,"./containsNode":114,"./deprecated":120,"./getReactRootElementInContainer":134,"./instantiateReactComponent":139,"./invariant":140,"./shouldUpdateReactComponent":156,"./warning":160}],71:[function(e,t,n){function c(e,t,n){f.push({parentID:e,parentNode:null,type:i.INSERT_MARKUP,markupIndex:l.push(t)-1,textContent:null,fromIndex:null,toIndex:n})}function h(e,t,n){f.push({parentID:e,parentNode:null,type:i.MOVE_EXISTING,markupIndex:null,textContent:null,fromIndex:t,toIndex:n})}function p(e,t){f.push({parentID:e,parentNode:null,type:i.REMOVE_NODE,markupIndex:null,textContent:null,fromIndex:t,toIndex:null})}function d(e,t){f.push({parentID:e,parentNode:null,type:i.TEXT_CONTENT,markupIndex:null,textContent:t,fromIndex:null,toIndex:null})}function v(){f.length&&(r.BackendIDOperations.dangerouslyProcessChildrenUpdates(f,l),m())}function m(){f.length=0,l.length=0}var r=e("./ReactComponent"),i=e("./ReactMultiChildUpdateTypes"),s=e("./flattenChildren"),o=e("./instantiateReactComponent"),u=e("./shouldUpdateReactComponent"),a=0,f=[],l=[],g={Mixin:{mountChildren:function(e,t){var n=s(e),r=[],i=0;this._renderedChildren=n;for(var u in n){var a=n[u];if(n.hasOwnProperty(u)){var f=o(a,null);n[u]=f;var l=this._rootNodeID+u,c=f.mountComponent(l,t,this._mountDepth+1);f._mountIndex=i,r.push(c),i++}}return r},updateTextContent:function(e){a++;var t=!0;try{var n=this._renderedChildren;for(var r in n)n.hasOwnProperty(r)&&this._unmountChildByName(n[r],r);this.setTextContent(e),t=!1}finally{a--,a||(t?m():v())}},updateChildren:function(e,t){a++;var n=!0;try{this._updateChildren(e,t),n=!1}finally{a--,a||(n?m():v())}},_updateChildren:function(e,t){var n=s(e),r=this._renderedChildren;if(!n&&!r)return;var i,a=0,f=0;for(i in n){if(!n.hasOwnProperty(i))continue;var l=r&&r[i],c=l&&l._currentElement,h=n[i];if(u(c,h))this.moveChild(l,f,a),a=Math.max(l._mountIndex,a),l.receiveComponent(h,t),l._mountIndex=f;else{l&&(a=Math.max(l._mountIndex,a),this._unmountChildByName(l,i));var p=o(h,null);this._mountChildByNameAtIndex(p,i,f,t)}f++}for(i in r)r.hasOwnProperty(i)&&(!n||!n[i])&&this._unmountChildByName(r[i],i)},unmountChildren:function(){var e=this._renderedChildren;for(var t in e){var n=e[t];n.unmountComponent&&n.unmountComponent()}this._renderedChildren=null},moveChild:function(e,t,n){e._mountIndex<n&&h(this._rootNodeID,e._mountIndex,t)},createChild:function(e,t){c(this._rootNodeID,t,e._mountIndex)},removeChild:function(e){p(this._rootNodeID,e._mountIndex)},setTextContent:function(e){d(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,t,n,r){var i=this._rootNodeID+t,s=e.mountComponent(i,r,this._mountDepth+1);e._mountIndex=n,this.createChild(e,s),this._renderedChildren=this._renderedChildren||{},this._renderedChildren[t]=e},_unmountChildByName:function(e,t){this.removeChild(e),e._mountIndex=null,e.unmountComponent(),delete this._renderedChildren[t]}}};t.exports=g},{"./ReactComponent":37,"./ReactMultiChildUpdateTypes":72,"./flattenChildren":124,"./instantiateReactComponent":139,"./shouldUpdateReactComponent":156}],72:[function(e,t,n){var r=e("./keyMirror"),i=r({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,TEXT_CONTENT:null});t.exports=i},{"./keyMirror":146}],73:[function(e,t,n){function a(e,t,n){var r=o[e];return r==null?(i(s,"There is no registered component for the tag %s",e),new s(e,t)):n===e?(i(s,"There is no registered component for the tag %s",e),new s(e,t)):new r.type(t)}var r=e("./Object.assign"),i=e("./invariant"),s=null,o={},u={injectGenericComponentClass:function(e){s=e},injectComponentClasses:function(e){r(o,e)}},f={createInstanceForTag:a,injection:u};t.exports=f},{"./Object.assign":29,"./invariant":140}],74:[function(e,t,n){var r=e("./emptyObject"),i=e("./invariant"),s={isValidOwner:function(e){return!!e&&typeof e.attachRef=="function"&&typeof e.detachRef=="function"},addComponentAsRefTo:function(e,t,n){i(s.isValidOwner(n),"addComponentAsRefTo(...): Only a ReactOwner can have refs. This usually means that you're trying to add a ref to a component that doesn't have an owner (that is, was not created inside of another component's `render` method). Try rendering this component inside of a new top-level component which will hold the ref."),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){i(s.isValidOwner(n),"removeComponentAsRefFrom(...): Only a ReactOwner can have refs. This usually means that you're trying to remove a ref to a component that doesn't have an owner (that is, was not created inside of another component's `render` method). Try rendering this component inside of a new top-level component which will hold the ref."),n.refs[t]===e&&n.detachRef(t)},Mixin:{construct:function(){this.refs=r},attachRef:function(e,t){i(t.isOwnedBy(this),"attachRef(%s, ...): Only a component's owner can store a ref to it.",e);var n=this.refs===r?this.refs={}:this.refs;n[e]=t},detachRef:function(e){delete this.refs[e]}}};t.exports=s},{"./emptyObject":122,"./invariant":140}],75:[function(e,t,n){function i(e,t,n){return n}var r={enableMeasure:!1,storedMeasure:i,measure:function(e,t,n){var i=null,s=function(){return r.enableMeasure?(i||(i=r.storedMeasure(e,t,n)),i.apply(this,arguments)):n.apply(this,arguments)};return s.displayName=e+"_"+t,s},injection:{injectMeasure:function(e){r.storedMeasure=e}}};t.exports=r},{}],76:[function(e,t,n){function f(e){return function(t,n,r){t.hasOwnProperty(n)?t[n]=e(t[n],r):t[n]=r}}function h(e,t){for(var n in t){if(!t.hasOwnProperty(n))continue;var r=c[n];r&&c.hasOwnProperty(n)?r(e,n,t[n]):e.hasOwnProperty(n)||(e[n]=t[n])}return e}var r=e("./Object.assign"),i=e("./emptyFunction"),s=e("./invariant"),o=e("./joinClasses"),u=e("./warning"),a=!1,l=f(function(e,t){return r({},t,e)}),c={children:i,className:f(o),style:l},p={TransferStrategies:c,mergeProps:function(e,t){return h(r({},e),t)},Mixin:{transferPropsTo:function(e){return s(e._owner===this,"%s: You can't call transferPropsTo() on a component that you don't own, %s. This usually means you are calling transferPropsTo() on a component passed in as props or children.",this.constructor.displayName,typeof e.type=="string"?e.type:e.type.displayName),a||(a=!0,u(!1,"transferPropsTo is deprecated. See http://fb.me/react-transferpropsto for more information.")),h(e.props,this.props),e}}};t.exports=p},{"./Object.assign":29,"./emptyFunction":121,"./invariant":140,"./joinClasses":145,"./warning":160}],77:[function(e,t,n){var r={};r={prop:"prop",context:"context",childContext:"child context"},t.exports=r},{}],78:[function(e,t,n){var r=e("./keyMirror"),i=r({prop:null,context:null,childContext:null});t.exports=i},{"./keyMirror":146}],79:[function(e,t,n){function c(e){function t(t,n,r,s,o){s=s||u;if(n[r]!=null)return e(n,r,s,o);var a=i[o];if(t)return new Error("Required "+a+" `"+r+"` was not specified in "+("`"+s+"`."))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function h(e){function t(t,n,r,s){var o=t[n],u=x(o);if(u!==e){var a=i[s],f=T(o);return new Error("Invalid "+a+" `"+n+"` of type `"+f+"` "+("supplied to `"+r+"`, expected `"+e+"`."))}}return c(t)}function p(){return c(o.thatReturns())}function d(e){function t(t,n,r,s){var o=t[n];if(!Array.isArray(o)){var u=i[s],a=x(o);return new Error("Invalid "+u+" `"+n+"` of type "+("`"+a+"` supplied to `"+r+"`, expected an array."))}for(var f=0;f<o.length;f++){var l=e(o,f,r,s);if(l instanceof Error)return l}}return c(t)}function v(){function e(e,t,n,s){if(!r.isValidElement(e[t])){var o=i[s];return new Error("Invalid "+o+" `"+t+"` supplied to "+("`"+n+"`, expected a ReactElement."))}}return c(e)}function m(e){function t(t,n,r,s){if(!(t[n]instanceof e)){var o=i[s],a=e.name||u;return new Error("Invalid "+o+" `"+n+"` supplied to "+("`"+r+"`, expected instance of `"+a+"`."))}}return c(t)}function g(e){function t(t,n,r,s){var o=t[n];for(var u=0;u<e.length;u++)if(o===e[u])return;var a=i[s],f=JSON.stringify(e);return new Error("Invalid "+a+" `"+n+"` of value `"+o+"` "+("supplied to `"+r+"`, expected one of "+f+"."))}return c(t)}function y(e){function t(t,n,r,s){var o=t[n],u=x(o);if(u!=="object"){var a=i[s];return new Error("Invalid "+a+" `"+n+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an object."))}for(var f in o)if(o.hasOwnProperty(f)){var l=e(o,f,r,s);if(l instanceof Error)return l}}return c(t)}function b(e){function t(t,n,r,s){for(var o=0;o<e.length;o++){var u=e[o];if(u(t,n,r,s)==null)return}var a=i[s];return new Error("Invalid "+a+" `"+n+"` supplied to "+("`"+r+"`."))}return c(t)}function w(){function e(e,t,n,r){if(!S(e[t])){var s=i[r];return new Error("Invalid "+s+" `"+t+"` supplied to "+("`"+n+"`, expected a ReactNode."))}}return c(e)}function E(e){function t(t,n,r,s){var o=t[n],u=x(o);if(u!=="object"){var a=i[s];return new Error("Invalid "+a+" `"+n+"` of type `"+u+"` "+("supplied to `"+r+"`, expected `object`."))}for(var f in e){var l=e[f];if(!l)continue;var c=l(o,f,r,s);if(c)return c}}return c(t,"expected `object`")}function S(e){switch(typeof e){case"number":case"string":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(S);if(r.isValidElement(e))return!0;for(var t in e)if(!S(e[t]))return!1;return!0;default:return!1}}function x(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":t}function T(e){var t=x(e);if(t==="object"){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}var r=e("./ReactElement"),i=e("./ReactPropTypeLocationNames"),s=e("./deprecated"),o=e("./emptyFunction"),u="<<anonymous>>",a=v(),f=w(),l={array:h("array"),bool:h("boolean"),func:h("function"),number:h("number"),object:h("object"),string:h("string"),any:p(),arrayOf:d,element:a,instanceOf:m,node:f,objectOf:y,oneOf:g,oneOfType:b,shape:E,component:s("React.PropTypes","component","element",this,a),renderable:s("React.PropTypes","renderable","node",this,f)};t.exports=l},{"./ReactElement":58,"./ReactPropTypeLocationNames":77,"./deprecated":120,"./emptyFunction":121}],80:[function(e,t,n){function o(){this.listenersToPut=[]}var r=e("./PooledClass"),i=e("./ReactBrowserEventEmitter"),s=e("./Object.assign");s(o.prototype,{enqueuePutListener:function(e,t,n){this.listenersToPut.push({rootNodeID:e,propKey:t,propValue:n})},putListeners:function(){for(var e=0;e<this.listenersToPut.length;e++){var t=this.listenersToPut[e];i.putListener(t.rootNodeID,t.propKey,t.propValue)}},reset:function(){this.listenersToPut.length=0},destructor:function(){this.reset()}}),r.addPoolingTo(o),t.exports=o},{"./Object.assign":29,"./PooledClass":30,"./ReactBrowserEventEmitter":33}],81:[function(e,t,n){function v(){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=r.getPooled(null),this.putListenerQueue=u.getPooled()}var r=e("./CallbackQueue"),i=e("./PooledClass"),s=e("./ReactBrowserEventEmitter"),o=e("./ReactInputSelection"),u=e("./ReactPutListenerQueue"),a=e("./Transaction"),f=e("./Object.assign"),l={initialize:o.getSelectionInformation,close:o.restoreSelection},c={initialize:function(){var e=s.isEnabled();return s.setEnabled(!1),e},close:function(e){s.setEnabled(e)}},h={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},p={initialize:function(){this.putListenerQueue.reset()},close:function(){this.putListenerQueue.putListeners()}},d=[p,l,c,h],m={getTransactionWrappers:function(){return d},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){r.release(this.reactMountReady),this.reactMountReady=null,u.release(this.putListenerQueue),this.putListenerQueue=null}};f(v.prototype,a.Mixin,m),i.addPoolingTo(v),t.exports=v},{"./CallbackQueue":7,"./Object.assign":29,"./PooledClass":30,"./ReactBrowserEventEmitter":33,"./ReactInputSelection":65,"./ReactPutListenerQueue":80,"./Transaction":107}],82:[function(e,t,n){var r={injectCreateReactRootIndex:function(e){i.createReactRootIndex=e}},i={createReactRootIndex:null,injection:r};t.exports=i},{}],83:[function(e,t,n){function f(e){a(r.isValidElement(e),"renderToString(): You must pass a valid ReactElement.");var t;try{var n=i.createReactRootID();return t=o.getPooled(!1),t.perform(function(){var r=u(e,null),i=r.mountComponent(n,t,0);return s.addChecksumToMarkup(i)},null)}finally{o.release(t)}}function l(e){a(r.isValidElement(e),"renderToStaticMarkup(): You must pass a valid ReactElement.");var t;try{var n=i.createReactRootID();return t=o.getPooled(!0),t.perform(function(){var r=u(e,null);return r.mountComponent(n,t,0)},null)}finally{o.release(t)}}var r=e("./ReactElement"),i=e("./ReactInstanceHandles"),s=e("./ReactMarkupChecksum"),o=e("./ReactServerRenderingTransaction"),u=e("./instantiateReactComponent"),a=e("./invariant");t.exports={renderToString:f,renderToStaticMarkup:l}},{"./ReactElement":58,"./ReactInstanceHandles":66,"./ReactMarkupChecksum":69,"./ReactServerRenderingTransaction":84,"./instantiateReactComponent":139,"./invariant":140}],84:[function(e,t,n){function h(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.reactMountReady=i.getPooled(null),this.putListenerQueue=s.getPooled()}var r=e("./PooledClass"),i=e("./CallbackQueue"),s=e("./ReactPutListenerQueue"),o=e("./Transaction"),u=e("./Object.assign"),a=e("./emptyFunction"),f={initialize:function(){this.reactMountReady.reset()},close:a},l={initialize:function(){this.putListenerQueue.reset()},close:a},c=[l,f],p={getTransactionWrappers:function(){return c},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){i.release(this.reactMountReady),this.reactMountReady=null,s.release(this.putListenerQueue),this.putListenerQueue=null}};u(h.prototype,o.Mixin,p),r.addPoolingTo(h),t.exports=h},{"./CallbackQueue":7,"./Object.assign":29,"./PooledClass":30,"./ReactPutListenerQueue":80,"./Transaction":107,"./emptyFunction":121}],85:[function(e,t,n){function i(e,t){var n={};return function(i){n[t]=i,e.setState(n)}}var r={createStateSetter:function(e,t){return function(n,r,i,s,o,u){var a=t.call(e,n,r,i,s,o,u);a&&e.setState(a)}},createStateKeySetter:function(e,t){var n=e.__keySetters||(e.__keySetters={});return n[t]||(n[t]=i(e,t))}};r.Mixin={createStateSetter:function(e){return r.createStateSetter(this,e)},createStateKeySetter:function(e){return r.createStateKeySetter(this,e)}},t.exports=r},{}],86:[function(e,t,n){function v(e){}function g(e){return function(t,n){var r;m.isDOMComponent(t)?r=t.getDOMNode():t.tagName&&(r=t);var o=new v;o.target=r;var u=new h(a.eventNameDispatchConfigs[e],f.getID(r),o);p(u,n),s.accumulateTwoPhaseDispatches(u),c.batchedUpdates(function(){i.enqueueEvents(u),i.processEventQueue()})}}function y(){m.Simulate={};var e;for(e in a.eventNameDispatchConfigs)m.Simulate[e]=g(e)}function E(e){return function(t,n){var r=new v(e);p(r,n),m.isDOMComponent(t)?m.simulateNativeEventOnDOMComponent(e,t,r):!t.tagName||m.simulateNativeEventOnNode(e,t,r)}}var r=e("./EventConstants"),i=e("./EventPluginHub"),s=e("./EventPropagators"),o=e("./React"),u=e("./ReactElement"),a=e("./ReactBrowserEventEmitter"),f=e("./ReactMount"),l=e("./ReactTextComponent"),c=e("./ReactUpdates"),h=e("./SyntheticEvent"),p=e("./Object.assign"),d=r.topLevelTypes,m={renderIntoDocument:function(e){var t=document.createElement("div");return o.render(e,t)},isElement:function(e){return u.isValidElement(e)},isElementOfType:function(e,t){return u.isValidElement(e)&&e.type===t.type},isDOMComponent:function(e){return!!(e&&e.mountComponent&&e.tagName)},isDOMComponentElement:function(e){return!(!e||!u.isValidElement(e)||!e.tagName)},isCompositeComponent:function(e){return typeof e.render=="function"&&typeof e.setState=="function"},isCompositeComponentWithType:function(e,t){return!!m.isCompositeComponent(e)&&e.constructor===t.type},isCompositeComponentElement:function(e){if(!u.isValidElement(e))return!1;var t=e.type.prototype;return typeof t.render=="function"&&typeof t.setState=="function"},isCompositeComponentElementWithType:function(e,t){return!!m.isCompositeComponentElement(e)&&e.constructor===t},isTextComponent:function(e){return e instanceof l.type},findAllInRenderedTree:function(e,t){if(!e)return[];var n=t(e)?[e]:[];if(m.isDOMComponent(e)){var r=e._renderedChildren,i;for(i in r){if(!r.hasOwnProperty(i))continue;n=n.concat(m.findAllInRenderedTree(r[i],t))}}else m.isCompositeComponent(e)&&(n=n.concat(m.findAllInRenderedTree(e._renderedComponent,t)));return n},scryRenderedDOMComponentsWithClass:function(e,t){return m.findAllInRenderedTree(e,function(e){var n=e.props.className;return m.isDOMComponent(e)&&n&&(" "+n+" ").indexOf(" "+t+" ")!==-1})},findRenderedDOMComponentWithClass:function(e,t){var n=m.scryRenderedDOMComponentsWithClass(e,t);if(n.length!==1)throw new Error("Did not find exactly one match for class:"+t);return n[0]},scryRenderedDOMComponentsWithTag:function(e,t){return m.findAllInRenderedTree(e,function(e){return m.isDOMComponent(e)&&e.tagName===t.toUpperCase()})},findRenderedDOMComponentWithTag:function(e,t){var n=m.scryRenderedDOMComponentsWithTag(e,t);if(n.length!==1)throw new Error("Did not find exactly one match for tag:"+t);return n[0]},scryRenderedComponentsWithType:function(e,t){return m.findAllInRenderedTree(e,function(e){return m.isCompositeComponentWithType(e,t)})},findRenderedComponentWithType:function(e,t){var n=m.scryRenderedComponentsWithType(e,t);if(n.length!==1)throw new Error("Did not find exactly one match for componentType:"+t);return n[0]},mockComponent:function(e,t){t=t||e.mockTagName||"div";var n=o.createClass({displayName:"ConvenienceConstructor",render:function(){return o.createElement(t,null,this.props.children)}});return e.mockImplementation(n),e.type=n.type,e.isReactLegacyFactory=!0,this},simulateNativeEventOnNode:function(e,t,n){n.target=t,a.ReactEventListener.dispatchEvent(e,n)},simulateNativeEventOnDOMComponent:function(e,t,n){m.simulateNativeEventOnNode(e,t.getDOMNode(),n)},nativeTouchData:function(e,t){return{touches:[{pageX:e,pageY:t}]}},Simulate:null,SimulateNative:{}},b=i.injection.injectEventPluginOrder;i.injection.injectEventPluginOrder=function(){b.apply(this,arguments),y()};var w=i.injection.injectEventPluginsByName;i.injection.injectEventPluginsByName=function(){w.apply(this,arguments),y()},y();var S;for(S in d){var x=S.indexOf("top")===0?S.charAt(3).toLowerCase()+S.substr(4):S;m.SimulateNative[x]=E(S)}t.exports=m},{"./EventConstants":17,"./EventPluginHub":19,"./EventPropagators":22,"./Object.assign":29,"./React":31,"./ReactBrowserEventEmitter":33,"./ReactElement":58,"./ReactMount":70,"./ReactTextComponent":87,"./ReactUpdates":91,"./SyntheticEvent":99}],87:[function(e,t,n){var r=e("./DOMPropertyOperations"),i=e("./ReactComponent"),s=e("./ReactElement"),o=e("./Object.assign"),u=e("./escapeTextForBrowser"),a=function(e){};o(a.prototype,i.Mixin,{mountComponent:function(e,t,n){i.Mixin.mountComponent.call(this,e,t,n);var s=u(this.props);return t.renderToStaticMarkup?s:"<span "+r.createMarkupForID(e)+">"+s+"</span>"},receiveComponent:function(e,t){var n=e.props;n!==this.props&&(this.props=n,i.BackendIDOperations.updateTextContentByID(this._rootNodeID,n))}});var f=function(e){return new s(a,null,null,null,null,e)};f.type=a,t.exports=f},{"./DOMPropertyOperations":13,"./Object.assign":29,"./ReactComponent":37,"./ReactElement":58,"./escapeTextForBrowser":123}],88:[function(e,t,n){var r=e("./ReactChildren"),i={getChildMapping:function(e){return r.map(e,function(e){return e})},mergeChildMappings:function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var r={},i=[];for(var s in e)t.hasOwnProperty(s)?i.length&&(r[s]=i,i=[]):i.push(s);var o,u={};for(var a in t){if(r.hasOwnProperty(a))for(o=0;o<r[a].length;o++){var f=r[a][o];u[r[a][o]]=n(f)}u[a]=n(a)}for(o=0;o<i.length;o++)u[i[o]]=n(i[o]);return u}};t.exports=i},{"./ReactChildren":36}],89:[function(e,t,n){function o(){var e=document.createElement("div"),t=e.style;"AnimationEvent"in window||delete i.animationend.animation,"TransitionEvent"in window||delete i.transitionend.transition;for(var n in i){var r=i[n];for(var o in r)if(o in t){s.push(r[o]);break}}}function u(e,t,n){e.addEventListener(t,n,!1)}function a(e,t,n){e.removeEventListener(t,n,!1)}var r=e("./ExecutionEnvironment"),i={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},s=[];r.canUseDOM&&o();var f={addEndEventListener:function(e,t){if(s.length===0){window.setTimeout(t,0);return}s.forEach(function(n){u(e,n,t)})},removeEndEventListener:function(e,t){if(s.length===0)return;s.forEach(function(n){a(e,n,t)})}};t.exports=f},{"./ExecutionEnvironment":23}],90:[function(e,t,n){var r=e("./React"),i=e("./ReactTransitionChildMapping"),s=e("./Object.assign"),o=e("./cloneWithProps"),u=e("./emptyFunction"),a=r.createClass({displayName:"ReactTransitionGroup",propTypes:{component:r.PropTypes.any,childFactory:r.PropTypes.func},getDefaultProps:function(){return{component:"span",childFactory:u.thatReturnsArgument}},getInitialState:function(){return{children:i.getChildMapping(this.props.children)}},componentWillReceiveProps:function(e){var t=i.getChildMapping(e.children),n=this.state.children;this.setState({children:i.mergeChildMappings(n,t)});var r;for(r in t){var s=n&&n.hasOwnProperty(r);t[r]&&!s&&!this.currentlyTransitioningKeys[r]&&this.keysToEnter.push(r)}for(r in n){var o=t&&t.hasOwnProperty(r);n[r]&&!o&&!this.currentlyTransitioningKeys[r]&&this.keysToLeave.push(r)}},componentWillMount:function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},componentDidUpdate:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)},performEnter:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)},_handleDoneEntering:function(e){var t=this.refs[e];t.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e];var n=i.getChildMapping(this.props.children);(!n||!n.hasOwnProperty(e))&&this.performLeave(e)},performLeave:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillLeave?t.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)},_handleDoneLeaving:function(e){var t=this.refs[e];t.componentDidLeave&&t.componentDidLeave(),delete this.currentlyTransitioningKeys[e];var n=i.getChildMapping(this.props.children);if(n&&n.hasOwnProperty(e))this.performEnter(e);else{var r=s({},this.state.children);delete r[e],this.setState({children:r})}},render:function(){var e={};for(var t in this.state.children){var n=this.state.children[t];n&&(e[t]=o(this.props.childFactory(n),{ref:t}))}return r.createElement(this.props.component,this.props,e)}});t.exports=a},{"./Object.assign":29,"./React":31,"./ReactTransitionChildMapping":88,"./cloneWithProps":113,"./emptyFunction":121}],91:[function(e,t,n){function v(){f(k.ReactReconcileTransaction&&d,"ReactUpdates: must inject a reconcile transaction class and batching strategy")}function b(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=r.getPooled(),this.reconcileTransaction=k.ReactReconcileTransaction.getPooled()}function w(e,t,n){v(),d.batchedUpdates(e,t,n)}function E(e,t){return e._mountDepth-t._mountDepth}function S(e){var t=e.dirtyComponentsLength;f(t===c.length,"Expected flush transaction's stored dirty-components length (%s) to match dirty-components array length (%s).",t,c.length),c.sort(E);for(var n=0;n<t;n++){var r=c[n];if(r.isMounted()){var i=r._pendingCallbacks;r._pendingCallbacks=null,r.performUpdateIfNecessary(e.reconcileTransaction);if(i)for(var s=0;s<i.length;s++)e.callbackQueue.enqueue(i[s],r)}}}function T(e,t){f(!t||typeof t=="function","enqueueUpdate(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable."),v(),l(s.current==null,"enqueueUpdate(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.");if(!d.isBatchingUpdates){d.batchedUpdates(T,e,t);return}c.push(e),t&&(e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t])}function N(e,t){f(d.isBatchingUpdates,"ReactUpdates.asap: Can't enqueue an asap callback in a context whereupdates are not being batched."),h.enqueue(e,t),p=!0}var r=e("./CallbackQueue"),i=e("./PooledClass"),s=e("./ReactCurrentOwner"),o=e("./ReactPerf"),u=e("./Transaction"),a=e("./Object.assign"),f=e("./invariant"),l=e("./warning"),c=[],h=r.getPooled(),p=!1,d=null,m={initialize:function(){this.dirtyComponentsLength=c.length},close:function(){this.dirtyComponentsLength!==c.length?(c.splice(0,this.dirtyComponentsLength),x()):c.length=0}},g={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},y=[m,g];a(b.prototype,u.Mixin,{getTransactionWrappers:function(){return y},destructor:function(){this.dirtyComponentsLength=null,r.release(this.callbackQueue),this.callbackQueue=null,k.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return u.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),i.addPoolingTo(b);var x=o.measure("ReactUpdates","flushBatchedUpdates",function(){while(c.length||p){if(c.length){var e=b.getPooled();e.perform(S,null,e),b.release(e)}if(p){p=!1;var t=h;h=r.getPooled(),t.notifyAll(),r.release(t)}}}),C={injectReconcileTransaction:function(e){f(e,"ReactUpdates: must provide a reconcile transaction class"),k.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){f(e,"ReactUpdates: must provide a batching strategy"),f(typeof e.batchedUpdates=="function","ReactUpdates: must provide a batchedUpdates() function"),f(typeof e.isBatchingUpdates=="boolean","ReactUpdates: must provide an isBatchingUpdates boolean attribute"),d=e}},k={ReactReconcileTransaction:null,batchedUpdates:w,enqueueUpdate:T,flushBatchedUpdates:x,injection:C,asap:N};t.exports=k},{"./CallbackQueue":7,"./Object.assign":29,"./PooledClass":30,"./ReactCurrentOwner":42,"./ReactPerf":75,"./Transaction":107,"./invariant":140,"./warning":160}],92:[function(e,t,n){var r=e("./DOMProperty"),i=r.injection.MUST_USE_ATTRIBUTE,s={Properties:{cx:i,cy:i,d:i,dx:i,dy:i,fill:i,fillOpacity:i,fontFamily:i,fontSize:i,fx:i,fy:i,gradientTransform:i,gradientUnits:i,markerEnd:i,markerMid:i,markerStart:i,offset:i,opacity:i,patternContentUnits:i,patternUnits:i,points:i,preserveAspectRatio:i,r:i,rx:i,ry:i,spreadMethod:i,stopColor:i,stopOpacity:i,stroke:i,strokeDasharray:i,strokeLinecap:i,strokeOpacity:i,strokeWidth:i,textAnchor:i,transform:i,version:i,viewBox:i,x1:i,x2:i,x:i,y1:i,y2:i,y:i},DOMAttributeNames:{fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox"}};t.exports=s},{"./DOMProperty":12}],93:[function(e,t,n){function g(e){if("selectionStart"in e&&s.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function y(e){if(m||p==null||p!=u())return;var t=g(p);if(!v||!l(v,t)){v=t;var n=o.getPooled(h.select,d,e);return n.type="select",n.target=p,i.accumulateTwoPhaseDispatches(n),n}}var r=e("./EventConstants"),i=e("./EventPropagators"),s=e("./ReactInputSelection"),o=e("./SyntheticEvent"),u=e("./getActiveElement"),a=e("./isTextInputElement"),f=e("./keyOf"),l=e("./shallowEqual"),c=r.topLevelTypes,h={select:{phasedRegistrationNames:{bubbled:f({onSelect:null}),captured:f({onSelectCapture:null})},dependencies:[c.topBlur,c.topContextMenu,c.topFocus,c.topKeyDown,c.topMouseDown,c.topMouseUp,c.topSelectionChange]}},p=null,d=null,v=null,m=!1,b={eventTypes:h,extractEvents:function(e,t,n,r){switch(e){case c.topFocus:if(a(t)||t.contentEditable==="true")p=t,d=n,v=null;break;case c.topBlur:p=null,d=null,v=null;break;case c.topMouseDown:m=!0;break;case c.topContextMenu:case c.topMouseUp:return m=!1,y(r);case c.topSelectionChange:case c.topKeyDown:case c.topKeyUp:return y(r)}}};t.exports=b},{"./EventConstants":17,"./EventPropagators":22,"./ReactInputSelection":65,"./SyntheticEvent":99,"./getActiveElement":127,"./isTextInputElement":143,"./keyOf":147,"./shallowEqual":155}],94:[function(e,t,n){var r=Math.pow(2,53),i={createReactRootIndex:function(){return Math.ceil(Math.random()*r)}};t.exports=i},{}],95:[function(e,t,n){var r=e("./EventConstants"),i=e("./EventPluginUtils"),s=e("./EventPropagators"),o=e("./SyntheticClipboardEvent"),u=e("./SyntheticEvent"),a=e("./SyntheticFocusEvent"),f=e("./SyntheticKeyboardEvent"),l=e("./SyntheticMouseEvent"),c=e("./SyntheticDragEvent"),h=e("./SyntheticTouchEvent"),p=e("./SyntheticUIEvent"),d=e("./SyntheticWheelEvent"),v=e("./getEventCharCode"),m=e("./invariant"),g=e("./keyOf"),y=e("./warning"),b=r.topLevelTypes,w={blur:{phasedRegistrationNames:{bubbled:g({onBlur:!0}),captured:g({onBlurCapture:!0})}},click:{phasedRegistrationNames:{bubbled:g({onClick:!0}),captured:g({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:g({onContextMenu:!0}),captured:g({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:g({onCopy:!0}),captured:g({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:g({onCut:!0}),captured:g({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:g({onDoubleClick:!0}),captured:g({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:g({onDrag:!0}),captured:g({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:g({onDragEnd:!0}),captured:g({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:g({onDragEnter:!0}),captured:g({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:g({onDragExit:!0}),captured:g({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:g({onDragLeave:!0}),captured:g({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:g({onDragOver:!0}),captured:g({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:g({onDragStart:!0}),captured:g({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:g({onDrop:!0}),captured:g({onDropCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:g({onFocus:!0}),captured:g({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:g({onInput:!0}),captured:g({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:g({onKeyDown:!0}),captured:g({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:g({onKeyPress:!0}),captured:g({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:g({onKeyUp:!0}),captured:g({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:g({onLoad:!0}),captured:g({onLoadCapture:!0})}},error:{phasedRegistrationNames:{bubbled:g({onError:!0}),captured:g({onErrorCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:g({onMouseDown:!0}),captured:g({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:g({onMouseMove:!0}),captured:g({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:g({onMouseOut:!0}),captured:g({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:g({onMouseOver:!0}),captured:g({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:g({onMouseUp:!0}),captured:g({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:g({onPaste:!0}),captured:g({onPasteCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:g({onReset:!0}),captured:g({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:g({onScroll:!0}),captured:g({onScrollCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:g({onSubmit:!0}),captured:g({onSubmitCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:g({onTouchCancel:!0}),captured:g({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:g({onTouchEnd:!0}),captured:g({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:g({onTouchMove:!0}),captured:g({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:g({onTouchStart:!0}),captured:g({onTouchStartCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:g({onWheel:!0}),captured:g({onWheelCapture:!0})}}},E={topBlur:w.blur,topClick:w.click,topContextMenu:w.contextMenu,topCopy:w.copy,topCut:w.cut,topDoubleClick:w.doubleClick,topDrag:w.drag,topDragEnd:w.dragEnd,topDragEnter:w.dragEnter,topDragExit:w.dragExit,topDragLeave:w.dragLeave,topDragOver:w.dragOver,topDragStart:w.dragStart,topDrop:w.drop,topError:w.error,topFocus:w.focus,topInput:w.input,topKeyDown:w.keyDown,topKeyPress:w.keyPress,topKeyUp:w.keyUp,topLoad:w.load,topMouseDown:w.mouseDown,topMouseMove:w.mouseMove,topMouseOut:w.mouseOut,topMouseOver:w.mouseOver,topMouseUp:w.mouseUp,topPaste:w.paste,topReset:w.reset,topScroll:w.scroll,topSubmit:w.submit,topTouchCancel:w.touchCancel,topTouchEnd:w.touchEnd,topTouchMove:w.touchMove,topTouchStart:w.touchStart,topWheel:w.wheel};for(var S in E)E[S].dependencies=[S];var x={eventTypes:w,executeDispatch:function(e,t,n){var r=i.executeDispatch(e,t,n);y(typeof r!="boolean","Returning `false` from an event handler is deprecated and will be ignored in a future release. Instead, manually call e.stopPropagation() or e.preventDefault(), as appropriate."),r===!1&&(e.stopPropagation(),e.preventDefault())},extractEvents:function(e,t,n,r){var i=E[e];if(!i)return null;var g;switch(e){case b.topInput:case b.topLoad:case b.topError:case b.topReset:case b.topSubmit:g=u;break;case b.topKeyPress:if(v(r)===0)return null;case b.topKeyDown:case b.topKeyUp:g=f;break;case b.topBlur:case b.topFocus:g=a;break;case b.topClick:if(r.button===2)return null;case b.topContextMenu:case b.topDoubleClick:case b.topMouseDown:case b.topMouseMove:case b.topMouseOut:case b.topMouseOver:case b.topMouseUp:g=l;break;case b.topDrag:case b.topDragEnd:case b.topDragEnter:case b.topDragExit:case b.topDragLeave:case b.topDragOver:case b.topDragStart:case b.topDrop:g=c;break;case b.topTouchCancel:case b.topTouchEnd:case b.topTouchMove:case b.topTouchStart:g=h;break;case b.topScroll:g=p;break;case b.topWheel:g=d;break;case b.topCopy:case b.topCut:case b.topPaste:g=o}m(g,"SimpleEventPlugin: Unhandled event type, `%s`.",e);var y=g.getPooled(i,n,r);return s.accumulateTwoPhaseDispatches(y),y}};t.exports=x},{"./EventConstants":17,"./EventPluginUtils":21,"./EventPropagators":22,"./SyntheticClipboardEvent":96,"./SyntheticDragEvent":98,"./SyntheticEvent":99,"./SyntheticFocusEvent":100,"./SyntheticKeyboardEvent":102,"./SyntheticMouseEvent":103,"./SyntheticTouchEvent":104,"./SyntheticUIEvent":105,"./SyntheticWheelEvent":106,"./getEventCharCode":128,"./invariant":140,"./keyOf":147,"./warning":160}],96:[function(e,t,n){function s(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),i={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};r.augmentClass(s,i),t.exports=s},{"./SyntheticEvent":99}],97:[function(e,t,n){function s(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),i={data:null};r.augmentClass(s,i),t.exports=s},{"./SyntheticEvent":99}],98:[function(e,t,n){function s(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticMouseEvent"),i={dataTransfer:null};r.augmentClass(s,i),t.exports=s},{"./SyntheticMouseEvent":103}],99:[function(e,t,n){function a(e,t,n){this.dispatchConfig=e,this.dispatchMarker=t,this.nativeEvent=n;var r=this.constructor.Interface;for(var i in r){if(!r.hasOwnProperty(i))continue;var o=r[i];o?this[i]=o(n):this[i]=n[i]}var u=n.defaultPrevented!=null?n.defaultPrevented:n.returnValue===!1;u?this.isDefaultPrevented=s.thatReturnsTrue:this.isDefaultPrevented=s.thatReturnsFalse,this.isPropagationStopped=s.thatReturnsFalse}var r=e("./PooledClass"),i=e("./Object.assign"),s=e("./emptyFunction"),o=e("./getEventTarget"),u={type:null,target:o,currentTarget:s.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};i(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=!1,this.isDefaultPrevented=s.thatReturnsTrue},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.isPropagationStopped=s.thatReturnsTrue},persist:function(){this.isPersistent=s.thatReturnsTrue},isPersistent:s.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),a.Interface=u,a.augmentClass=function(e,t){var n=this,s=Object.create(n.prototype);i(s,e.prototype),e.prototype=s,e.prototype.constructor=e,e.Interface=i({},n.Interface,t),e.augmentClass=n.augmentClass,r.addPoolingTo(e,r.threeArgumentPooler)},r.addPoolingTo(a,r.threeArgumentPooler),t.exports=a},{"./Object.assign":29,"./PooledClass":30,"./emptyFunction":121,"./getEventTarget":131}],100:[function(e,t,n){function s(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),i={relatedTarget:null};r.augmentClass(s,i),t.exports=s},{"./SyntheticUIEvent":105}],101:[function(e,t,n){function s(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),i={data:null};r.augmentClass(s,i),t.exports=s},{"./SyntheticEvent":99}],102:[function(e,t,n){function a(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),i=e("./getEventCharCode"),s=e("./getEventKey"),o=e("./getEventModifierState"),u={key:s,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:o,charCode:function(e){return e.type==="keypress"?i(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?i(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}};r.augmentClass(a,u),t.exports=a},{"./SyntheticUIEvent":105,"./getEventCharCode":128,"./getEventKey":129,"./getEventModifierState":130}],103:[function(e,t,n){function u(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),i=e("./ViewportMetrics"),s=e("./getEventModifierState"),o={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:s,button:function(e){var t=e.button;return"which"in e?t:t===2?2:t===4?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+i.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+i.currentScrollTop}};r.augmentClass(u,o),t.exports=u},{"./SyntheticUIEvent":105,"./ViewportMetrics":108,"./getEventModifierState":130}],104:[function(e,t,n){function o(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),i=e("./getEventModifierState"),s={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:i};r.augmentClass(o,s),t.exports=o},{"./SyntheticUIEvent":105,"./getEventModifierState":130}],105:[function(e,t,n){function o(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),i=e("./getEventTarget"),s={view:function(e){if(e.view)return e.view;var t=i(e);if(t!=null&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};r.augmentClass(o,s),t.exports=o},{"./SyntheticEvent":99,"./getEventTarget":131}],106:[function(e,t,n){function s(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticMouseEvent"),i={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};r.augmentClass(s,i),t.exports=s},{"./SyntheticMouseEvent":103}],107:[function(e,t,n){var r=e("./invariant"),i={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,i,s,o,u,a){r(!this.isInTransaction(),"Transaction.perform(...): Cannot initialize a transaction when there is already an outstanding transaction.");var f,l;try{this._isInTransaction=!0,f=!0,this.initializeAll(0),l=e.call(t,n,i,s,o,u,a),f=!1}finally{try{if(f)try{this.closeAll(0)}catch(c){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return l},initializeAll:function(e){var t=this.transactionWrappers;for(var n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=s.OBSERVED_ERROR,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===s.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(i){}}}},closeAll:function(e){r(this.isInTransaction(),"Transaction.closeAll(): Cannot close transaction when none are open.");var t=this.transactionWrappers;for(var n=e;n<t.length;n++){var i=t[n],o=this.wrapperInitData[n],u;try{u=!0,o!==s.OBSERVED_ERROR&&i.close&&i.close.call(this,o),u=!1}finally{if(u)try{this.closeAll(n+1)}catch(a){}}}this.wrapperInitData.length=0}},s={Mixin:i,OBSERVED_ERROR:{}};t.exports=s},{"./invariant":140}],108:[function(e,t,n){var r=e("./getUnboundedScrollPosition"),i={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(){var e=r(window);i.currentScrollLeft=e.x,i.currentScrollTop=e.y}};t.exports=i},{"./getUnboundedScrollPosition":136}],109:[function(e,t,n){function i(e,t){r(t!=null,"accumulateInto(...): Accumulated items must not be null or undefined.");if(e==null)return t;var n=Array.isArray(e),i=Array.isArray(t);return n&&i?(e.push.apply(e,t),e):n?(e.push(t),e):i?[e].concat(t):[e,t]}var r=e("./invariant");t.exports=i},{"./invariant":140}],110:[function(e,t,n){function i(e){var t=1,n=0;for(var i=0;i<e.length;i++)t=(t+e.charCodeAt(i))%r,n=(n+t)%r;return t|n<<16}var r=65521;t.exports=i},{}],111:[function(e,t,n){function i(e){return e.replace(r,function(e,t){return t.toUpperCase()})}var r=/-(.)/g;t.exports=i},{}],112:[function(e,t,n){function s(e){return r(e.replace(i,"ms-"))}var r=e("./camelize"),i=/^-ms-/;t.exports=s},{"./camelize":111}],113:[function(e,t,n){function a(e,t){o(!e.ref,"You are calling cloneWithProps() on a child with a ref. This is dangerous because you're creating a new child which will not be added as a ref to its parent.");var n=i.mergeProps(t,e.props);return!n.hasOwnProperty(u)&&e.props.hasOwnProperty(u)&&(n.children=e.props.children),r.createElement(e.type,n)}var r=e("./ReactElement"),i=e("./ReactPropTransferer"),s=e("./keyOf"),o=e("./warning"),u=s({children:null});t.exports=a},{"./ReactElement":58,"./ReactPropTransferer":76,"./keyOf":147,"./warning":160}],114:[function(e,t,n){function i(e,t){return!e||!t?!1:e===t?!0:r(e)?!1:r(t)?i(e,t.parentNode):e.contains?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1}var r=e("./isTextNode");t.exports=i},{"./isTextNode":144}],115:[function(e,t,n){function i(e){return!!e&&(typeof e=="object"||typeof e=="function")&&"length"in e&&!("setInterval"in e)&&typeof e.nodeType!="number"&&(Array.isArray(e)||"callee"in e||"item"in e)}function s(e){return i(e)?Array.isArray(e)?e.slice():r(e):[e]}var r=e("./toArray");t.exports=s},{"./toArray":157}],116:[function(e,t,n){function o(e){var t=i.createFactory(e),n=r.createClass({displayName:"ReactFullPageComponent"+e,componentWillUnmount:function(){s(!1,"%s tried to unmount. Because of cross-browser quirks it is impossible to unmount some top-level components (eg <html>, <head>, and <body>) reliably and efficiently. To fix this, have a single top-level component that never unmounts render these elements.",this.constructor.displayName)},render:function(){return t(this.props)}});return n}var r=e("./ReactCompositeComponent"),i=e("./ReactElement"),s=e("./invariant");t.exports=o},{"./ReactCompositeComponent":40,"./ReactElement":58,"./invariant":140}],117:[function(e,t,n){function f(e){var t=e.match(a);return t&&t[1].toLowerCase()}function l(e,t){var n=u;o(!!u,"createNodesFromMarkup dummy not initialized");var r=f(e),a=r&&s(r);if(a){n.innerHTML=a[1]+e+a[2];var l=a[0];while(l--)n=n.lastChild}else n.innerHTML=e;var c=n.getElementsByTagName("script");c.length&&(o(t,"createNodesFromMarkup(...): Unexpected <script> element rendered."),i(c).forEach(t));var h=i(n.childNodes);while(n.lastChild)n.removeChild(n.lastChild);return h}var r=e("./ExecutionEnvironment"),i=e("./createArrayFrom"),s=e("./getMarkupWrap"),o=e("./invariant"),u=r.canUseDOM?document.createElement("div"):null,a=/^\s*<(\w+)/;t.exports=l},{"./ExecutionEnvironment":23,"./createArrayFrom":115,"./getMarkupWrap":132,"./invariant":140}],118:[function(e,t,n){function r(e){return typeof e=="object"?Object.keys(e).filter(function(t){return e[t]}).join(" "):Array.prototype.join.call(arguments," ")}t.exports=r},{}],119:[function(e,t,n){function s(e,t){var n=t==null||typeof t=="boolean"||t==="";if(n)return"";var r=isNaN(t);return r||t===0||i.hasOwnProperty(e)&&i[e]?""+t:(typeof t=="string"&&(t=t.trim()),t+"px")}var r=e("./CSSProperty"),i=r.isUnitlessNumber;t.exports=s},{"./CSSProperty":5}],120:[function(e,t,n){function s(e,t,n,s,o){var u=!1,a=function(){return i(u,e+"."+t+" will be deprecated in a future version. "+("Use "+e+"."+n+" instead.")),u=!0,o.apply(s,arguments)};return a.displayName=e+"_"+t,r(a,o)}var r=e("./Object.assign"),i=e("./warning");t.exports=s},{"./Object.assign":29,"./warning":160}],121:[function(e,t,n){function r(e){return function(){return e}}function i(){}i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},t.exports=i},{}],122:[function(e,t,n){var r={};Object.freeze(r),t.exports=r},{}],123:[function(e,t,n){function s(e){return r[e]}function o(e){return(""+e).replace(i,s)}var r={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},i=/[&><"']/g;t.exports=o},{}],124:[function(e,t,n){function o(e,t,n){var i=e,o=!i.hasOwnProperty(n);s(o,"flattenChildren(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",n);if(o&&t!=null){var u=typeof t,a;u==="string"?a=r(t):u==="number"?a=r(""+t):a=t,i[n]=a}}function u(e){if(e==null)return e;var t={};return i(e,o,t),t}var r=e("./ReactTextComponent"),i=e("./traverseAllChildren"),s=e("./warning");t.exports=u},{"./ReactTextComponent":87,"./traverseAllChildren":158,"./warning":160}],125:[function(e,t,n){function r(e){try{e.focus()}catch(t){}}t.exports=r},{}],126:[function(e,t,n){var r=function(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)};t.exports=r},{}],127:[function(e,t,n){function r(){try{return document.activeElement||document.body}catch(e){return document.body}}t.exports=r},{}],128:[function(e,t,n){function r(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,t===0&&n===13&&(t=13)):t=n,t>=32||t===13?t:0}t.exports=r},{}],129:[function(e,t,n){function o(e){if(e.key){var t=i[e.key]||e.key;if(t!=="Unidentified")return t}if(e.type==="keypress"){var n=r(e);return n===13?"Enter":String.fromCharCode(n)}return e.type==="keydown"||e.type==="keyup"?s[e.keyCode]||"Unidentified":""}var r=e("./getEventCharCode"),i={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=o},{"./getEventCharCode":128}],130:[function(e,t,n){function i(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var i=r[e];return i?!!n[i]:!1}function s(e){return i}var r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=s},{}],131:[function(e,t,n){function r(e){var t=e.target||e.srcElement||window;return t.nodeType===3?t.parentNode:t}t.exports=r},{}],132:[function(e,t,n){function h(e){return i(!!s,"Markup wrapping node not initialized"),c.hasOwnProperty(e)||(e="*"),o.hasOwnProperty(e)||(e==="*"?s.innerHTML="<link />":s.innerHTML="<"+e+"></"+e+">",o[e]=!s.firstChild),o[e]?c[e]:null}var r=e("./ExecutionEnvironment"),i=e("./invariant"),s=r.canUseDOM?document.createElement("div"):null,o={circle:!0,defs:!0,ellipse:!0,g:!0,line:!0,linearGradient:!0,path:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,text:!0},u=[1,'<select multiple="true">',"</select>"],a=[1,"<table>","</table>"],f=[3,"<table><tbody><tr>","</tr></tbody></table>"],l=[1,"<svg>","</svg>"],c={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:u,option:u,caption:a,colgroup:a,tbody:a,tfoot:a,thead:a,td:f,th:f,circle:l,defs:l,ellipse:l,g:l,line:l,linearGradient:l,path:l,polygon:l,polyline:l,radialGradient:l,rect:l,stop:l,text:l};t.exports=h},{"./ExecutionEnvironment":23,"./invariant":140}],133:[function(e,t,n){function r(e){while(e&&e.firstChild)e=e.firstChild;return e}function i(e){while(e){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function s(e,t){var n=r(e),s=0,o=0;while(n){if(n.nodeType==3){o=s+n.textContent.length;if(s<=t&&o>=t)return{node:n,offset:t-s};s=o}n=r(i(n))}}t.exports=s},{}],134:[function(e,t,n){function i(e){return e?e.nodeType===r?e.documentElement:e.firstChild:null}var r=9;t.exports=i},{}],135:[function(e,t,n){function s(){return!i&&r.canUseDOM&&(i="textContent"in document.documentElement?"textContent":"innerText"),i}var r=e("./ExecutionEnvironment"),i=null;t.exports=s},{"./ExecutionEnvironment":23}],136:[function(e,t,n){function r(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}t.exports=r},{}],137:[function(e,t,n){function i(e){return e.replace(r,"-$1").toLowerCase()}var r=/([A-Z])/g;t.exports=i},{}],138:[function(e,t,n){function s(e){return r(e).replace(i,"-ms-")}var r=e("./hyphenate"),i=/^ms-/;t.exports=s},{"./hyphenate":137}],139:[function(e,t,n){function a(e,t){var n;r(e&&(typeof e.type=="function"||typeof e.type=="string"),"Only functions or strings can be mounted as React components.");if(e.type._mockedReactClassConstructor){s._isLegacyCallWarningEnabled=!1;try{n=new e.type._mockedReactClassConstructor(e.props)}finally{s._isLegacyCallWarningEnabled=!0}i.isValidElement(n)&&(n=new n.type(n.props));var a=n.render;if(!!a)return a._isMockFunction&&!a._getMockImplementation()&&a.mockImplementation(u.getEmptyComponent),n.construct(e),n;e=u.getEmptyComponent()}return typeof e.type=="string"?n=o.createInstanceForTag(e.type,e.props,t):n=new e.type(e.props),r(typeof n.construct=="function"&&typeof n.mountComponent=="function"&&typeof n.receiveComponent=="function","Only React Components can be mounted."),n.construct(e),n}var r=e("./warning"),i=e("./ReactElement"),s=e("./ReactLegacyElement"),o=e("./ReactNativeComponent"),u=e("./ReactEmptyComponent");t.exports=a},{"./ReactElement":58,"./ReactEmptyComponent":60,"./ReactLegacyElement":67,"./ReactNativeComponent":73,"./warning":160}],140:[function(e,t,n){var r=function(e,t,n,r,i,s,o,u){if(t===undefined)throw new Error("invariant requires an error message argument");if(!e){var a;if(t===undefined)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[n,r,i,s,o,u],l=0;a=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return f[l++]}))}throw a.framesToPop=1,a}};t.exports=r},{}],141:[function(e,t,n){function s(e,t){if(!r.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,s=n in document;if(!s){var o=document.createElement("div");o.setAttribute(n,"return;"),s=typeof o[n]=="function"}return!s&&i&&e==="wheel"&&(s=document.implementation.hasFeature("Events.wheel","3.0")),s}var r=e("./ExecutionEnvironment"),i;r.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=s},{"./ExecutionEnvironment":23}],142:[function(e,t,n){function r(e){return!!e&&(typeof Node=="function"?e instanceof Node:typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.nodeName=="string")}t.exports=r},{}],143:[function(e,t,n){function i(e){return e&&(e.nodeName==="INPUT"&&r[e.type]||e.nodeName==="TEXTAREA")}var r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=i},{}],144:[function(e,t,n){function i(e){return r(e)&&e.nodeType==3}var r=e("./isNode");t.exports=i},{"./isNode":142}],145:[function(e,t,n){function r(e){e||(e="");var t,n=arguments.length;if(n>1)for(var r=1;r<n;r++)t=arguments[r],t&&(e=(e?e+" ":"")+t);return e}t.exports=r},{}],146:[function(e,t,n){var r=e("./invariant"),i=function(e){var t={},n;r(e instanceof Object&&!Array.isArray(e),"keyMirror(...): Argument must be an object.");for(n in e){if(!e.hasOwnProperty(n))continue;t[n]=n}return t};t.exports=i},{"./invariant":140}],147:[function(e,t,n){var r=function(e){var t;for(t in e){if(!e.hasOwnProperty(t))continue;return t}return null};t.exports=r},{}],148:[function(e,t,n){function i(e,t,n){if(!e)return null;var i={};for(var s in e)r.call(e,s)&&(i[s]=t.call(n,e[s],s,e));return i}var r=Object.prototype.hasOwnProperty;t.exports=i},{}],149:[function(e,t,n){function r(e){var t={};return function(n){return t.hasOwnProperty(n)?t[n]:t[n]=e.call(this,n)}}t.exports=r},{}],150:[function(e,t,n){function i(e,t){r(e&&!/[^a-z0-9_]/.test(e),"You must provide an eventName using only the characters [a-z0-9_]")}var r=e("./invariant");t.exports=i},{"./invariant":140}],151:[function(e,t,n){function s(e){return i(r.isValidElement(e),"onlyChild must be passed a children with exactly one child."),e}var r=e("./ReactElement"),i=e("./invariant");t.exports=s},{"./ReactElement":58,"./invariant":140}],152:[function(e,t,n){var r=e("./ExecutionEnvironment"),i;r.canUseDOM&&(i=window.performance||window.msPerformance||window.webkitPerformance),t.exports=i||{}},{"./ExecutionEnvironment":23}],153:[function(e,t,n){var r=e("./performance");if(!r||!r.now)r=Date;var i=r.now.bind(r);t.exports=i},{"./performance":152}],154:[function(e,t,n){var r=e("./ExecutionEnvironment"),i=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,o=function(e,t){e.innerHTML=t};if(r.canUseDOM){var u=document.createElement("div");u.innerHTML=" ",u.innerHTML===""&&(o=function(e,t){e.parentNode&&e.parentNode.replaceChild(e,e);if(i.test(t)||t[0]==="<"&&s.test(t)){e.innerHTML="﻿"+t;var n=e.firstChild;n.data.length===1?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t})}t.exports=o},{"./ExecutionEnvironment":23}],155:[function(e,t,n){function r(e,t){if(e===t)return!0;var n;for(n in e)if(e.hasOwnProperty(n)&&(!t.hasOwnProperty(n)||e[n]!==t[n]))return!1;for(n in t)if(t.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!0}t.exports=r},{}],156:[function(e,t,n){function r(e,t){return e&&t&&e.type===t.type&&e.key===t.key&&e._owner===t._owner?!0:!1}t.exports=r},{}],157:[function(e,t,n){function i(e){var t=e.length;r(!Array.isArray(e)&&(typeof e=="object"||typeof e=="function"),"toArray: Array-like object expected"),r(typeof t=="number","toArray: Object needs a length property"),r(t===0||t-1 in e,"toArray: Object should have keys for indices");if(e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(n){}var i=Array(t);for(var s=0;s<t;s++)i[s]=e[s];return i}var r=e("./invariant");t.exports=i},{"./invariant":140}],158:[function(e,t,n){function l(e){return a[e]}function c(e,t){return e&&e.key!=null?p(e.key):t.toString(36)}function h(e){return(""+e).replace(f,l)}function p(e){return"$"+h(e)}function v(e,t,n){return e==null?0:d(e,"",0,t,n)}var r=e("./ReactElement"),i=e("./ReactInstanceHandles"),s=e("./invariant"),o=i.SEPARATOR,u=":",a={"=":"=0",".":"=1",":":"=2"},f=/[=.:]/g,d=function(e,t,n,i,a){var f,l,h=0;if(Array.isArray(e))for(var v=0;v<e.length;v++){var m=e[v];f=t+(t?u:o)+c(m,v),l=n+h,h+=d(m,f,l,i,a)}else{var g=typeof e,y=t==="",b=y?o+c(e,0):t;if(e==null||g==="boolean")i(a,null,b,n),h=1;else if(g==="string"||g==="number"||r.isValidElement(e))i(a,e,b,n),h=1;else if(g==="object"){s(!e||e.nodeType!==1,"traverseAllChildren(...): Encountered an invalid child; DOM elements are not valid children of React components.");for(var w in e)e.hasOwnProperty(w)&&(f=t+(t?u:o)+p(w)+u+c(e[w],0),l=n+h,h+=d(e[w],f,l,i,a))}}return h};t.exports=v},{"./ReactElement":58,"./ReactInstanceHandles":66,"./invariant":140}],159:[function(e,t,n){function o(e){return Array.isArray(e)?e.concat():e&&typeof e=="object"?r(new e.constructor,e):e}function v(e,t,n){s(Array.isArray(e),"update(): expected target of %s to be an array; got %s.",n,e);var r=t[n];s(Array.isArray(r),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",n,r)}function m(e,t){s(typeof t=="object","update(): You provided a key path to update() that did not contain one of %s. Did you forget to include {%s: ...}?",p.join(", "),l);if(t.hasOwnProperty(l))return s(Object.keys(t).length===1,"Cannot have more than one key in an object with %s",l),t[l];var n=o(e);if(t.hasOwnProperty(c)){var i=t[c];s(i&&typeof i=="object","update(): %s expects a spec of type 'object'; got %s",c,i),s(n&&typeof n=="object","update(): %s expects a target of type 'object'; got %s",c,n),r(n,t[c])}t.hasOwnProperty(u)&&(v(e,t,u),t[u].forEach(function(e){n.push(e)})),t.hasOwnProperty(a)&&(v(e,t,a),t[a].forEach(function(e){n.unshift(e)})),t.hasOwnProperty(f)&&(s(Array.isArray(e),"Expected %s target to be an array; got %s",f,e),s(Array.isArray(t[f]),"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",f,t[f]),t[f].forEach(function(e){s(Array.isArray(e),"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",f,t[f]),n.splice.apply(n,e)})),t.hasOwnProperty(h)&&(s(typeof t[h]=="function","update(): expected spec of %s to be a function; got %s.",h,t[h]),n=t[h](n));for(var g in t)if(!d.hasOwnProperty(g)||!d[g])n[g]=m(e[g],t[g]);return n}var r=e("./Object.assign"),i=e("./keyOf"),s=e("./invariant"),u=i({$push:null}),a=i({$unshift:null}),f=i({$splice:null}),l=i({$set:null}),c=i({$merge:null}),h=i({$apply:null}),p=[u,a,f,l,c,h],d={};p.forEach(function(e){d[e]=!0}),t.exports=m},{"./Object.assign":29,"./invariant":140,"./keyOf":147}],160:[function(e,t,n){var r=e("./emptyFunction"),i=r;i=function(e,t){for(var n=[],r=2,i=arguments.length;r<i;r++)n.push(arguments[r]);if(t===undefined)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(!e){var s=0;console.warn("Warning: "+t.replace(/%s/g,function(){return n[s++]}))}},t.exports=i},{"./emptyFunction":121}]},{},[1])(1)}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("models/asset",["backbone","underscore"],function(e,n){var r;return r=function(r){function i(t,n){t==null&&(t={}),n==null&&(n={}),this.representations=new e.Collection([]),n.parse=!0,i.__super__.constructor.call(this,t,n)}return t(i,r),i.prototype.urlRoot="/assets",i.prototype.defaults={tags:[]},i.prototype.sync=function(t,n,r){return r==null&&(r={}),r.parse=!0,e.sync.apply(this,[t,n,r])},i.prototype.parse=function(e){return e.representations&&(this._expandLocations(e),this.representations.set(e.representations),delete e.representations),e},i.prototype.toJSON=function(e){var t;return e==null&&(e={}),t=n.clone(this.attributes),e.upload||(t=n.omit(t,["content","contentType"])),e.representations&&n.extend(t,{representations:this.representations.toJSON()}),t},i.prototype.validate=function(e,t){t==null&&(t={}),this.attributes&&(e=n.extend(this.attributes,e));if(t.upload){if(!e.content)return"content is required to upload an asset";if(!e.contentType)return"contentType is required to upload an asset"}if(!e.title)return"title is required"},i.prototype._expandLocations=function(e){if(!this.baseUrl)return;return n.each(e.representations,function(e){return function(t){if(!t.location.match(/^https?:\/\//))return t.location=e.baseUrl+t.location}}(this))},i}(e.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("models/gadget",["backbone","underscore"],function(e,n){var r;return r=function(r){function i(t,r){t==null&&(t={}),r==null&&(r={}),this.config=new e.Model,this.config.isNew=function(){return!1},this.config.url=function(e){return function(){return n.result(e,"url")+"/config"}}(this),this.userState=new e.Model,this.userState.isNew=function(){return!1},this.userState.url=function(e){return function(){return n.result(e,"url")+"/userstate"}}(this),r.parse=!0,i.__super__.constructor.call(this,t,r)}return t(i,r),i.prototype._locals=["uploadPercent"],i.prototype.parse=function(e){if(!e)return;return e.config&&this.config.set(n.clone(e.config),{silent:!0}),e.userState&&this.userState.set(n.clone(e.userState),{silent:!0}),e.gadgetProject&&(this.gadgetProject=e.gadgetProject),n.omit(e,["config","userState","gadgetProject"])},i.prototype.toJSON=function(){var e;return e=n.clone(this.attributes),this.config&&(e.config=this.config.toJSON()),this.userState&&(e.userState=this.userState.toJSON()),n.omit(e,this._locals)},i.prototype.validate=function(e){if(!e.type)return"Type is required. Did you call parse:true when instantiated your gadget?"},i}(e.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("models/gadget_project",["backbone","underscore","models/gadget"],function(e,n,r){var i,s;return s="/bower_components/versal-gadget-launchers/legacy-iframe-launcher/versal.html",i=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.urlRoot="/gadgets",i.prototype.defaults={title:"Untitled gadget",author:"Unknown author"},i.prototype.url=function(){var e;return e=n.result(this.collection,"url")||this.urlRoot,n.flatten(n.compact([e,this.typeSegments()])).join("/")},i.prototype.path=function(e){var t;return t=this.urlRoot,i.prototype.apiUrl&&(t=i.prototype.apiUrl.replace(/\/$/,"")+t),n.flatten(n.compact([t,this.typeSegments(),e])).join("/")},i.prototype.icon=function(){return this.path("assets/icon.png")},i.prototype.typeSegments=function(){var e;return e=this.get("version")||"latest",[this.get("username"),this.get("name"),e]},i.prototype.type=function(){var e;return e=""+this.get("username")+"/"+this.get("name"),this.get("version")&&(e+="@"+this.get("version")),e},i.prototype._isUpgradable=function(){var e;return e=this.get("latestVersion"),e!=null&&this.get("version")!==e},i.prototype.shortType=function(){return""+this.get("username")+"/"+this.get("name")},i.prototype.cssClassName=function(){return("gadget-"+this.typeSegments().join("-")).replace(/[\.\s]+/g,"_")},i.prototype.isNew=function(){return!1},i.prototype.toJSON=function(e){var t;return t=i.__super__.toJSON.apply(this,arguments),t.distributedIconPath=this.distributedIconPath(),t.isUpgradable=this._isUpgradable(),t.shortType=this.shortType(),t.baseUrl=this.path()+"/",t.manifestUrl=this.path("versal.json"),t.launchUrl=this.launchUrl(),(e!=null?e.include:void 0)?n.pick.apply(this,t,e.include):t},i.prototype.launchUrl=function(){switch(this.get("launcher")){case"iframe":return this.path("versal.html");case"react":return this.path("gadget.js");default:return s}},i.prototype.buildInstance=function(e){var t,i;return i={config:this.get("defaultConfig"),userState:this.get("defaultUserState"),type:this.shortType()},n.extend(i,e),t=new r(i)},i.prototype._checksum=function(e){var t;return t=n.reduce(e.split(""),function(e,t){return e+t.charCodeAt(0)},0),t%10},i.prototype.distributedIconPath=function(){return this.icon().replace(/^(https?:\/\/)((staging)?stack)/,"$1$2-"+this._checksum(this.icon()))},i}(e.Model)})}.call(this),function(){n("models/patch_backbone_sync",["backbone","jquery","underscore","models/asset","models/gadget_project"],function(e,t,n,r,i){var s;return s=function(){function e(){}return e.prototype.ajax=function(e){var r;return r=this.createRequestOptions(e),n.extend(r,{cache:!1,contentType:!1,processData:!1}),t.ajax(r)},e.prototype.createRequestOptions=function(e){return e},e.prototype.createFormData=function(e){var t,n,r,i;t=new FormData,i=e.toJSON({upload:!0});for(n in i)r=i[n],t.append(n,this.normalizeValue(r));return t},e.prototype.normalizeValue=function(e){return e instanceof File||e instanceof Blob?e:n.isArray(e)||n.isObject(e)?JSON.stringify(e):e},e.prototype.sendRequest=function(e){},e}(),function(t){var o,u,a,f;return t==null&&(t={}),this.uploadAdapter=new s,t.url&&(u=t.url.replace(/\/$/,""),r.prototype.baseUrl=u,i.prototype.apiUrl=u,a=t.sessionId),o=e.ajax,e.ajax=function(e){return function(t){return t.upload&&e.uploadAdapter?e.uploadAdapter.ajax.apply(e.uploadAdapter,arguments):o.apply(e,arguments)}}(this),f=e.sync,e.sync=function(e){return function(t,r,i){var s,o;return i==null&&(i={}),i=n.clone(i),o=i.url||n.result(r,"url"),o.match(/^https?:\/\//)?i.url=o:i.url=u+o,s=i.beforeSend,i.beforeSend=function(t){a&&t.setRequestHeader("SESSION_ID",a);if(s)return s.apply(e,arguments)},i.upload&&(i.data=e.uploadAdapter.createFormData(r)),f.apply(e,arguments)}}(this)}})}.call(this),function(){n("collab/vent",["underscore","backbone"],function(e,t){var n;return n=function(){function n(){}return e.extend(n.prototype,t.Events),n}(),new n})}.call(this),function(){n("collab/handler",["collab/vent"],function(e){var t;return t=function(){function t(e){this.conn=e,this.mediator=this.conn.mediator,this.conn.on("ws:open",this.listen,this),this.conn.on("ws:close",this.stopListening,this)}return t.prototype.listen=function(){var t,n,r,i,s,o;if(this.serverEvents){r=this.serverEvents;for(n in r)t=r[n],this.conn.on(n,this[t],this)}if(this.localEvents){i=this.localEvents;for(n in i)t=i[n],e.on(n,this[t],this)}if(this.playerEvents){s=this.playerEvents,o=[];for(n in s)t=s[n],o.push(this.mediator.on(n,this[t],this));return o}},t.prototype.stopListening=function(){var t,n,r,i,s,o;if(this.serverEvents){r=this.serverEvents;for(n in r)t=r[n],this.conn.off(n,this[t],this)}if(this.localEvents){i=this.localEvents;for(n in i)t=i[n],e.off(n,this[t],this)}if(this.playerEvents){s=this.playerEvents,o=[];for(n in s)t=s[n],o.push(this.mediator.off(n,this[t],this));return o}},t}()})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("collab/models/user",["backbone"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(e.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("collab/collections/users",["backbone","collab/models/user"],function(e,n){var r;return r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.model=n,r}(e.Collection)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("collab/handlers/users",["underscore","collab/handler","collab/collections/users","collab/vent"],function(e,n,r,i){var s;return s=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.serverEvents={"user:me":"onUserIdentity","users:list":"onUsersList","user:add":"onUserAdd","user:remove":"onUserRemove"},n.prototype.onUserIdentity=function(e){return this.conn.me=e},n.prototype.onUsersList=function(e){return this._activeUsers=new r(e),i.trigger("activeUsers:update",this._activeUsers)},n.prototype.onUserAdd=function(e){return this._activeUsers.add(e),i.trigger("activeUsers:update",this._activeUsers)},n.prototype.onUserRemove=function(e){return this._activeUsers.remove(this._activeUsers.get(e.id)),i.trigger("activeUsers:update",this._activeUsers)},n}(n)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("collab/models/gadget_lock",["backbone"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.defaults=function(){return{createdAt:new Date}},n.prototype.isLockedByMe=function(){return!!this.get("editable")},n}(e.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("collab/handlers/locks",["underscore","collab/handler","collab/models/gadget_lock","collab/vent"],function(e,n,r,i){var s;return s=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.serverEvents={"locks:list":"onLocksList","lock:lock":"onLock","lock:unlock":"onUnlock"},n.prototype.playerEvents={"collab:gadget:editing:start":"onGadgetEditing","collab:gadget:editing:stop":"onGadgetStopEditing"},n.prototype.onLocksList=function(e){return this.conn.activeLocks.reset(e.models),e.each(function(e){return function(t){return e.triggerLock(t)}}(this))},n.prototype.onGadgetEditing=function(e){var t;return this.conn.triggerEvent("lock:lock",{gadgetId:e.id}),t=new r({gadgetId:e.id,user:this.conn.me,editable:!0}),this.triggerLock(t)},n.prototype.onGadgetStopEditing=function(e){return this.conn.triggerEvent("lock:unlock",{gadgetId:e.id})},n.prototype.onLock=function(e){return this.conn.activeLocks.add(e),this.triggerLock(e)},n.prototype.onUnlock=function(e){var t;t=this.conn.activeLocks.findWhere({gadgetId:e.get("gadgetId")});if(!t)return;return this.conn.activeLocks.remove(t),this.triggerUnlock(t)},n.prototype.triggerLock=function(e){var t;if(((t=e.get("user"))!=null?t.id:void 0)===this.conn.me.id)return;return i.trigger("lock:lock",e),this.mediator.trigger("collab:gadget:locked",e.get("gadgetId"))},n.prototype.triggerUnlock=function(e){if(this.conn.gadgetHasUpdates(e.get("gadgetId")))return;return i.trigger("lock:unlock",e),this.mediator.trigger("collab:gadget:unlocked",e.get("gadgetId"))},n}(n)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("collab/models/gadget_comment",["backbone"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.editable=!1,n.prototype.defaults=function(){return{createdAt:new Date,deleted:!1}},n.prototype.isDeleted=function(){return!!this.get("deleted")},n}(e.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("collab/collections/gadget_comments",["backbone","collab/models/gadget_comment"],function(e,n){var r;return r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.model=n,r}(e.Collection)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("collab/collections/collapsible_gadget_comments",["backbone","collab/collections/gadget_comments","collab/models/gadget_comment"],function(e,n,r){var i;return i=function(i){function s(){return s.__super__.constructor.apply(this,arguments)}return t(s,i),s.prototype.initialize=function(){return this._shadowedCollection=new n,this._shadowedCollection.listenTo(this,"all",this._onModelEvent),this.model=r},s.prototype.collapseDeletedComments=function(t){var n;if(!t||t instanceof e.Collection){this.models.forEach(function(e){return function(t){return e.collapseDeletedComments(t)}}(this));return}n=this.models.indexOf(t);if(n===-1)return;if(!t.get("deleted"))return;return t._deletedStreak=[1,-1].reduce(function(e){return function(t,r){var i;return i=e.at(n+r),i&&i.get("deleted")?(e.remove(i),i._deletedStreak!=null?t+i._deletedStreak:t+1):t}}(this),1),t.trigger("change")},s}(n)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("collab/handlers/comments",["underscore","collab/handler","collab/vent","collab/collections/collapsible_gadget_comments"],function(e,n,r,i){var s;return s=function(e){function n(){this.comments=[],n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype._unresolvedIds={},n.prototype.serverEvents={"comments:list":"onCommentsList","comment:resolve":"onCommentResolve","comment:add":"onCommentAdd","comment:delete":"onCommentDelete"},n.prototype.localEvents={"comment:deleted":"onCommentDeleted","comment:added":"onCommentAdded","commentsView:ready":"replayComments"},n.prototype.onCommentsList=function(e){return this._personalizeCollection(e).each(function(e){return function(t){return e.onCommentAdd(t)}}(this))},n.prototype.replayComments=function(){return this.comments.forEach(function(e){return r.trigger("comment:add",e)})},n.prototype.onCommentResolve=function(e){var t,n;t=e.get("cid"),n=this._unresolvedIds[t];if(n)return n.set({id:e.id}),delete this._unresolvedIds[t]},n.prototype.onCommentAdd=function(e){return r.trigger("comment:add",e),this.comments.push(e)},n.prototype.onCommentDelete=function(e){return r.trigger("comment:delete",e)},n.prototype.onCommentAdded=function(e){return this.comments.push(e),this._pendComment(e),this.conn.triggerEvent("comment:add",{gadgetId:e.get("gadgetId"),body:e.get("body"),cid:e.cid})},n.prototype.onCommentDeleted=function(e){var t;return t={gadgetId:e.get("gadgetId"),commentId:e.id},this.conn.triggerEvent("comment:delete",t)},n.prototype._personalizeCollection=function(e){return e.each(function(e){return function(t){if(t.get("user").id===e.conn.me.id)return t.editable=!0}}(this)),e},n.prototype._pendComment=function(e){return this._unresolvedIds[e.cid]=e},n}(n)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("collab/handlers/updates",["collab/handler","collab/vent"],function(e,n){var r;return r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.serverEvents={"course:update":"_onCourseUpdate"},r.prototype.playerEvents={"collab:lesson:gadget:added":"_onLessonChanged","collab:lesson:gadget:moved":"_onLessonChanged","collab:lesson:gadget:deleted":"_onLessonChanged","collab:gadget:changed":"_onGadgetChanged"},r.prototype._onLessonChanged=function(e,t){return t?this.conn.triggerEvent("course:update",{gadgetId:t.id}):this.conn.triggerEvent("course:update")},r.prototype._onGadgetChanged=function(e){return this.conn.triggerEvent("course:update",{gadgetId:e.id})},r.prototype._onCourseUpdate=function(e){return this.conn.updates.push(e),n.trigger("collab:update")},r}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("collab/handlers/activity",["jquery","collab/handler"],function(e,n){var r;return r=function(n){function r(){r.__super__.constructor.apply(this,arguments),e(document).on("ajaxComplete",function(e){return function(){return e.conn.resetLastActivity()}}(this))}return t(r,n),r}(n)})}.call(this),function(){n("collab/templates/contributor",[],function(){return'<a href="<%- userUrl %>" target="_blank">\n  <img src="<%- thumbnail %>" alt="<%- name() %>" class="contrib-icon" title="<%- name() %>">\n</a>'})}.call(this),function(){n("collab/templates/contributors",[],function(){return'<h4>Contributors</h4>\n<div class="js-toggle-collapse">\n  <i class="collapse icon-double-angle-down"></i>\n  <i class="expand icon-double-angle-up"></i>\n</div>\n<ul class="icons js-icons"></ul>'})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,r=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};n("collab/views/contributors",["backbone","marionette","collab/templates/contributor","collab/templates/contributors","collab/vent"],function(t,n,i,s,o){var u,a;return u=function(t){function n(){return this.templateHelpers=e(this.templateHelpers,this),n.__super__.constructor.apply(this,arguments)}return r(n,t),n.prototype.initialize=function(e){this.site=e.site},n.prototype.template=_.template(i),n.prototype.templateHelpers=function(){return{thumbnail:this.getThumbnail(),name:function(e){return function(){return e.model.get("firstname")||e.model.get("fn")||"Anonymous"}}(this),site:this.site,userUrl:""+this.site+"/u/"+this.model.id}},n.prototype.tagName="li",n.prototype.className="contributor",n.prototype.getThumbnail=function(){var e,t;return e=_.findWhere((t=this.model.get("image"))!=null?t.representations:void 0,{scale:"40x40"}),(e!=null?e.location:void 0)||""+this.site+"/assets/img/defaults/profile-retina.jpg"},n}(n.ItemView),a=function(n){function i(){return this.initialize=e(this.initialize,this),i.__super__.constructor.apply(this,arguments)}return r(i,n),i.prototype.initialize=function(e){return this.mediator=e.mediator,this.conn=e.conn,this.site=e.site,this.collection=new t.Collection},i.prototype.onShow=function(){return this.conn.on("ws:open",this.render,this),this.conn.on("ws:close",this.render,this),this.listenTo(this,"composite:collection:rendered",this.onCollectionRender),o.on("activeUsers:update",this._onActiveUsersChange,this)},i.prototype.onClose=function(){return this.conn.off("ws:open",this.render,this),this.conn.off("ws:close",this.render,this),o.off("activeUsers:update",this._onActiveUsersChange,this)},i.prototype.itemView=u,i.prototype.itemViewOptions=function(){return{site:this.site}},i.prototype.itemViewContainer=".js-icons",i.prototype.template=_.template(s),i.prototype.className="contributors collapsed",i.prototype.onCollectionRender=function(){return this.$el.toggle(!!this.conn.enabled&&this.collection.length>0),this.trigger("sizeChanged")},i.prototype.events={"click .js-toggle-collapse":"onCollapseToggle"},i.prototype.onCollapseToggle=function(){return this.$el.toggleClass("collapsed"),this.trigger("toggleCollapse")},i.prototype._onActiveUsersChange=function(e){return this.collection.reset(e.models)},i}(n.CompositeView)})}.call(this),function(){n("collab/plugins/time_since",[],function(){return function(e){var t,n,r,i,s,o,u,a,f,l;t=+(new Date)-e;if(t<=3e4)n="seconds";else if(3e4<t&&t<=6e4)n="less than a minute";else{f=[["minute",6e4,36e5],["hour",36e5,864e5],["day",864e5,Infinity]];for(u=0,a=f.length;u<a;u++)l=f[u],s=l[0],i=l[1],r=l[2],i<t&&t<=r&&(o=Math.floor(t/i),n=""+o+" "+s,o>1&&(n+="s"))}return n}})}.call(this),function(){n("collab/templates/gadget_comment",[],function(){return'<% if (deleted && deletedStreak() > 1) { %>\n  <div class="deleted_comment">\n    <p><%= deletedStreak() %> comments have been deleted</p>\n  </div>\n<% } else if (deleted) { %>\n  <div class="deleted_comment">\n    <p>Comment has been deleted</p>\n  </div>\n<% } else { %>\n  <div class="comment-inner">\n    <div class=\'js-delete-overlay delete-overlay\'>\n      <div class=\'delete-content\'>\n        Delete this comment?\n        <button class=\'js-cancel-delete\'>no</button>\n        <button class=\'js-confirm-delete action\'>yes</button>\n      </div>\n    </div>\n    <img src="<%- profileImage() %>"></img>\n    <div class="commentInfo">\n      <p class="commentAuthor"><%- name() %></p><br/>\n      <p class="commentDate"><span class="js-timestamp timestamp">seconds</span> ago</p>\n    </div>\n    <p class="js-comment-body comment-body"><%= body() %></p>\n    <div class="js-comment-actions comment-actions">\n      <span class="js-show comment-action show-more">show more</span>\n      <span class="js-show comment-action show-less">show less</span>\n      <% if (isDeletable()) { %>\n        <span class="js-delete-comment delete-comment comment-action pull-right">delete</span>\n      <% } %>\n    </div>\n  </div>\n<% } %>'})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,r=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};n("collab/views/comment",["marionette","collab/plugins/time_since","collab/templates/gadget_comment","collab/vent"],function(t,n,i,s){var o;return o=function(t){function o(){return this.updateTimeSince=e(this.updateTimeSince,this),this.profileImage=e(this.profileImage,this),this.sanitizeBody=e(this.sanitizeBody,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.prototype.updateTimeSinceEveryMs=1e4,o.prototype.className="comment",o.prototype.events={"click .js-delete-comment":"_onDeleteClick","click .js-show":"toggleShow","click .js-confirm-delete":"_onConfirmDelete","click .js-cancel-delete":"_onCancelDelete"},o.prototype.template=_.template(i),o.prototype.ui={createdAt:".js-timestamp",commentBody:".js-comment-body",deleteOverlay:".js-delete-overlay"},o.prototype.initialize=function(e){return this.site=e.site,this.mediator=e.mediator,this.listenTo(this.model,"change",this.render)},o.prototype.toggleShow=function(){return this.$el.toggleClass("expanded"),this.$el.toggleClass("compacted")},o.prototype.templateHelpers=function(){return{profileImage:this.profileImage,name:function(e){return function(){var t,n;return((t=e.model.get("user"))!=null?t.firstname:void 0)||((n=e.model.get("user"))!=null?n.fn:void 0)||"Anonymous"}}(this),body:this.sanitizeBody,deletedStreak:function(e){return function(){return e.model._deletedStreak}}(this),isDeletable:function(e){return function(){return e.model.editable&&!e.model.isNew()}}(this)}},o.prototype.sanitizeBody=function(){var e,t,n,r;n=_.escape(this.model.get("body")),t={http:{"in":/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,out:'<a href="$1" target="_blank">$1</a>'},www:{"in":/(^|[^\/])(www\.[\S]+(\b|$))/gim,out:'$1<a href="http://$2" target="_blank">$2</a>'},email:{"in":/(^\S+@\S+\.\S+$)/gi,out:'<a href="mailto:$1">$1</a>'},newlines:{"in":/\n/g,out:"<br>"}};for(r in t)e=t[r],n=n.replace(e["in"],e.out);return n},o.prototype.profileImage=function(){var e,t;return t=this.model.get("user"),(t!=null?t.image:void 0)?(e=_.find(t.image.representations,function(e){return e.scale==="140x140"}),e.location):""+this.site+"/assets/img/defaults/profile-retina.jpg"},o.prototype.onRender=function(){return this.updateTimeSince()},o.prototype.onShow=function(){return this.determineHeight()},o.prototype.onClose=function(){return this.stopUpdatingTimeSince()},o.prototype.startUpdatingTimeSince=function(){if(!this.timeSinceUpdater&&!this.model.get("deleted"))return this.timeSinceUpdater=setInterval(this.updateTimeSince,this.updateTimeSinceEveryMs)},o.prototype.stopUpdatingTimeSince=function(){return clearInterval(this.timeSinceUpdater)},o.prototype._onDeleteClick=function(){return this.ui.deleteOverlay.show()},o.prototype._onConfirmDelete=function(){return this.ui.deleteOverlay.hide(),this.model.set({deleted:!0}),s.trigger("comment:deleted",this.model)},o.prototype._onCancelDelete=function(){return this.ui.deleteOverlay.hide()},o.prototype.updateTimeSince=function(){var e;return e=new Date(this.model.get("createdAt")),this.ui.createdAt.text(n(e))},o.prototype.determineHeight=function(){if(this.ui.commentBody.height()>145)return this.$el.addClass("compacted")},o}(t.ItemView)})}.call(this),function(){n("collab/templates/gadget_comments",[],function(){return'<ul class="comments-toolbar">\n  <li class="actions">\n    <span class="comments js-comments">\n      <span class="js-comments-toggle comments-toggle icon-stack">\n        <i class="fv-bubble icon-stack-base"></i>\n        <i class="js-comments-count icon-inner-text"><%- commentCount %></i>\n      </span>\n      <div class="js-comments-box comments-box">\n        <div class="js-inner-comments inner-comments"></div>\n        <textarea class="js-submit-comment-text submit-comment-text" maxlength="800" placeholder="Write a message here..."></textarea>\n        <div class="submit-action-buttons js-submit-action-buttons">\n          <button class="cancel-button js-cancel-comment ">cancel</button>\n          <button class="action submit-button js-submit-comment pull-right">submit</button>\n        </div>\n      </div>\n    </span>\n  </li>\n</ul>'})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,r=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};n("collab/views/comments",["marionette","collab/views/comment","collab/templates/gadget_comments","collab/models/gadget_comment","collab/collections/collapsible_gadget_comments","collab/vent"],function(t,n,i,s,o,u){var a;return a=function(t){function a(){return this.stopCommenting=e(this.stopCommenting,this),this.startCommenting=e(this.startCommenting,this),this.onCommentsToggled=e(this.onCommentsToggled,this),this.onCommentToggleClicked=e(this.onCommentToggleClicked,this),this._onCommentsChange=e(this._onCommentsChange,this),this.enable=e(this.enable,this),this.disable=e(this.disable,this),a.__super__.constructor.apply(this,arguments)}return r(a,t),a.prototype.className="comments-container",a.prototype.ui={commentText:".js-submit-comment-text",commentsCount:".js-comments-count",commentsDisplay:".js-comments-box",commentsSubmitButtons:".js-submit-action-buttons",commentsBox:".js-comments",innerCommentsBox:".js-inner-comments"},a.prototype.events={"click .js-comments-toggle":"onCommentToggleClicked","click .js-submit-comment":"onCommentSubmit","click .js-cancel-comment":"onCommentCancel",click:"onClick"},a.prototype.template=_.template(i),a.prototype.templateHelpers=function(){return{commentCount:this.commentCount()}},a.prototype.itemView=n,a.prototype.itemViewOptions=function(){return{site:this.site,mediator:this.mediator}},a.prototype.itemViewContainer=".inner-comments",a.prototype.initialize=function(e){return this.mediator=e.mediator,this.site=e.site,this.conn=e.conn,this.gadgetId=e.gadgetId,this.delegateEvents(),this.collection=new o,this.listenTo(this.collection,"add remove reset change:deleted",this._onCommentsChange)},a.prototype.onRender=function(){if(this.conn.subscribed)return this.enable()},a.prototype.onShow=function(){return u.on("comment:add",this.addComment,this),u.on("comment:delete",this.deleteComment,this),u.on("comments:toggle",this.onCommentsToggled,this),this.conn.on("subscribed",this.enable),this.conn.on("unsubscribed",this.disable),u.trigger("commentsView:ready",this.gadgetId)},a.prototype.onClose=function(){return u.off("comment:add",this.addComment,this),u.off("comment:delete",this.deleteComment,this),u.off("comments:toggle",this.onCommentsToggled,this),this.conn.off("subscribed",this.enable),this.conn.off("unsubscribed",this.disable)},a.prototype.onClick=function(e){},a.prototype.disable=function(){return this.$el.hide()},a.prototype.enable=function(){return this.$el.show()},a.prototype.addComment=function(e){var t;t=e.get("gadgetId");if(t===this.gadgetId)return this.collection.add(e)},a.prototype.deleteComment=function(e){var t;if(e.gadgetId===this.gadgetId)return(t=this.collection.get(e.commentId))!=null?t.set({deleted:!0}):void 0},a.prototype.onCommentSubmit=function(){var e;if(!this.ui.commentText.val())return;return e=new s({gadgetId:this.gadgetId,body:this.ui.commentText.val(),user:this.conn.me}),e.editable=!0,this.ui.commentText.val(""),this.addComment(e),u.trigger("comment:added",e),this.scrollToBottom()},a.prototype.commentCount=function(){var e,t;return e=this.collection.reject(function(e){return e.get("deleted")}),t=e.length,t>99?"99+":t<=0?"+":t},a.prototype._onCommentsChange=function(e){return this.collection.collapseDeletedComments(e),this.ui.commentsCount.text(this.commentCount()),this.children.each(function(e){return e.startUpdatingTimeSince()})},a.prototype.hideComments=function(){return this.ui.commentsDisplay.hide()},a.prototype.onCommentCancel=function(){return this.ui.commentText.val(""),this.onCommentToggleClicked()},a.prototype.checkForCollapsedComments=function(){return this.children.each(function(e){return e.determineHeight()})},a.prototype.scrollToBottom=function(){return this.ui.innerCommentsBox.scrollTop(this.ui.innerCommentsBox[0].scrollHeight)},a.prototype.show=function(){var e;return this.$el.addClass("comments-visible"),this.checkForCollapsedComments(),e=this.ui.commentsDisplay.height()+this.ui.commentsDisplay.offset().top,this.ui.commentsDisplay.toggleClass("above",e>$("body").height()),this.scrollToBottom(),this.ui.commentText.focus()},a.prototype.hide=function(){return this.$el.removeClass("comments-visible"),this.ui.commentsDisplay.removeClass("above"),this.children.each(function(e){return e.stopUpdatingTimeSince()})},a.prototype.onCommentToggleClicked=function(){return u.trigger("comments:toggle",this.gadgetId)},a.prototype.onCommentsToggled=function(e){return e===this.gadgetId?this.toggleCommenting():this.stopCommenting()},a.prototype.toggleCommenting=function(){return this._isCommenting?this.stopCommenting():this.startCommenting()},a.prototype.startCommenting=function(){return this._isCommenting=!0,this.show(),$(window).one("click",this.stopCommenting),this.$el.on("click",this._prevent)},a.prototype.stopCommenting=function(){return this._isCommenting=!1,this.hide(),$(window).off("click",this.stopCommenting),this.$el.off("click",this._prevent)},a.prototype._prevent=function(e){return e.stopPropagation()},a}(t.CompositeView)})}.call(this),function(){n("collab/templates/gadget_lock",[],function(){return'<i class="collab-lock-icon icon-lock"></i>\n<div class="collab-lock-tooltip">\n  <img class="collab-lock-avatar js-lock-avatar" src="<%- profileImage() %>"></img>\n  <%- name() %>\n</div>'})}.call(this),function(e,r){typeof n=="function"&&n.amd?n("tether",r):typeof exports=="object"?module.exports=r(t,exports,module):e.Tether=r()}(this,function(e,t,n){return function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g={}.hasOwnProperty,y=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},b=[].slice;this.Tether==null&&(this.Tether={modules:[]}),l=function(e){var t,n,r,i,s;n=getComputedStyle(e).position;if(n==="fixed")return e;r=void 0,t=e;while(t=t.parentNode){try{i=getComputedStyle(t)}catch(o){}if(i==null)return t;if(/(auto|scroll)/.test(i.overflow+i.overflowY+i.overflowX))if(n!=="absolute"||(s=i.position)==="relative"||s==="absolute"||s==="fixed")return t}return document.body},d=function(){var e;return e=0,function(){return e++}}(),m={},a=function(e){var t,r,s,o,u;s=e._tetherZeroElement,s==null&&(s=e.createElement("div"),s.setAttribute("data-tether-id",d()),i(s.style,{top:0,left:0,position:"absolute"}),e.body.appendChild(s),e._tetherZeroElement=s),t=s.getAttribute("data-tether-id");if(m[t]==null){m[t]={},u=s.getBoundingClientRect();for(r in u)o=u[r],m[t][r]=o;n(function(){return m[t]=void 0})}return m[t]},h=null,o=function(e){var t,n,r,i,s,o,u;e===document?(n=document,e=document.documentElement):n=e.ownerDocument,r=n.documentElement,t={},u=e.getBoundingClientRect();for(i in u)o=u[i],t[i]=o;return s=a(n),t.top-=s.top,t.left-=s.left,t.width==null&&(t.width=document.body.scrollWidth-t.left-t.right),t.height==null&&(t.height=document.body.scrollHeight-t.top-t.bottom),t.top=t.top-r.clientTop,t.left=t.left-r.clientLeft,t.right=n.body.clientWidth-t.width-t.left,t.bottom=n.body.clientHeight-t.height-t.top,t},u=function(e){return e.offsetParent||document.documentElement},f=function(){var e,t,n,r,s;return e=document.createElement("div"),e.style.width="100%",e.style.height="200px",t=document.createElement("div"),i(t.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t),r=e.offsetWidth,t.style.overflow="scroll",s=e.offsetWidth,r===s&&(s=t.clientWidth),document.body.removeChild(t),n=r-s,{width:n,height:n}},i=function(e){var t,n,r,i,s,o,u;e==null&&(e={}),t=[],Array.prototype.push.apply(t,arguments),u=t.slice(1);for(s=0,o=u.length;s<o;s++){r=u[s];if(r)for(n in r){if(!g.call(r,n))continue;i=r[n],e[n]=i}}return e},p=function(e,t){var n,r,i,s,o;if(e.classList!=null){s=t.split(" "),o=[];for(r=0,i=s.length;r<i;r++)n=s[r],n.trim()&&o.push(e.classList.remove(n));return o}return e.setAttribute("class",e.getAttribute("class").replace(new RegExp("(^| )"+t.split(" ").join("|")+"( |$)","gi")," "))},t=function(e,t){var n,r,i,s,o;if(e.classList!=null){s=t.split(" "),o=[];for(r=0,i=s.length;r<i;r++)n=s[r],n.trim()&&o.push(e.classList.add(n));return o}return p(e,t),e.className+=" "+t},c=function(e,t){return e.classList!=null?e.classList.contains(t):(new RegExp("(^| )"+t+"( |$)","gi")).test(e.className)},v=function(e,n,r){var i,s,o,u,a,f;for(s=0,u=r.length;s<u;s++)i=r[s],y.call(n,i)<0&&c(e,i)&&p(e,i);f=[];for(o=0,a=n.length;o<a;o++)i=n[o],c(e,i)?f.push(void 0):f.push(t(e,i));return f},r=[],n=function(e){return r.push(e)},s=function(){var e,t;t=[];while(e=r.pop())t.push(e());return t},e=function(){function e(){}return e.prototype.on=function(e,t,n,r){var i;return r==null&&(r=!1),this.bindings==null&&(this.bindings={}),(i=this.bindings)[e]==null&&(i[e]=[]),this.bindings[e].push({handler:t,ctx:n,once:r})},e.prototype.once=function(e,t,n){return this.on(e,t,n,!0)},e.prototype.off=function(e,t){var n,r,i;if(((r=this.bindings)!=null?r[e]:void 0)==null)return;if(t==null)return delete this.bindings[e];n=0,i=[];while(n<this.bindings[e].length)this.bindings[e][n].handler===t?i.push(this.bindings[e].splice(n,1)):i.push(n++);return i},e.prototype.trigger=function(){var e,t,n,r,i,s,o,u,a;n=arguments[0],e=2<=arguments.length?b.call(arguments,1):[];if((o=this.bindings)!=null?o[n]:void 0){i=0,a=[];while(i<this.bindings[n].length)u=this.bindings[n][i],r=u.handler,t=u.ctx,s=u.once,r.apply(t!=null?t:this,e),s?a.push(this.bindings[n].splice(i,1)):a.push(i++);return a}},e}(),this.Tether.Utils={getScrollParent:l,getBounds:o,getOffsetParent:u,extend:i,addClass:t,removeClass:p,hasClass:c,updateClasses:v,defer:n,flush:s,uniqueId:d,Evented:e,getScrollBarSize:f}}.call(this),function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A=[].slice,O=function(e,t){return function(){return e.apply(t,arguments)}};if(this.Tether==null)throw new Error("You must include the utils.js file before tether.js");r=this.Tether,L=r.Utils,v=L.getScrollParent,m=L.getSize,p=L.getOuterSize,c=L.getBounds,h=L.getOffsetParent,f=L.extend,i=L.addClass,S=L.removeClass,N=L.updateClasses,a=L.defer,l=L.flush,d=L.getScrollBarSize,C=function(e,t,n){return n==null&&(n=1),e+n>=t&&t>=e-n},T=function(){var e,t,n,r,i;e=document.createElement("div"),i=["transform","webkitTransform","OTransform","MozTransform","msTransform"];for(n=0,r=i.length;n<r;n++){t=i[n];if(e.style[t]!==void 0)return t}}(),x=[],E=function(){var e,t,n;for(t=0,n=x.length;t<n;t++)e=x[t],e.position(!1);return l()},g=function(){var e;return(e=typeof performance!=="undefined"&&performance!==null?typeof performance.now==="function"?performance.now():void 0:void 0)!=null?e:+(new Date)},function(){var e,t,n,r,i,s,o,u,a;t=null,n=null,r=null,i=function(){if(n!=null&&n>16){n=Math.min(n-16,250),r=setTimeout(i,250);return}if(t!=null&&g()-t<10)return;return r!=null&&(clearTimeout(r),r=null),t=g(),E(),n=g()-t},u=["resize","scroll","touchmove"],a=[];for(s=0,o=u.length;s<o;s++)e=u[s],a.push(window.addEventListener(e,i));return a}(),e={center:"center",left:"right",right:"left"},t={middle:"middle",top:"bottom",bottom:"top"},n={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},u=function(n,r){var i,s;return i=n.left,s=n.top,i==="auto"&&(i=e[r.left]),s==="auto"&&(s=t[r.top]),{left:i,top:s}},o=function(e){var t,r;return{left:(t=n[e.left])!=null?t:e.left,top:(r=n[e.top])!=null?r:e.top}},s=function(){var e,t,n,r,i,s,o;t=1<=arguments.length?A.call(arguments,0):[],n={top:0,left:0};for(i=0,s=t.length;i<s;i++)o=t[i],r=o.top,e=o.left,typeof r=="string"&&(r=parseFloat(r,10)),typeof e=="string"&&(e=parseFloat(e,10)),n.top+=r,n.left+=e;return n},y=function(e,t){return typeof e.left=="string"&&e.left.indexOf("%")!==-1&&(e.left=parseFloat(e.left,10)/100*t.width),typeof e.top=="string"&&e.top.indexOf("%")!==-1&&(e.top=parseFloat(e.top,10)/100*t.height),e},b=w=function(e){var t,n,r;return r=e.split(" "),n=r[0],t=r[1],{top:n,left:t}},k=function(){function e(e){this.position=O(this.position,this);var t,n,i,s,o;x.push(this),this.history=[],this.setOptions(e,!1),s=r.modules;for(n=0,i=s.length;n<i;n++)t=s[n],(o=t.initialize)!=null&&o.call(this);this.position()}return e.modules=[],e.prototype.getClass=function(e){var t,n;return((t=this.options.classes)!=null?t[e]:void 0)?this.options.classes[e]:((n=this.options.classes)!=null?n[e]:void 0)!==!1?this.options.classPrefix?""+this.options.classPrefix+"-"+e:e:""},e.prototype.setOptions=function(e,t){var n,r,s,o,u,a;this.options=e,t==null&&(t=!0),n={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},this.options=f(n,this.options),u=this.options,this.element=u.element,this.target=u.target,this.targetModifier=u.targetModifier,this.target==="viewport"?(this.target=document.body,this.targetModifier="visible"):this.target==="scroll-handle"&&(this.target=document.body,this.targetModifier="scroll-handle"),a=["element","target"];for(s=0,o=a.length;s<o;s++){r=a[s];if(this[r]==null)throw new Error("Tether Error: Both element and target must be defined");this[r].jquery!=null?this[r]=this[r][0]:typeof this[r]=="string"&&(this[r]=document.querySelector(this[r]))}i(this.element,this.getClass("element")),i(this.target,this.getClass("target"));if(!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=b(this.options.targetAttachment),this.attachment=b(this.options.attachment),this.offset=w(this.options.offset),this.targetOffset=w(this.options.targetOffset),this.scrollParent!=null&&this.disable(),this.targetModifier==="scroll-handle"?this.scrollParent=this.target:this.scrollParent=v(this.target);if(this.options.enabled!==!1)return this.enable(t)},e.prototype.getTargetBounds=function(){var e,t,n,r,i,s,o,u,a;if(this.targetModifier==null)return c(this.target);switch(this.targetModifier){case"visible":return this.target===document.body?{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth}:(e=c(this.target),i={height:e.height,width:e.width,top:e.top,left:e.left},i.height=Math.min(i.height,e.height-(pageYOffset-e.top)),i.height=Math.min(i.height,e.height-(e.top+e.height-(pageYOffset+innerHeight))),i.height=Math.min(innerHeight,i.height),i.height-=2,i.width=Math.min(i.width,e.width-(pageXOffset-e.left)),i.width=Math.min(i.width,e.width-(e.left+e.width-(pageXOffset+innerWidth))),i.width=Math.min(innerWidth,i.width),i.width-=2,i.top<pageYOffset&&(i.top=pageYOffset),i.left<pageXOffset&&(i.left=pageXOffset),i);case"scroll-handle":return a=this.target,a===document.body?(a=document.documentElement,e={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):e=c(a),u=getComputedStyle(a),n=a.scrollWidth>a.clientWidth||"scroll"===[u.overflow,u.overflowX]||this.target!==document.body,s=0,n&&(s=15),r=e.height-parseFloat(u.borderTopWidth)-parseFloat(u.borderBottomWidth)-s,i={width:15,height:r*.975*(r/a.scrollHeight),left:e.left+e.width-parseFloat(u.borderLeftWidth)-15},t=0,r<408&&this.target===document.body&&(t=-0.00011*Math.pow(r,2)-.00727*r+22.58),this.target!==document.body&&(i.height=Math.max(i.height,24)),o=this.target.scrollTop/(a.scrollHeight-r),i.top=o*(r-i.height-t)+e.top+parseFloat(u.borderTopWidth),this.target===document.body&&(i.height=Math.max(i.height,24)),i}},e.prototype.clearCache=function(){return this._cache={}},e.prototype.cache=function(e,t){return this._cache==null&&(this._cache={}),this._cache[e]==null&&(this._cache[e]=t.call(this)),this._cache[e]},e.prototype.enable=function(e){e==null&&(e=!0),i(this.target,this.getClass("enabled")),i(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParent!==document&&this.scrollParent.addEventListener("scroll",this.position);if(e)return this.position()},e.prototype.disable=function(){S(this.target,this.getClass("enabled")),S(this.element,this.getClass("enabled")),this.enabled=!1;if(this.scrollParent!=null)return this.scrollParent.removeEventListener("scroll",this.position)},e.prototype.destroy=function(){var e,t,n,r,i;this.disable(),i=[];for(e=n=0,r=x.length;n<r;e=++n){t=x[e];if(t===this){x.splice(e,1);break}i.push(void 0)}return i},e.prototype.updateAttachClasses=function(e,t){var n,r,i,s,o,u,f,l,c,h=this;e==null&&(e=this.attachment),t==null&&(t=this.targetAttachment),s=["left","top","bottom","right","middle","center"],((c=this._addAttachClasses)!=null?c.length:void 0)&&this._addAttachClasses.splice(0,this._addAttachClasses.length),n=this._addAttachClasses!=null?this._addAttachClasses:this._addAttachClasses=[],e.top&&n.push(""+this.getClass("element-attached")+"-"+e.top),e.left&&n.push(""+this.getClass("element-attached")+"-"+e.left),t.top&&n.push(""+this.getClass("target-attached")+"-"+t.top),t.left&&n.push(""+this.getClass("target-attached")+"-"+t.left),r=[];for(o=0,f=s.length;o<f;o++)i=s[o],r.push(""+this.getClass("element-attached")+"-"+i);for(u=0,l=s.length;u<l;u++)i=s[u],r.push(""+this.getClass("target-attached")+"-"+i);return a(function(){if(h._addAttachClasses==null)return;return N(h.element,h._addAttachClasses,r),N(h.target,h._addAttachClasses,r),h._addAttachClasses=void 0})},e.prototype.position=function(e){var t,n,i,a,f,p,v,m,g,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X=this;e==null&&(e=!0);if(!this.enabled)return;this.clearCache(),A=u(this.targetAttachment,this.attachment),this.updateAttachClasses(this.attachment,A),t=this.cache("element-bounds",function(){return c(X.element)}),P=t.width,i=t.height,P===0&&i===0&&this.lastSize!=null?(I=this.lastSize,P=I.width,i=I.height):this.lastSize={width:P,height:i},_=M=this.cache("target-bounds",function(){return X.getTargetBounds()}),g=y(o(this.attachment),{width:P,height:i}),O=y(o(A),_),f=y(this.offset,{width:P,height:i}),p=y(this.targetOffset,_),g=s(g,f),O=s(O,p),a=M.left+O.left-g.left,D=M.top+O.top-g.top,q=r.modules;for(H=0,j=q.length;H<j;H++){v=q[H],T=v.position.call(this,{left:a,top:D,targetAttachment:A,targetPos:M,attachment:this.attachment,elementPos:t,offset:g,targetOffset:O,manualOffset:f,manualTargetOffset:p,scrollbarSize:k});if(T==null||typeof T!="object")continue;if(T===!1)return!1;D=T.top,a=T.left}m={page:{top:D,left:a},viewport:{top:D-pageYOffset,bottom:pageYOffset-D-i+innerHeight,left:a-pageXOffset,right:pageXOffset-a-P+innerWidth}},document.body.scrollWidth>window.innerWidth&&(k=this.cache("scrollbar-size",d),m.viewport.bottom-=k.height),document.body.scrollHeight>window.innerHeight&&(k=this.cache("scrollbar-size",d),m.viewport.right-=k.width);if((R=document.body.style.position)!==""&&R!=="static"||(U=document.body.parentElement.style.position)!==""&&U!=="static")m.page.bottom=document.body.scrollHeight-D-i,m.page.right=document.body.scrollWidth-a-P;if(((z=this.options.optimizations)!=null?z.moveElement:void 0)!==!1&&this.targetModifier==null){w=this.cache("target-offsetparent",function(){return h(X.target)}),x=this.cache("target-offsetparent-bounds",function(){return c(w)}),S=getComputedStyle(w),n=getComputedStyle(this.element),E=x,b={},W=["Top","Left","Bottom","Right"];for(B=0,F=W.length;B<F;B++)L=W[B],b[L.toLowerCase()]=parseFloat(S["border"+L+"Width"]);x.right=document.body.scrollWidth-x.left-E.width+b.right,x.bottom=document.body.scrollHeight-x.top-E.height+b.bottom,m.page.top>=x.top+b.top&&m.page.bottom>=x.bottom&&m.page.left>=x.left+b.left&&m.page.right>=x.right&&(C=w.scrollTop,N=w.scrollLeft,m.offset={top:m.page.top-x.top+C-b.top,left:m.page.left-x.left+N-b.left})}return this.move(m),this.history.unshift(m),this.history.length>3&&this.history.pop(),e&&l(),!0},e.prototype.move=function(e){var t,n,r,i,s,o,u,l,c,p,d,v,m,g,y,b,w,E=this;if(this.element.parentNode==null)return;l={};for(p in e){l[p]={};for(i in e[p]){r=!1,b=this.history;for(g=0,y=b.length;g<y;g++){u=b[g];if(!C((w=u[p])!=null?w[i]:void 0,e[p][i])){r=!0;break}}r||(l[p][i]=!0)}}t={top:"",left:"",right:"",bottom:""},c=function(e,n){var r,i,s;if(((s=E.options.optimizations)!=null?s.gpu:void 0)===!1)return e.top?t.top=""+n.top+"px":t.bottom=""+n.bottom+"px",e.left?t.left=""+n.left+"px":t.right=""+n.right+"px";e.top?(t.top=0,i=n.top):(t.bottom=0,i=-n.bottom),e.left?(t.left=0,r=n.left):(t.right=0,r=-n.right),t[T]="translateX("+Math.round(r)+"px) translateY("+Math.round(i)+"px)";if(T!=="msTransform")return t[T]+=" translateZ(0)"},s=!1,(l.page.top||l.page.bottom)&&(l.page.left||l.page.right)?(t.position="absolute",c(l.page,e.page)):(l.viewport.top||l.viewport.bottom)&&(l.viewport.left||l.viewport.right)?(t.position="fixed",c(l.viewport,e.viewport)):l.offset!=null&&l.offset.top&&l.offset.left?(t.position="absolute",o=this.cache("target-offsetparent",function(){return h(E.target)}),h(this.element)!==o&&a(function(){return E.element.parentNode.removeChild(E.element),o.appendChild(E.element)}),c(l.offset,e.offset),s=!0):(t.position="absolute",c({top:!0,left:!0},e.page)),!s&&this.element.parentNode.tagName!=="BODY"&&(this.element.parentNode.removeChild(this.element),document.body.appendChild(this.element)),m={},v=!1;for(i in t)d=t[i],n=this.element.style[i],n!==""&&d!==""&&(i==="top"||i==="left"||i==="bottom"||i==="right")&&(n=parseFloat(n),d=parseFloat(d)),n!==d&&(v=!0,m[i]=t[i]);if(v)return a(function(){return f(E.element.style,m)})},e}(),r.position=E,this.Tether=f(k,r)}.call(this),function(){var e,t,n,r,i,s,o,u,a,f,l=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};f=this.Tether.Utils,o=f.getOuterSize,s=f.getBounds,u=f.getSize,r=f.extend,a=f.updateClasses,n=f.defer,t={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle"},e=["left","top","right","bottom"],i=function(t,n){var r,i,o,u,a,f,l;n==="scrollParent"?n=t.scrollParent:n==="window"&&(n=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),n===document&&(n=n.documentElement);if(n.nodeType!=null){i=u=s(n),a=getComputedStyle(n),n=[i.left,i.top,u.width+i.left,u.height+i.top];for(r=f=0,l=e.length;f<l;r=++f)o=e[r],o=o[0].toUpperCase()+o.substr(1),o==="Top"||o==="Left"?n[r]+=parseFloat(a["border"+o+"Width"]):n[r]-=parseFloat(a["border"+o+"Width"])}return n},this.Tether.modules.push({position:function(t){var o,u,f,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt=this;D=t.top,y=t.left,L=t.targetAttachment;if(!this.options.constraints)return!0;N=function(t){var n,r,i,s;tt.removeClass(t),s=[];for(r=0,i=e.length;r<i;r++)n=e[r],s.push(tt.removeClass(""+t+"-"+n));return s},$=this.cache("element-bounds",function(){return s(tt.element)}),g=$.height,P=$.width,P===0&&g===0&&this.lastSize!=null&&(J=this.lastSize,P=J.width,g=J.height),O=this.cache("target-bounds",function(){return tt.getTargetBounds()}),A=O.height,M=O.width,k={},m={},u=[this.getClass("pinned"),this.getClass("out-of-bounds")],K=this.options.constraints;for(H=0,I=K.length;H<I;H++)v=K[H],v.outOfBoundsClass&&u.push(v.outOfBoundsClass),v.pinnedClass&&u.push(v.pinnedClass);for(B=0,q=u.length;B<q;B++){d=u[B],Q=["left","top","right","bottom"];for(j=0,R=Q.length;j<R;j++)C=Q[j],u.push(""+d+"-"+C)}o=[],k=r({},L),m=r({},this.attachment),G=this.options.constraints;for(F=0,U=G.length;F<U;F++){v=G[F],_=v.to,f=v.attachment,S=v.pin,f==null&&(f=""),l.call(f," ")>=0?(Y=f.split(" "),p=Y[0],h=Y[1]):h=p=f,c=i(this,_);if(p==="target"||p==="both")D<c[1]&&k.top==="top"&&(D+=A,k.top="bottom"),D+g>c[3]&&k.top==="bottom"&&(D-=A,k.top="top");p==="together"&&(D<c[1]&&k.top==="top"&&(m.top==="bottom"?(D+=A,k.top="bottom",D+=g,m.top="top"):m.top==="top"&&(D+=A,k.top="bottom",D-=g,m.top="bottom")),D+g>c[3]&&k.top==="bottom"&&(m.top==="top"?(D-=A,k.top="top",D-=g,m.top="bottom"):m.top==="bottom"&&(D-=A,k.top="top",D+=g,m.top="top")),k.top==="middle"&&(D+g>c[3]&&m.top==="top"?(D-=g,m.top="bottom"):D<c[1]&&m.top==="bottom"&&(D+=g,m.top="top")));if(h==="target"||h==="both")y<c[0]&&k.left==="left"&&(y+=M,k.left="right"),y+P>c[2]&&k.left==="right"&&(y-=M,k.left="left");h==="together"&&(y<c[0]&&k.left==="left"?m.left==="right"?(y+=M,k.left="right",y+=P,m.left="left"):m.left==="left"&&(y+=M,k.left="right",y-=P,m.left="right"):y+P>c[2]&&k.left==="right"?m.left==="left"?(y-=M,k.left="left",y-=P,m.left="right"):m.left==="right"&&(y-=M,k.left="left",y+=P,m.left="left"):k.left==="center"&&(y+P>c[2]&&m.left==="left"?(y-=P,m.left="right"):y<c[0]&&m.left==="right"&&(y+=P,m.left="left")));if(p==="element"||p==="both")D<c[1]&&m.top==="bottom"&&(D+=g,m.top="top"),D+g>c[3]&&m.top==="top"&&(D-=g,m.top="bottom");if(h==="element"||h==="both")y<c[0]&&m.left==="right"&&(y+=P,m.left="left"),y+P>c[2]&&m.left==="left"&&(y-=P,m.left="right");typeof S=="string"?S=function(){var e,t,n,r;n=S.split(","),r=[];for(t=0,e=n.length;t<e;t++)E=n[t],r.push(E.trim());return r}():S===!0&&(S=["top","left","right","bottom"]),S||(S=[]),x=[],b=[],D<c[1]&&(l.call(S,"top")>=0?(D=c[1],x.push("top")):b.push("top")),D+g>c[3]&&(l.call(S,"bottom")>=0?(D=c[3]-g,x.push("bottom")):b.push("bottom")),y<c[0]&&(l.call(S,"left")>=0?(y=c[0],x.push("left")):b.push("left")),y+P>c[2]&&(l.call(S,"right")>=0?(y=c[2]-P,x.push("right")):b.push("right"));if(x.length){T=(Z=this.options.pinnedClass)!=null?Z:this.getClass("pinned"),o.push(T);for(X=0,z=x.length;X<z;X++)C=x[X],o.push(""+T+"-"+C)}if(b.length){w=(et=this.options.outOfBoundsClass)!=null?et:this.getClass("out-of-bounds"),o.push(w);for(V=0,W=b.length;V<W;V++)C=b[V],o.push(""+w+"-"+C)}if(l.call(x,"left")>=0||l.call(x,"right")>=0)m.left=k.left=!1;if(l.call(x,"top")>=0||l.call(x,"bottom")>=0)m.top=k.top=!1;(k.top!==L.top||k.left!==L.left||m.top!==this.attachment.top||m.left!==this.attachment.left)&&this.updateAttachClasses(m,k)}return n(function(){return a(tt.target,o,u),a(tt.element,o,u)}),{top:D,left:y}}})}.call(this),function(){var e,t,n,r;r=this.Tether.Utils,t=r.getBounds,n=r.updateClasses,e=r.defer,this.Tether.modules.push({position:function(r){var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A=this;d=r.top,f=r.left,T=this.cache("element-bounds",function(){return t(A.element)}),a=T.height,v=T.width,p=this.getTargetBounds(),u=d+a,l=f+v,i=[];if(d<=p.bottom&&u>=p.top){N=["left","right"];for(m=0,w=N.length;m<w;m++)c=N[m],((C=p[c])===f||C===l)&&i.push(c)}if(f<=p.right&&l>=p.left){k=["top","bottom"];for(g=0,E=k.length;g<E;g++)c=k[g],((L=p[c])===d||L===u)&&i.push(c)}o=[],s=[],h=["left","top","right","bottom"],o.push(this.getClass("abutted"));for(y=0,S=h.length;y<S;y++)c=h[y],o.push(""+this.getClass("abutted")+"-"+c);i.length&&s.push(this.getClass("abutted"));for(b=0,x=i.length;b<x;b++)c=i[b],s.push(""+this.getClass("abutted")+"-"+c);return e(function(){return n(A.target,s,o),n(A.element,s,o)}),!0}})}.call(this),function(){this.Tether.modules.push({position:function(e){var t,n,r,i,s,o,u;o=e.top,t=e.left;if(!this.options.shift)return;return n=function(e){return typeof e=="function"?e.call(this,{top:o,left:t}):e},r=n(this.options.shift),typeof r=="string"?(r=r.split(" "),r[1]||(r[1]=r[0]),s=r[0],i=r[1],s=parseFloat(s,10),i=parseFloat(i,10)):(u=[r.top,r.left],s=u[0],i=u[1]),o+=s,t+=i,{top:o,left:t}}})}.call(this),this.Tether}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("collab/views/lock",["marionette","collab/templates/gadget_lock","collab/vent","tether"],function(e,n,r,i){var s;return s=function(e){function s(){return s.__super__.constructor.apply(this,arguments)}return t(s,e),s.prototype.template=_.template(n),s.prototype.initialize=function(e){this.gadgetId=e.gadgetId,this.site=e.site,this.mediator=e.mediator,this.conn=e.conn},s.prototype.onShow=function(){return r.on("lock:lock",this.onLockLocked,this),r.on("lock:unlock",this.onLockUnlocked,this),this.conn.on("ws:close",this._unlock,this),this.conn.activeLocks.each(function(e){return function(t){return e.onLockLocked(t)}}(this))},s.prototype.onClose=function(){return r.off("lock:lock",this.onLockLocked,this),r.off("lock:unlock",this.onLockUnlocked,this),this.conn.off("ws:close",this._unlock,this)},s.prototype.ui={editor:".js-lock-avator",lock:".icon-lock"},s.prototype.isLocked=function(){return!!this._lock},s.prototype.templateHelpers=function(){return{isLocked:function(e){return function(){return e.isLocked()}}(this),name:function(e){return function(){if(!e._lock)return;return e._lock.get("user").firstname||e._lock.get("user").fn||"Anonymous"}}(this),profileImage:function(e){return function(){var t,n,r;if(!e._lock)return;return n=(r=e._lock.get("user").image)!=null?r.representations:void 0,n?(t=_.find(n,function(e){return e.scale==="140x140"}),t.location):""+e.site+"/assets/img/defaults/profile-retina.jpg"}}(this)}},s.prototype.onRender=function(){var e,t;return this.isLocked()?(this._lockTooltip=this.$(".collab-lock-tooltip"),this._lockIcon=this.$(".collab-lock-icon"),this._lockIcon.on("mouseover",function(e){return function(){return e._lockTooltip.css({"z-index":50,opacity:1})}}(this)),this._lockIcon.on("mouseout",function(e){return function(){return e._lockTooltip.css({opacity:0}),setTimeout(function(){return e._lockTooltip.css({"z-index":-1})},250)}}(this)),this._tether=new i({element:this._lockTooltip[0],target:this._lockIcon[0],attachment:"top right",targetAttachment:"middle left",offset:"16px 15px"})):((e=this._lockTooltip)!=null&&e.remove(),(t=this._tether)!=null&&t.destroy(),this._tether=null)},s.prototype.onLockLocked=function(e){if(e.get("gadgetId")===this.gadgetId)return this.updateLock(e)},s.prototype.updateLock=function(e){if(e.get("user").id===this.conn.me.id)return;return this._lock=e,this.render()},s.prototype.onLockUnlocked=function(e){var t;t=e.get("gadgetId");if(this._lock&&t===this.gadgetId)return this._unlock()},s.prototype._unlock=function(){if(!this._lock)return;return delete this._lock,this.render()},s}(e.ItemView)})}.call(this),function(){n("collab/templates/update",[],function(){return'<div class="updateNotification">\n  <i class="icon-refresh"></i><span class="updateNotificationMsg">See new update<span>\n</div>'})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,r=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};n("collab/views/update",["underscore","marionette","collab/templates/update","collab/vent"],function(t,n,i,s){var o;return o=function(n){function o(){return this.onCollabUpdate=e(this.onCollabUpdate,this),this.onCourseRefetchFail=e(this.onCourseRefetchFail,this),this.onCourseRefetchSuccess=e(this.onCourseRefetchSuccess,this),this.onUpdateNotificationClick=e(this.onUpdateNotificationClick,this),this.onLessonOpened=e(this.onLessonOpened,this),o.__super__.constructor.apply(this,arguments)}return r(o,n),o.prototype.initialize=function(e){return this.conn=e.conn,this.mediator=e.mediator,this._containerSlideTime=80},o.prototype.ui={collabErrorMsg:".collabErrorMsg",updateNotificationMsg:".updateNotificationMsg",updateNotification:".updateNotification"},o.prototype.events={"click .updateNotification":"onUpdateNotificationClick"},o.prototype.template=t.template(i),o.prototype.onShow=function(){return s.on("collab:update",this.onCollabUpdate),s.on("lesson:opened",this.onLessonOpened),this.conn.on("collab:ready",this.onEnableCollab),this.conn.on("collab:close",this.onDisableCollab)},o.prototype.onClose=function(){return s.off("collab:update",this.onCollabUpdate),s.off("lesson:opened",this.onLessonOpened),this.conn.off("collab:ready",this.onEnableCollab),this.conn.off("collab:close",this.onDisableCollab)},o.prototype.onLessonOpened=function(e){return this.lesson=e},o.prototype.onUpdateNotificationClick=function(){return this.conn.resetUpdates(),this.message("Fetching Updates..."),this.lesson.fetch().done(this.onCourseRefetchSuccess).fail(this.onCourseRefetchFail)},o.prototype.onCourseRefetchSuccess=function(){return this.conn.hasUpdates()?this.onCollabUpdate():this.slideUp()},o.prototype.onCourseRefetchFail=function(){return this.message("Failed to update lesson, please try again!")},o.prototype.onCollabUpdate=function(){var e;return e=this.conn.updateCount()===1?"See new update":"See "+this.conn.updateCount()+" new updates",this.conn.hasGadgetUpdates()&&(e+="; unlock updated gadgets"),this.message(e),this.slideDown()},o.prototype.slideUp=function(){return this.ui.updateNotification.slideUp(this._containerSlideTime)},o.prototype.slideDown=function(){return this.ui.updateNotification.slideDown(this._containerSlideTime)},o.prototype.message=function(e){return this.ui.updateNotificationMsg.text(e)},o}(n.Layout)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("collab/collections/gadget_locks",["backbone","collab/models/gadget_lock"],function(e,n){var r;return r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.model=n,r}(e.Collection)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};n("collab/collab",["underscore","backbone","collab/handlers/users","collab/handlers/locks","collab/handlers/comments","collab/handlers/updates","collab/handlers/activity","collab/views/contributors","collab/views/comments","collab/views/lock","collab/views/update","collab/vent","collab/models/gadget_comment","collab/models/gadget_lock","collab/collections/gadget_comments","collab/collections/collapsible_gadget_comments","collab/collections/gadget_locks"],function(t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){var y;return y=function(){function y(){this._populatePlayerUpdate=e(this._populatePlayerUpdate,this),this._populatePlayerContrib=e(this._populatePlayerContrib,this),this.phoneHome=e(this.phoneHome,this),this.onMessage=e(this.onMessage,this),this.onClose=e(this.onClose,this),this.onOpen=e(this.onOpen,this),this.onError=e(this.onError,this),this.connect=e(this.connect,this)}return t.extend(y.prototype,n.Events),y.prototype.GadgetComment=p,y.prototype.GadgetComments=v,y.prototype.CollapsibleGadgetComments=m,y.prototype.GadgetLock=d,y.prototype.GadgetLocks=g,y.prototype.phoneHomeEveryMs=6e4,y.prototype.tryConnectingEveryMs=2e3,y.prototype.lastActivity=new Date,y.prototype.updates=[],y.prototype.init=function(e,t){return this.mediator=e,this.courseId=t.courseId,this.collabUrl=t.collabUrl,this.site=t.site,this.sessionId=t.api.sessionId,this.connect(),this.resetLastActivity(),new r(this),new i(this),new s(this),new o(this),new u(this),this.contributorsView=new a({mediator:this.mediator,conn:this,site:this.site}),this.updateBarView=new c({mediator:this.mediator,conn:this}),this.enabled=!1,this.subscribed=!1,this.activeLocks=new this.GadgetLocks,this.initializedGadgetViewContainers=[],this.mediator.on("collab:lesson:opened",this.onLessonOpened,this),this.mediator.on("collab:lesson:closed",this.onLessonClosed,this),this.mediator.on("collab:player:authorSideBar:ready",this._populatePlayerContrib,this),this.mediator.on("collab:player:course:ready",this._populatePlayerUpdate,this)},y.prototype.onLessonOpened=function(e){return this.enabled?this.checkForIdAndSubscribe(e):this.once("ws:open",function(t){return function(){return t.checkForIdAndSubscribe(e)}}(this))},y.prototype.checkForIdAndSubscribe=function(e){if(this.subscribed)return;return e.id?(this.subscribe(e.id),h.trigger("lesson:opened",e)):e.once("sync change",function(t){return function(){return t.checkForIdAndSubscribe(e)}}(this))},y.prototype.onLessonClosed=function(e){return this.unsubscribe(e.id),this.subscribed=!1},y.prototype.connect=function(){return this.socket=new WebSocket(this.collabUrl),this.socket.onopen=this.onOpen,this.socket.onclose=this.onClose,this.socket.onerror=this.onError,this.socket.onmessage=this.onMessage},y.prototype.onError=function(e){var t;return t=e.channel?"error connecting to course "+e.channel.courseId+" lesson "+e.channel.courseId:"error connecting to "+this.collabUrl,this.trigger("ws:error",t,e)},y.prototype.onOpen=function(){return this.cancelRetryConnect(),this.phoneHomePeriodically(),this.enabled=!0,this.lessonId&&this.subscribe(this.lessonId),this.trigger("ws:open"),this.mediator.trigger("course:collab:open")},y.prototype.subscribe=function(e){this.lessonId=e;if(!this.lessonId)throw new Error("No lesson ID to subscribe to");return this.triggerEvent("subscribe",{sessionId:this.sessionId})},y.prototype.unsubscribe=function(){return this.triggerEvent("unsubscribe"),delete this.lessonId},y.prototype.onClose=function(){return clearTimeout(this.phoneHomeId),this.scheduleRetryConnect(),this.enabled=!1,this.subscribed=!1,this.trigger("ws:close"),this.trigger("unsubscribed"),this.mediator.trigger("course:collab:close")},y.prototype.resetLastActivity=function(){return this.lastActivity=(new Date).getTime()},y.prototype.onMessage=function(e){var t,n;return this.subscribed||(this.subscribed=!0,this.trigger("subscribed")),n=JSON.parse(e.data),t=this._dataToModels(n),this.trigger(n.name,t)},y.prototype.scheduleRetryConnect=function(){return this.retryId=setTimeout(this.connect,this.tryConnectingEveryMs)},y.prototype.cancelRetryConnect=function(){if(this.retryId)return clearTimeout(this.retryId)},y.prototype.phoneHome=function(){var e;return e=(new Date).getTime(),this.triggerEvent("ping",{idleMs:e-this.lastActivity})},y.prototype.phoneHomePeriodically=t.once(function(){return this.phoneHomeId=setInterval(this.phoneHome,this.phoneHomeEveryMs)}),y.prototype.triggerEvent=function(e,t){var n;return n={lessonId:this.lessonId,courseId:this.courseId},this.socket.send(JSON.stringify({name:e,channel:n,data:t}))},y.prototype.hasUpdates=function(){return!!this.updates.length},y.prototype.updateCount=function(){return this.updates.length},y.prototype.resetUpdates=function(){return this.updates=[]},y.prototype.hasGadgetUpdates=function(){return t.any(this.updates,function(e){return t.has(e,"gadgetId")})},y.prototype.gadgetHasUpdates=function(e){return!!t.findWhere(this.updates,{gadgetId:e})},y.prototype._dataToModels=function(e){var t,n,r,i,s,o;return s={comment:p,comments:v,lock:d,locks:g},r=this._dereferenceEventData(e),o=e.name.split(":"),i=o[0],n=o[1],t=s[i],t&&n!=="delete"?new t(r):r},y.prototype._dereferenceEventData=function(e){var t;return t=e.name.split(":").shift(),e.data[t]},y.prototype.commentsViewForGadgetId=function(e){return new f({gadgetId:e,mediator:this.mediator,site:this.site,conn:this})},y.prototype.lockViewForGadgetId=function(e){var t,n,r;return n=new l({gadgetId:e,mediator:this.mediator,site:this.site,conn:this}),(t=(r=this.activeLocks)!=null?r.findWhere({gadgetId:e}):void 0)&&n.updateLock(t),n},y.prototype._populatePlayerContrib=function(){return this.mediator.trigger("collab:populate:contributorsRegion",this.contributorsView)},y.prototype._populatePlayerUpdate=function(){return this.mediator.trigger("collab:populate:updateBar",this.updateBarView)},y}(),new y})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("views/react_view",["marionette","react"],function(e,n){var r;return r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.tagName="span",r.prototype.template=function(){return""},r.prototype.initialize=function(e){if(!e.component)throw new Error("options.component undefined")},r.prototype.onShow=function(){return this.renderComponent(this.options.component)},r.prototype.onClose=function(){return n.unmountComponentAtNode(this.el),delete this._renderedComponent},r.prototype.renderedComponent=function(){return this._renderedComponent||function(){throw new Error("No component available")}()},r.prototype.renderComponent=function(e){if(this.isClosed)return;return this._renderedComponent=n.renderComponent(e,this.el)},r}(e.ItemView)})}.call(this),function(){n("templates/course",[],function(){return'<div class="js-update-notification-container updateNotificationContainer"></div>\n<div class="js-loading loading"></div>\n<div class="js-lessons lessons"></div>\n<div class="js-nav"></div>'})}.call(this),function(){function i(e){var n=!1;return function(){if(n)throw new Error("Callback was already called.");n=!0,e.apply(t,arguments)}}var e={},t,r;t=this,t!=null&&(r=t.async),e.noConflict=function(){return t.async=r,e};var s=Object.prototype.toString,o=Array.isArray||function(e){return s.call(e)==="[object Array]"},u=function(e,t){for(var n=0;n<e.length;n+=1)t(e[n],n,e)},a=function(e,t){if(e.map)return e.map(t);var n=[];return u(e,function(e,r,i){n.push(t(e,r,i))}),n},f=function(e,t,n){return e.reduce?e.reduce(t,n):(u(e,function(e,r,i){n=t(n,e,r,i)}),n)},l=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};typeof process=="undefined"||!process.nextTick?typeof setImmediate=="function"?(e.nextTick=function(e){setImmediate(e)},e.setImmediate=e.nextTick):(e.nextTick=function(e){setTimeout(e,0)},e.setImmediate=e.nextTick):(e.nextTick=process.nextTick,typeof setImmediate!="undefined"?e.setImmediate=function(e){setImmediate(e)}:e.setImmediate=e.nextTick),e.each=function(e,t,n){function s(t){t?(n(t),n=function(){}):(r+=1,r>=e.length&&n())}n=n||function(){};if(!e.length)return n();var r=0;u(e,function(e){t(e,i(s))})},e.forEach=e.each,e.eachSeries=function(e,t,n){n=n||function(){};if(!e.length)return n();var r=0,i=function(){t(e[r],function(t){t?(n(t),n=function(){}):(r+=1,r>=e.length?n():i())})};i()},e.forEachSeries=e.eachSeries,e.eachLimit=function(e,t,n,r){var i=c(t);i.apply(null,[e,n,r])},e.forEachLimit=e.eachLimit;var c=function(e){return function(t,n,r){r=r||function(){};if(!t.length||e<=0)return r();var i=0,s=0,o=0;(function u(){if(i>=t.length)return r();while(o<e&&s<t.length)s+=1,o+=1,n(t[s-1],function(e){e?(r(e),r=function(){}):(i+=1,o-=1,i>=t.length?r():u())})})()}},h=function(t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[e.each].concat(n))}},p=function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[c(e)].concat(n))}},d=function(t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[e.eachSeries].concat(n))}},v=function(e,t,n,r){t=a(t,function(e,t){return{index:t,value:e}});if(!r)e(t,function(e,t){n(e.value,function(e){t(e)})});else{var i=[];e(t,function(e,t){n(e.value,function(n,r){i[e.index]=r,t(n)})},function(e){r(e,i)})}};e.map=h(v),e.mapSeries=d(v),e.mapLimit=function(e,t,n,r){return m(t)(e,n,r)};var m=function(e){return p(e,v)};e.reduce=function(t,n,r,i){e.eachSeries(t,function(e,t){r(n,e,function(e,r){n=r,t(e)})},function(e){i(e,n)})},e.inject=e.reduce,e.foldl=e.reduce,e.reduceRight=function(t,n,r,i){var s=a(t,function(e){return e}).reverse();e.reduce(s,n,r,i)},e.foldr=e.reduceRight;var g=function(e,t,n,r){var i=[];t=a(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n&&i.push(e),t()})},function(e){r(a(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};e.filter=h(g),e.filterSeries=d(g),e.select=e.filter,e.selectSeries=e.filterSeries;var y=function(e,t,n,r){var i=[];t=a(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n||i.push(e),t()})},function(e){r(a(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};e.reject=h(y),e.rejectSeries=d(y);var b=function(e,t,n,r){e(t,function(e,t){n(e,function(n){n?(r(e),r=function(){}):t()})},function(e){r()})};e.detect=h(b),e.detectSeries=d(b),e.some=function(t,n,r){e.each(t,function(e,t){n(e,function(e){e&&(r(!0),r=function(){}),t()})},function(e){r(!1)})},e.any=e.some,e.every=function(t,n,r){e.each(t,function(e,t){n(e,function(e){e||(r(!1),r=function(){}),t()})},function(e){r(!0)})},e.all=e.every,e.sortBy=function(t,n,r){e.map(t,function(e,t){n(e,function(n,r){n?t(n):t(null,{value:e,criteria:r})})},function(e,t){if(e)return r(e);var n=function(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0};r(null,a(t.sort(n),function(e){return e.value}))})},e.auto=function(t,n){n=n||function(){};var r=l(t),i=r.length;if(!i)return n();var s={},a=[],c=function(e){a.unshift(e)},h=function(e){for(var t=0;t<a.length;t+=1)if(a[t]===e){a.splice(t,1);return}},p=function(){i--,u(a.slice(0),function(e){e()})};c(function(){if(!i){var e=n;n=function(){},e(null,s)}}),u(r,function(r){var i=o(t[r])?t[r]:[t[r]],a=function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]);if(t){var o={};u(l(s),function(e){o[e]=s[e]}),o[r]=i,n(t,o),n=function(){}}else s[r]=i,e.setImmediate(p)},d=i.slice(0,Math.abs(i.length-1))||[],v=function(){return f(d,function(e,t){return e&&s.hasOwnProperty(t)},!0)&&!s.hasOwnProperty(r)};if(v())i[i.length-1](a,s);else{var m=function(){v()&&(h(m),i[i.length-1](a,s))};c(m)}})},e.retry=function(t,n,r){var i=5,s=[];typeof t=="function"&&(r=n,n=t,t=i),t=parseInt(t,10)||i;var o=function(i,o){var u=function(e,t){return function(n){e(function(e,r){n(!e||t,{err:e,result:r})},o)}};while(t)s.push(u(n,!(t-=1)));e.series(s,function(e,t){t=t[t.length-1],(i||r)(t.err,t.result)})};return r?o():o},e.waterfall=function(t,n){n=n||function(){};if(!o(t)){var r=new Error("First argument to waterfall must be an array of functions");return n(r)}if(!t.length)return n();var i=function(t){return function(r){if(r)n.apply(null,arguments),n=function(){};else{var s=Array.prototype.slice.call(arguments,1),o=t.next();o?s.push(i(o)):s.push(n),e.setImmediate(function(){t.apply(null,s)})}}};i(e.iterator(t))()};var w=function(e,t,n){n=n||function(){};if(o(t))e.map(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},n);else{var r={};e.each(l(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,n(t)})},function(e){n(e,r)})}};e.parallel=function(t,n){w({map:e.map,each:e.each},t,n)},e.parallelLimit=function(e,t,n){w({map:m(t),each:c(t)},e,n)},e.series=function(t,n){n=n||function(){};if(o(t))e.mapSeries(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},n);else{var r={};e.eachSeries(l(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,n(t)})},function(e){n(e,r)})}},e.iterator=function(e){var t=function(n){var r=function(){return e.length&&e[n].apply(null,arguments),r.next()};return r.next=function(){return n<e.length-1?t(n+1):null},r};return t(0)},e.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var E=function(e,t,n,r){var i=[];e(t,function(e,t){n(e,function(e,n){i=i.concat(n||[]),t(e)})},function(e){r(e,i)})};e.concat=h(E),e.concatSeries=d(E),e.whilst=function(t,n,r){t()?n(function(i){if(i)return r(i);e.whilst(t,n,r)}):r()},e.doWhilst=function(t,n,r){t(function(i){if(i)return r(i);var s=Array.prototype.slice.call(arguments,1);n.apply(null,s)?e.doWhilst(t,n,r):r()})},e.until=function(t,n,r){t()?r():n(function(i){if(i)return r(i);e.until(t,n,r)})},e.doUntil=function(t,n,r){t(function(i){if(i)return r(i);var s=Array.prototype.slice.call(arguments,1);n.apply(null,s)?r():e.doUntil(t,n,r)})},e.queue=function(t,n){function r(t,n,r,i){t.started||(t.started=!0),o(n)||(n=[n]);if(n.length==0)return e.setImmediate(function(){t.drain&&t.drain()});u(n,function(n){var s={data:n,callback:typeof i=="function"?i:null};r?t.tasks.unshift(s):t.tasks.push(s),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),e.setImmediate(t.process)})}n===undefined&&(n=1);var s=0,a={tasks:[],concurrency:n,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(e,t){r(a,e,!1,t)},kill:function(){a.drain=null,a.tasks=[]},unshift:function(e,t){r(a,e,!0,t)},process:function(){if(!a.paused&&s<a.concurrency&&a.tasks.length){var e=a.tasks.shift();a.empty&&a.tasks.length===0&&a.empty(),s+=1;var n=function(){s-=1,e.callback&&e.callback.apply(e,arguments),a.drain&&a.tasks.length+s===0&&a.drain(),a.process()},r=i(n);t(e.data,r)}},length:function(){return a.tasks.length},running:function(){return s},idle:function(){return a.tasks.length+s===0},pause:function(){if(a.paused===!0)return;a.paused=!0},resume:function(){if(a.paused===!1)return;a.paused=!1;for(var t=1;t<=a.concurrency;t++)e.setImmediate(a.process)}};return a},e.priorityQueue=function(t,n){function r(e,t){return e.priority-t.priority}function i(e,t,n){var r=-1,i=e.length-1;while(r<i){var s=r+(i-r+1>>>1);n(t,e[s])>=0?r=s:i=s-1}return r}function s(t,n,s,a){t.started||(t.started=!0),o(n)||(n=[n]);if(n.length==0)return e.setImmediate(function(){t.drain&&t.drain()});u(n,function(n){var o={data:n,priority:s,callback:typeof a=="function"?a:null};t.tasks.splice(i(t.tasks,o,r)+1,0,o),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),e.setImmediate(t.process)})}var a=e.queue(t,n);return a.push=function(e,t,n){s(a,e,t,n)},delete a.unshift,a},e.cargo=function(t,n){var r=!1,i=[],s={tasks:i,payload:n,saturated:null,empty:null,drain:null,drained:!0,push:function(t,r){o(t)||(t=[t]),u(t,function(e){i.push({data:e,callback:typeof r=="function"?r:null}),s.drained=!1,s.saturated&&i.length===n&&s.saturated()}),e.setImmediate(s.process)},process:function f(){if(r)return;if(i.length===0){s.drain&&!s.drained&&s.drain(),s.drained=!0;return}var e=typeof n=="number"?i.splice(0,n):i.splice(0,i.length),o=a(e,function(e){return e.data});s.empty&&s.empty(),r=!0,t(o,function(){r=!1;var t=arguments;u(e,function(e){e.callback&&e.callback.apply(null,t)}),f()})},length:function(){return i.length},running:function(){return r}};return s};var S=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);typeof console!="undefined"&&(t?console.error&&console.error(t):console[e]&&u(n,function(t){console[e](t)}))}]))}};e.log=S("log"),e.dir=S("dir"),e.memoize=function(t,n){var r={},i={};n=n||function(e){return e};var s=function(){var s=Array.prototype.slice.call(arguments),o=s.pop(),u=n.apply(null,s);u in r?e.nextTick(function(){o.apply(null,r[u])}):u in i?i[u].push(o):(i[u]=[o],t.apply(null,s.concat([function(){r[u]=arguments;var e=i[u];delete i[u];for(var t=0,n=e.length;t<n;t++)e[t].apply(null,arguments)}])))};return s.memo=r,s.unmemoized=t,s},e.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},e.times=function(t,n,r){var i=[];for(var s=0;s<t;s++)i.push(s);return e.map(i,n,r)},e.timesSeries=function(t,n,r){var i=[];for(var s=0;s<t;s++)i.push(s);return e.mapSeries(i,n,r)},e.seq=function(){var t=arguments;return function(){var n=this,r=Array.prototype.slice.call(arguments),i=r.pop();e.reduce(t,r,function(e,t,r){t.apply(n,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);r(e,t)}]))},function(e,t){i.apply(n,[e].concat(t))})}},e.compose=function(){return e.seq.apply(null,Array.prototype.reverse.call(arguments))};var x=function(e,t){var n=function(){var n=this,r=Array.prototype.slice.call(arguments),i=r.pop();return e(t,function(e,t){e.apply(n,r.concat([t]))},i)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return n.apply(this,r)}return n};e.applyEach=h(x),e.applyEachSeries=d(x),e.forever=function(e,t){function n(r){if(r){if(t)return t(r);throw r}e(n)}n()},typeof module!="undefined"&&module.exports?module.exports=e:typeof n!="undefined"&&n.amd?n("async",[],function(){return e}):t.async=e}(),function(){n("mediator",["underscore","backbone"],function(e,t){var n;return n=e.clone(t.Events)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("collections/gadget_projects",["backbone","underscore","models/gadget_project"],function(e,n,r){var i;return i=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.model=r,i.prototype.url=function(){return"/gadgets"},i.prototype.fetchFiltered=function(e,t){var r,i;return t==null&&(t={}),r=n.extend({},t.data,e),i=n.extend({},t,{data:r}),this.fetch(i)},i.prototype.fetchApproved=function(e){return this.fetchFiltered({catalog:"approved"},e)},i.prototype.fetchSandbox=function(e){return this.fetchFiltered({user:"me",catalog:"sandbox"},e)},i.prototype.findByType=function(e){var t,n,r,i,s,o,u;return o=e.split("@"),n=o[0],s=o[1],u=n.split("/"),i=u[0],r=u[1],t={username:i,name:r},s&&(t.version=s),this.findWhere(t)},i}(e.Collection)})}.call(this),function(){n("player_palette",["collections/gadget_projects","models/gadget_project"],function(e,t){var n,r,i,s,o,u,a,f;return u=new e,a=function(e){if(!e.manifestUrl)throw new Error("Palette: manifestUrl is not defined");return u.add(e)},s=function(e){var t;return t=new XMLHttpRequest,t.open("get",e),t.onload=function(n){return function(){var n,r;try{r=JSON.parse(t.responseText)}catch(i){return n=i,console.error("failed parsing manifest",n)}return r.manifestUrl=e,a(r)}}(this),t.onerror=function(e){return console.error("failed fetching manifest",e)},t.send()},o=function(e,t){var n;return n=window.Promise||window.ES6Promise.Promise,new n(function(n,r){var i;return VersalGadgets[e]?n(VersalGadgets[e]):(i=document.createElement("script"),i.src=t,i.onload=function(){var i;return i=VersalGadgets[e],i?n(i):r(new Error(""+e+" not found at "+t))},document.head.appendChild(i))})},r=function(e){var t;t=u.findWhere({shortType:e});if(t)return t.toJSON()},i=function(e){var t;t=u.findWhere({manifestUrl:e});if(t)return t.toJSON()},f=function(e){return e.username+"/"+e.name},n=function(e){var t,n;n=i(e);if(!n)throw new Error("Gadget manifest not found: "+e);return t={config:n.defaultConfig,userState:n.defaultUserState,type:f(n),manifestUrl:e}},{installManifest:s,installReactGadget:o,registerManifest:a,findManifestByUrl:i,findManifestByShortType:r,createGadgetInstance:n,dirtyExportedPalette:u}})}.call(this),function(){n("plugins/clonedeep",[],function(){var e;return e=function(t){var n,r,i;if(t===null||typeof t!="object")return t;r=t.constructor();for(n in t)i=t[n],r[n]=e(i);return r}})}.call(this),function(){n("models/settings",["underscore","plugins/clonedeep"],function(e,t){var n,r;return n={site:"//versal.com",container:".player-container",feature_useLegacyIframeLauncher:!0},r={},{get:function(e){return t(r[e])},set:function(t){if(!e.isEmpty(r))throw new Error("Options have already been set");if(!e.isObject(t))throw new Error("Options must be an object");if(t.api==null)throw new Error("Please set options.api!");return r=e.defaults({},t,n)},toJSON:function(){return t(r)}}})}.call(this),function(){n("plugins/ops-reporter",["jquery","models/settings"],function(e,t){var n,r,i,s,o;return r=[],n=((s=t.get("tracker"))!=null?s.interval:void 0)||3e3,o=function(){var n,i,s,o;return i=(s=t.get("tracker"))!=null?s.path:void 0,!i||r.length<1?!1:(n=_.clone(r),e.ajax({type:"POST",url:i,contentType:"application/json",data:JSON.stringify(r),success:function(){return r=_.difference(r,n)},headers:{AUTHSID:(o=t.get("api"))!=null?o.sessionId:void 0}}))},i=_.throttle(o,n,{leading:!1}),{addEvent:function(e,t){var n,s;try{return s={source:t._source||"player",event:e,data:t},r.push(s),i()}catch(o){return n=o,console.error(n)}}}})}.call(this),function(){n("plugins/tracker",["underscore","jquery","models/settings","plugins/ops-reporter"],function(e,t,n,r){var i,s,o;return i=function(){function t(e){this._name=e.name||"",this._initialData=e.data||{},this._stopCb=e.done||function(){},this._startTime=this._currentTime()}return t.prototype.stop=function(t){return this._stopCb({name:this._name,data:e.extend({},this._initialData,t),duration:this._currentTime()-this._startTime})},t.prototype._currentTime=function(){return(new Date).getTime()},t}(),s=function(){function t(){}return t.prototype.track=function(e,t){var i,s;t==null&&(t={}),((i=n.get("tracker"))!=null?i.path:void 0)&&r.addEvent(e,t);if((s=n.get("tracker"))!=null?s.debug:void 0)return console.log("track:",e,t)},t.prototype.createTimer=function(t,n){var r;return n==null&&(n={}),r=function(t){return function(n){var r,i,s;return s=n.name,r=n.data,i=n.duration,t.track(s,e.extend(r,{duration:i}))}}(this),new i({name:t,data:n,done:r})},t.prototype.timeXHR=function(e,t,n){var r;return r=this.createTimer(t,n),e.always(function(e,t){return r.stop({status:t})})},t}(),o=new s})}.call(this),function(){n("templates/lesson",[],function(){return'<div class="js-lesson-title" style="overflow: hidden"></div>\n\n<div class="lesson-content js-lesson-content">\n  <div class="gadgets js-lesson-gadgets">\n    <p class="canvas-message">\n      To begin, grab a gadget<br> and drag it onto the canvas\n    </p>\n  </div>\n</div>\n\n<div class="lesson-screen js-lesson-screen"></div>'})}.call(this),function(e,r){if(typeof exports=="object")module.exports=r(t("react"));else if(typeof n=="function"&&n.amd)n("react-coffeescript-glue",["react"],r);else{var i="ReactCoffeescriptGlue",s=i.split("."),o=e;for(var u=0;u<s.length-1;u++)o[s[u]]===undefined&&(o[s[u]]={}),o=o[s[u]];o[s[s.length-1]]=r(e.React)}}(this,function(e){function t(t){return{react:e}[t]}var n=function(){var t,n,r,i,s=[].slice;t=function(t){if(!{}.hasOwnProperty.call(e.DOM,t)||t==="injection")return;return window["_"+t]=function(){var n,r,i,o,u,a,f,l,c,h;r=arguments[0],i=2<=arguments.length?s.call(arguments,1):[];if(Array.isArray(r)){u={className:""};for(f=0,l=r.length;f<l;f++){n=r[f];if(typeof n=="string")u.className+=" "+n;else for(o in n)a=n[o],u[o]=a}return(c=e.DOM)[t].apply(c,[u].concat(s.call(i)))}return(h=e.DOM)[t].apply(h,[r].concat(s.call(i)))}},i=e.DOM;for(r in i)n=i[r],t(r)}.call(this);return n}),function(){n("views/gadget/drag_image",["react","react-coffeescript-glue"],function(e){var t;return t=e.createClass({getDefaultProps:function(){return{manifest:{title:"Untitled",author:"Anonymous",version:"0.0.0",distributedIconPath:"about:blank"}}},render:function(){return _div(["gadget-drag-image",this.props.className],_div(["gadget-drag-image-icon",{style:{backgroundImage:"url("+this.props.manifest.distributedIconPath+")"}}]),_div(["gadget-drag-image-details"],_div([],this.props.manifest.title),_div([],this.props.manifest.author),_div([],this.props.manifest.version)))}})})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},r=[].slice;n("models/property_sheet_schema",["underscore","backbone"],function(e,n){var i;return i=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.whiteListedAttributes={Text:[],Number:[],TextArea:[],Checkbox:[],Color:[],Select:["options"],Radio:["options"],Checkboxes:["options"],Date:["yearStart","yearEnd"],DateTime:["yearStart","yearEnd","minsInterval"],Range:["min","max","step"],Tags:["options","lowercase","duplicates","minLength","maxLength","updateAutoComplete"]},i.prototype.sanitizedSchema=function(){var e,t,n,r,i;r={},i=this.attributes;for(t in i)e=i[t],r[t]==null&&(n=this.sanitizedAttributes(e),n!=null&&(r[t]=n));return r},i.prototype.isEmpty=function(){return e.keys(this.sanitizedSchema()).length===0},i.prototype.sanitizedAttributes=function(t){var n;return typeof t=="string"?this.sanitizedAttributes({type:t}):typeof t!="object"?null:(n=this.whiteListedAttributes[t.type],n==null?null:e.pick.apply(e,[t,"type","title","validators"].concat(r.call(n))))},i.prototype._defaultDefinitionForValue=function(t){switch(typeof t){case"boolean":return"Checkbox";case"number":return"Number";case"string":return/^\#[a-f0-9]{6}$/i.test(t)?"Color":t.length>20?"TextArea":"Text";case"object":return e.isArray(t)&&e.every(t,function(e){var t;return(t=typeof e)==="string"||t==="number"})?{type:"Tags",options:e.uniq(t),updateAutoComplete:!0}:null;default:return null}},i}(n.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("state/position",["backbone"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.defaults={lessonCid:null,gadgetCid:null},n}(e.Model),new n})}.call(this),function(){n("state/selection",["backbone"],function(e){var t;return t={},_.extend({clear:function(){return t={},this.trigger("selection:clear")},add:function(e){if("string"!=typeof e)throw new Error("gadgetId must be a string");return t[e]=!0,this.trigger("clipboard:item:selected")},remove:function(e){var n;if("string"!=typeof e)throw new Error("gadgetId must be a string");delete t[e];if(((n=Object.keys(t))!=null?n.length:void 0)===0)return this.trigger("selection:empty")},keys:function(){return Object.keys(t)}},e.Events)})}.call(this),function(){n("templates/gadget_instance",[],function(){return'<div class="gadget-left-bar js-left-bar-region"></div>\n\n<div class="gadgetContent"></div>\n<div class="js-placeholder placeholder">Click to edit this gadget</div>\n<div class="drag-overlay"></div>\n\n<div class="toolbar-right"></div>\n\n<div class="js-collab-lock-overlay gadget-collab-lock-overlay"></div>\n\n<div class="js-dialog-region gadget-dialog-container"></div>'})}.call(this),function(){n("views/render_in_body",["react","react-coffeescript-glue"],function(e){var t;return t=e.createClass({componentWillMount:function(){return this._element=document.createElement("span"),document.body.appendChild(this._element)},componentDidMount:function(){return this._renderChildren()},componentDidUpdate:function(){return this._renderChildren()},_renderChildren:function(){return this.___renderedComponent=e.renderComponent(this.props.children,this._element)},componentWillUnmount:function(){return e.unmountComponentAtNode(this._element),document.body.removeChild(this._element),delete this._element},render:function(){return _span()},renderedComponent:function(){return this.___renderedComponent||function(){throw new Error("No component available")}()}})})}.call(this),function(){n("views/tether",["react","tether"],function(e,t){var n;return n=e.createClass({propTypes:{zIndex:e.PropTypes.number,constraints:e.PropTypes.array,offset:e.PropTypes.string,targetAttachment:e.PropTypes.string,attachment:e.PropTypes.string},componentWillMount:function(){return this._shell=document.createElement("span"),this._shell.style.position="absolute",this._shell.style.display="inline-block",this.props.zIndex!=null&&(this._shell.style.zIndex=this.props.zIndex),document.body.appendChild(this._shell)},componentDidMount:function(){return this._renderTooltip()},componentDidUpdate:function(){return this._renderTooltip()},_tetherOptions:function(){return{element:this._shell,target:this.props.target||this.getDOMNode().parentElement,attachment:this.props.attachment,targetAttachment:this.props.targetAttachment,offset:this.props.offset||"0 0",optimizations:{moveElement:!1},constraints:this.props.constraints}},_renderTooltip:function(){return e.renderComponent(this.props.children,this._shell,function(e){return function(){return e._tether!=null?(e._tether.setOptions(e._tetherOptions()),e._tether.position()):e._tether=new t(e._tetherOptions())}}(this))},componentWillUnmount:function(){return this._tether.destroy(),e.unmountComponentAtNode(this._shell),document.body.removeChild(this._shell)},render:function(){return e.DOM.span()}})})}.call(this),n("libs/backbone-forms",["jquery","underscore","backbone"],function(e,t,n){var r=n.View.extend({initialize:function(e){var n=this;e=e||{};var r=this.schema=function(){if(e.schema)return t.result(e,"schema");var r=e.model;return r&&r.schema?t.isFunction(r.schema)?r.schema():r.schema:n.schema?t.isFunction(n.schema)?n.schema():n.schema:{}}();t.extend(this,t.pick(e,"model","data","idPrefix"));var i=this.constructor;this.template=e.template||i.template,this.Fieldset=e.Fieldset||i.Fieldset,this.Field=e.Field||i.Field,this.NestedField=e.NestedField||i.NestedField;var s=this.selectedFields=e.fields||t.keys(r),o=this.fields={};t.each(s,function(e){var t=r[e];o[e]=this.createField(e,t)},this);var u=e.fieldsets||[s],a=this.fieldsets=[];t.each(u,function(e){this.fieldsets.push(this.createFieldset(e))},this)},createFieldset:function(e){var t={schema:e,fields:this.fields};return new this.Fieldset(t)},createField:function(e,t){var n={form:this,key:e,schema:t,idPrefix:this.idPrefix};this.model?n.model=this.model:this.data?n.value=this.data[e]:n.value=null;var r=new this.Field(n);return this.listenTo(r.editor,"all",this.handleEditorEvent),r},handleEditorEvent:function(e,n){var r=n.key+":"+e;this.trigger.call(this,r,this,n);switch(e){case"change":this.trigger("change",this);break;case"focus":this.hasFocus||this.trigger("focus",this);break;case"blur":if(this.hasFocus){var i=this;setTimeout(function(){var e=t.find(i.fields,function(e){return e.editor.hasFocus});e||i.trigger("blur",i)},0)}}},render:function(){var n=this,r=this.fields,i=e(e.trim(this.template(t.result(this,"templateData"))));return i.find("[data-editors]").add(i).each(function(i,s){var o=e(s),u=o.attr("data-editors");if(t.isUndefined(u))return;var a=u=="*"?n.selectedFields||t.keys(r):u.split(",");t.each(a,function(e){var t=r[e];o.append(t.editor.render().el)})}),i.find("[data-fields]").add(i).each(function(i,s){var o=e(s),u=o.attr("data-fields");if(t.isUndefined(u))return;var a=u=="*"?n.selectedFields||t.keys(r):u.split(",");t.each(a,function(e){var t=r[e];o.append(t.render().el)})}),i.find("[data-fieldsets]").add(i).each(function(r,i){var s=e(i),o=s.attr("data-fieldsets");if(t.isUndefined(o))return;t.each(n.fieldsets,function(e){s.append(e.render().el)})}),this.setElement(i),this},validate:function(){var e=this,n=this.fields,r=this.model,i={};t.each(n,function(e){var t=e.validate();t&&(i[e.key]=t)});if(r&&r.validate){var s=r.validate(this.getValue());if(s){var o=t.isObject(s)&&!t.isArray(s);o||(i._others=i._others||[],i._others.push(s)),o&&t.each(s,function(e,t){if(n[t]&&!i[t])n[t].setError(e),i[t]=e;else{i._others=i._others||[];var r={};r[t]=e,i._others.push(r)}})}}return t.isEmpty(i)?null:i},commit:function(e){var n=this.validate();if(n)return n;var r,i=t.extend({error:function(e,t){r=t}},e);this.model.set(this.getValue(),i);if(r)return r},getValue:function(e){if(e)return this.fields[e].getValue();var n={};return t.each(this.fields,function(e){n[e.key]=e.getValue()}),n},setValue:function(e,t){var n={};typeof e=="string"?n[e]=t:n=e;var r;for(r in this.schema)n[r]!==undefined&&this.fields[r].setValue(n[r])},getEditor:function(e){var t=this.fields[e];if(!t)throw"Field not found: "+e;return t.editor},focus:function(){if(this.hasFocus)return;var e=this.fieldsets[0],t=e.getFieldAt(0);if(!t)return;t.editor.focus()},blur:function(){if(!this.hasFocus)return;var e=t.find(this.fields,function(e){return e.editor.hasFocus});e&&e.editor.blur()},trigger:function(e){return e==="focus"?this.hasFocus=!0:e==="blur"&&(this.hasFocus=!1),n.View.prototype.trigger.apply(this,arguments)},remove:function(){t.each(this.fieldsets,function(e){e.remove()}),t.each(this.fields,function(e){e.remove()}),n.View.prototype.remove.call(this)}},{template:t.template("    <form data-fieldsets></form>  ",null,this.templateSettings),templateSettings:{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},editors:{}});return r.validators=function(){var e={};return e.errMessages={required:"Required",regexp:"Invalid",email:"Invalid email address",url:"Invalid URL",match:t.template('Must match field "<%= field %>"',null,r.templateSettings)},e.required=function(e){return e=t.extend({type:"required",message:this.errMessages.required},e),function(r){e.value=r;var i={type:e.type,message:t.isFunction(e.message)?e.message(e):e.message};if(r===null||r===undefined||r===!1||r==="")return i}},e.regexp=function(e){if(!e.regexp)throw new Error('Missing required "regexp" option for "regexp" validator');return e=t.extend({type:"regexp",message:this.errMessages.regexp},e),function(r){e.value=r;var i={type:e.type,message:t.isFunction(e.message)?e.message(e):e.message};if(r===null||r===undefined||r==="")return;if(!e.regexp.test(r))return i}},e.email=function(n){return n=t.extend({type:"email",message:this.errMessages.email,regexp:/^[\w\-]{1,}([\w\-\+.]{1,1}[\w\-]{1,}){0,}[@][\w\-]{1,}([.]([\w\-]{1,})){1,3}$/},n),e.regexp(n)},e.url=function(n){return n=t.extend({type:"url",message:this.errMessages.url,regexp:/^(http|https):\/\/(([A-Z0-9][A-Z0-9_\-]*)(\.[A-Z0-9][A-Z0-9_\-]*)+)(:(\d+))?\/?/i},n),e.regexp(n)},e.match=function(e){if(!e.field)throw new Error('Missing required "field" options for "match" validator');return e=t.extend({type:"match",message:this.errMessages.match},e),function(r,i){e.value=r;var s={type:e.type,message:t.isFunction(e.message)?e.message(e):e.message};if(r===null||r===undefined||r==="")return;if(r!==i[e.field])return s}},e}(),r.Fieldset=n.View.extend({initialize:function(e){e=e||{};var n=this.schema=this.createSchema(e.schema);this.fields=t.pick(e.fields,n.fields),this.template=e.template||this.constructor.template},createSchema:function(e){return t.isArray(e)&&(e={fields:e}),e.legend=e.legend||null,e},getFieldAt:function(e){var t=this.schema.fields[e];return this.fields[t]},templateData:function(){return this.schema},render:function(){var n=this.schema,r=this.fields,i=e(e.trim(this.template(t.result(this,"templateData"))));return i.find("[data-fields]").add(i).each(function(n,i){var s=e(i),o=s.attr("data-fields");if(t.isUndefined(o))return;t.each(r,function(e){s.append(e.render().el)})}),this.setElement(i),this},remove:function(){t.each(this.fields,function(e){e.remove()}),n.View.prototype.remove.call(this)}},{template:t.template("    <fieldset data-fields>      <% if (legend) { %>        <legend><%= legend %></legend>      <% } %>    </fieldset>  ",null,r.templateSettings)}),r.Field=n.View.extend({initialize:function(e){e=e||{},t.extend(this,t.pick(e,"form","key","model","value","idPrefix"));var n=this.schema=this.createSchema(e.schema);this.template=e.template||n.template||this.constructor.template,this.errorClassName=e.errorClassName||this.constructor.errorClassName,this.editor=this.createEditor()},createSchema:function(e){return t.isString(e)&&(e={type:e}),e=t.extend({type:"Text",title:this.createTitle()},e),e.type=t.isString(e.type)?r.editors[e.type]:e.type,e},createEditor:function(){var e=t.extend(t.pick(this,"schema","form","key","model","value"),{id:this.createEditorId()}),n=this.schema.type;return new n(e)},createEditorId:function(){var e=this.idPrefix,n=this.key;return n=n.replace(/\./g,"_"),t.isString(e)||t.isNumber(e)?e+n:t.isNull(e)?n:this.model?this.model.cid+"_"+n:n},createTitle:function(){var e=this.key;return e=e.replace(/([A-Z])/g," $1"),e=e.replace(/^./,function(e){return e.toUpperCase()}),e},templateData:function(){var e=this.schema;return{help:e.help||"",title:e.title,fieldAttrs:e.fieldAttrs,editorAttrs:e.editorAttrs,key:this.key,editorId:this.editor.id}},render:function(){var n=this.schema,r=this.editor,i=e(e.trim(this.template(t.result(this,"templateData"))));return n.fieldClass&&i.addClass(n.fieldClass),n.fieldAttrs&&i.attr(n.fieldAttrs),i.find("[data-editor]").add(i).each(function(n,i){var s=e(i),o=s.attr("data-editor");if(t.isUndefined(o))return;s.append(r.render().el)}),this.setElement(i),this},validate:function(){var e=this.editor.validate();return e?this.setError(e.message):this.clearError(),e},setError:function(e){if(this.editor.hasNestedForm)return;this.$el.addClass(this.errorClassName),this.$("[data-error]").html(e)},clearError:function(){this.$el.removeClass(this.errorClassName),this.$("[data-error]").empty()},commit:function(){return this.editor.commit()},getValue:function(){return this.editor.getValue()},setValue:function(e){this.editor.setValue(e)},focus:function(){this.editor.focus()},blur:function(){this.editor.blur()},remove:function(){this.editor.remove(),n.View.prototype.remove.call(this)}},{template:t.template('    <div>      <label for="<%= editorId %>"><%= title %></label>      <div>        <span data-editor></span>        <div data-error></div>        <div><%= help %></div>      </div>    </div>  ',null,r.templateSettings),errorClassName:"error"}),r.NestedField=r.Field.extend({template:t.template(e.trim("    <div>      <span data-editor></span>      <% if (help) { %>        <div><%= help %></div>      <% } %>      <div data-error></div>    </div>  "),null,r.templateSettings)}),r.Editor=r.editors.Base=n.View.extend({defaultValue:null,hasFocus:!1,initialize:function(e){var e=e||{};if(e.model){if(!e.key)throw"Missing option: 'key'";this.model=e.model,this.value=this.model.get(e.key)}else e.value&&(this.value=e.value);this.value===undefined&&(this.value=this.defaultValue),t.extend(this,t.pick(e,"key","form"));var n=this.schema=e.schema||{};this.validators=e.validators||n.validators,this.$el.attr("id",this.id),this.$el.attr("name",this.getName()),n.editorClass&&this.$el.addClass(n.editorClass),n.editorAttrs&&this.$el.attr(n.editorAttrs)},getName:function(){var e=this.key||"";return e.replace(/\./g,"_")},getValue:function(){return this.value},setValue:function(e){this.value=e},focus:function(){throw"Not implemented"},blur:function(){throw"Not implemented"},commit:function(e){var t=this.validate();if(t)return t;this.listenTo(this.model,"invalid",function(e,n){t=n}),this.model.set(this.key,this.getValue(),e);if(t)return t},validate:function(){var e=this.$el,n=null,r=this.getValue(),i=this.form?this.form.getValue():{},s=this.validators,o=this.getValidator;return s&&t.every(s,function(e){return n=o(e)(r,i),n?!1:!0}),n},trigger:function(e){return e==="focus"?this.hasFocus=!0:e==="blur"&&(this.hasFocus=!1),n.View.prototype.trigger.apply(this,arguments)},getValidator:function(e){var n=r.validators;if(t.isRegExp(e))return n.regexp({regexp:e});if(t.isString(e)){if(!n[e])throw new Error('Validator "'+e+'" not found');return n[e]()}if(t.isFunction(e))return e;if(t.isObject(e)&&e.type){var i=e;return n[i.type](i)}throw new Error("Invalid validator: "+e)}}),r.editors.Text=r.Editor.extend({tagName:"input",defaultValue:"",previousValue:"",events:{keyup:"determineChange",keypress:function(e){var t=this;setTimeout(function(){t.determineChange()},0)},select:function(e){this.trigger("select",this)},focus:function(e){this.trigger("focus",this)},blur:function(e){this.trigger("blur",this)}},initialize:function(e){r.editors.Base.prototype.initialize.call(this,e);var t=this.schema,n="text";t&&t.editorAttrs&&t.editorAttrs.type&&(n=t.editorAttrs.type),t&&t.dataType&&(n=t.dataType),this.$el.attr("type",n)},render:function(){return this.setValue(this.value),this},determineChange:function(e){var t=this.$el.val(),n=t!==this.previousValue;n&&(this.previousValue=t,this.trigger("change",this))},getValue:function(){return this.$el.val()},setValue:function(e){this.$el.val(e),this.previousValue=this.$el.val()},focus:function(){if(this.hasFocus)return;this.$el.focus()},blur:function(){if(!this.hasFocus)return;this.$el.blur()},select:function(){this.$el.select()}}),r.editors.TextArea=r.editors.Text.extend({tagName:"textarea"}),r.editors.Password=r.editors.Text.extend({initialize:function(e){r.editors.Text.prototype.initialize.call(this,e),this.$el.attr("type","password")}}),r.editors.Number=r.editors.Text.extend({defaultValue:0,events:t.extend({},r.editors.Text.prototype.events,{keypress:"onKeyPress",input:"determineChange"}),initialize:function(e){r.editors.Text.prototype.initialize.call(this,e),this.$el.attr("type","number"),this.$el.attr("step","any")},onKeyPress:function(e){var t=this,n=function(){setTimeout(function(){t.determineChange()},0)};if(e.charCode===0){n();return}var r=this.$el.val()+String.fromCharCode(e.charCode),i=/^-?[0-9]*\.?[0-9]*$/.test(r);i?n():e.preventDefault()},getValue:function(){var e=this.$el.val();return e===""?null:parseFloat(e,10)},setValue:function(e){e=function(){return t.isNumber(e)?e:t.isString(e)&&e!==""?parseFloat(e,10):null}(),t.isNaN(e)&&(e=null),r.editors.Text.prototype.setValue.call(this,e)}}),r.editors.Hidden=r.editors.Base.extend({defaultValue:"",initialize:function(e){r.editors.Text.prototype.initialize.call(this,e),this.$el.attr("type","hidden")},focus:function(){},blur:function(){}}),r.editors.Checkbox=r.editors.Base.extend({defaultValue:!1,tagName:"input",events:{click:function(e){this.trigger("change",this)},focus:function(e){this.trigger("focus",this)},blur:function(e){this.trigger("blur",this)}},initialize:function(e){r.editors.Base.prototype.initialize.call(this,e),this.$el.attr("type","checkbox")},render:function(){return this.setValue(this.value),this},getValue:function(){return this.$el.prop("checked")},setValue:function(e){e&&this.$el.prop("checked",!0)},focus:function(){if(this.hasFocus)return;this.$el.focus()},blur:function(){if(!this.hasFocus)return;this.$el.blur()}}),r.editors.Select=r.editors.Base.extend({tagName:"select",events:{change:function(e){this.trigger("change",this)},focus:function(e){this.trigger("focus",this)},blur:function(e){this.trigger("blur",this)}},initialize:function(e){r.editors.Base.prototype.initialize.call(this,e);if(!this.schema||!this.schema.options)throw"Missing required 'schema.options'"},render:function(){return this.setOptions(this.schema.options),this},setOptions:function(e){var r=this;if(e instanceof n.Collection){var i=e;i.length>0?this.renderOptions(e):i.fetch({success:function(t){r.renderOptions(e)}})}else t.isFunction(e)?e(function(e){r.renderOptions(e)},r):this.renderOptions(e)},renderOptions:function(e){var t=this.$el,n;n=this._getOptionsHtml(e),t.html(n),this.setValue(this.value)},_getOptionsHtml:function(e){var r;if(t.isString(e))r=e;else if(t.isArray(e))r=this._arrayToHtml(e);else if(e instanceof n.Collection)r=this._collectionToHtml(e);else if(t.isFunction(e)){var i;e(function(e){i=e},this),r=this._getOptionsHtml(i)}return r},getValue:function(){return this.$el.val()},setValue:function(e){this.$el.val(e)},focus:function(){if(this.hasFocus)return;this.$el.focus()},blur:function(){if(!this.hasFocus)return;this.$el.blur()},_collectionToHtml:function(e){var t=[];e.each(function(e){t.push({val:e.id,label:e.toString()})});var n=this._arrayToHtml(t);return n},_arrayToHtml:function(e){var n=[];return t.each(e,function(e){if(t.isObject(e))if(e.group)n.push('<optgroup label="'+e.group+'">'),n.push(this._getOptionsHtml(e.options)),n.push("</optgroup>");else{var r=e.val||e.val===0?e.val:"";n.push('<option value="'+r+'">'+e.label+"</option>")}else n.push("<option>"+e+"</option>")},this),n.join("")}}),r.editors.Radio=r.editors.Select.extend({tagName:"ul",events:{"change input[type=radio]":function(){this.trigger("change",this)},"focus input[type=radio]":function(){if(this.hasFocus)return;this.trigger("focus",this)},"blur input[type=radio]":function(){if(!this.hasFocus)return;var e=this;setTimeout(function(){if(e.$("input[type=radio]:focus")[0])return;e.trigger("blur",e)},0)}},getValue:function(){return this.$("input[type=radio]:checked").val()},setValue:function(e){this.$("input[type=radio]").val([e])},focus:function(){if(this.hasFocus)return;var e=this.$("input[type=radio]:checked");if(e[0]){e.focus();return}this.$("input[type=radio]").first().focus()},blur:function(){if(!this.hasFocus)return;this.$("input[type=radio]:focus").blur()},_arrayToHtml:function(e){var n=[],r=this;return t.each(e,function(e,i){var s="<li>";if(t.isObject(e)){var o=e.val||e.val===0?e.val:"";s+='<input type="radio" name="'+r.id+'" value="'+o+'" id="'+r.id+"-"+i+'" />',s+='<label for="'+r.id+"-"+i+'">'+e.label+"</label>"}else s+='<input type="radio" name="'+r.id+'" value="'+e+'" id="'+r.id+"-"+i+'" />',s+='<label for="'+r.id+"-"+i+'">'+e+"</label>";s+="</li>",n.push(s)}),n.join("")}}),r.editors.Checkboxes=r.editors.Select.extend({tagName:"ul",events:{"click input[type=checkbox]":function(){this.trigger("change",this)},"focus input[type=checkbox]":function(){if(this.hasFocus)return;this.trigger("focus",this)},"blur input[type=checkbox]":function(){if(!this.hasFocus)return;var e=this;setTimeout(function(){if(e.$("input[type=checkbox]:focus")[0])return;e.trigger("blur",e)},0)}},getValue:function(){var t=[];return this.$("input[type=checkbox]:checked").each(function(){t.push(e(this).val())}),t},setValue:function(e){t.isArray(e)||(e=[e]),this.$("input[type=checkbox]").val(e)},focus:function(){if(this.hasFocus)return;this.$("input[type=checkbox]").first().focus()},blur:function(){if(!this.hasFocus)return;this.$("input[type=checkbox]:focus").blur()},_arrayToHtml:function(e){var n=[],r=this;return t.each(e,function(e,i){var s="<li>";if(t.isObject(e)){var o=e.val||e.val===0?e.val:"";s+='<input type="checkbox" name="'+r.id+'" value="'+o+'" id="'+r.id+"-"+i+'" />',s+='<label for="'+r.id+"-"+i+'">'+e.label+"</label>"}else s+='<input type="checkbox" name="'+r.id+'" value="'+e+'" id="'+r.id+"-"+i+'" />',s+='<label for="'+r.id+"-"+i+'">'+e+"</label>";s+="</li>",n.push(s)}),n.join("")}}),r.editors.Object=r.editors.Base.extend({hasNestedForm:!0,initialize:function(e){this.value={},r.editors.Base.prototype.initialize.call(this,e);if(!this.form)throw'Missing required option "form"';if(!this.schema.subSchema)throw new Error("Missing required 'schema.subSchema' option for Object editor")},render:function(){var e=this.form.constructor;return this.nestedForm=new e({schema:this.schema.subSchema,data:this.value,idPrefix:this.id+"_",Field:e.NestedField}),this._observeFormEvents(),this.$el.html(this.nestedForm.render().el),this.hasFocus&&this.trigger("blur",this),this},getValue:function(){return this.nestedForm?this.nestedForm.getValue():this.value},setValue:function(e){this.value=e,this.render()},focus:function(){if(this.hasFocus)return;this.nestedForm.focus()},blur:function(){if(!this.hasFocus)return;this.nestedForm.blur()},remove:function(){this.nestedForm.remove(),n.View.prototype.remove.call(this)},validate:function(){return this.nestedForm.validate()},_observeFormEvents:function(){if(!this.nestedForm)return;this.nestedForm.on("all",function(){var e=t.toArray(arguments);e[1]=this,this.trigger.apply(this,e)},this)}}),r.editors.NestedModel=r.editors.Object.extend({initialize:function(e){r.editors.Base.prototype.initialize.call(this,e);if(!this.form)throw'Missing required option "form"';if(!e.schema.model)throw'Missing required "schema.model" option for NestedModel editor'},render:function(){var e=this.form.constructor,t=this.value||{},n=this.key,r=this.schema.model,i=t.constructor===r?t:new r(t);return this.nestedForm=new e({model:i,idPrefix:this.id+"_",fieldTemplate:"nestedField"}),this._observeFormEvents(),this.$el.html(this.nestedForm.render().el),this.hasFocus&&this.trigger("blur",this),this},commit:function(){var e=this.nestedForm.commit();return e?(this.$el.addClass("error"),e):r.editors.Object.prototype.commit.call(this)}}),r.editors.Date=r.editors.Base.extend({events:{"change select":function(){this.updateHidden(),this.trigger("change",this)},"focus select":function(){if(this.hasFocus)return;this.trigger("focus",this)},"blur select":function(){if(!this.hasFocus)return;var e=this;setTimeout(function(){if(e.$("select:focus")[0])return;e.trigger("blur",e)},0)}},initialize:function(e){e=e||{},r.editors.Base.prototype.initialize.call(this,e);var n=r.editors.Date,i=new Date;this.options=t.extend({monthNames:n.monthNames,showMonthNames:n.showMonthNames},e),this.schema=t.extend({yearStart:i.getFullYear()-100,yearEnd:i.getFullYear()},e.schema||{}),this.value&&!t.isDate(this.value)&&(this.value=new Date(this.value));if(!this.value){var s=new Date;s.setSeconds(0),s.setMilliseconds(0),this.value=s}this.template=e.template||this.constructor.template},render:function(){var n=this.options,r=this.schema,i=t.map(t.range(1,32),function(e){return'<option value="'+e+'">'+e+"</option>"}),s=t.map(t.range(0,12),function(e){var t=n.showMonthNames?n.monthNames[e]:e+1;return'<option value="'+e+'">'+t+"</option>"}),o=r.yearStart<r.yearEnd?t.range(r.yearStart,r.yearEnd+1):t.range(r.yearStart,r.yearEnd-1,-1),u=t.map(o,function(e){return'<option value="'+e+'">'+e+"</option>"}),a=e(e.trim(this.template({dates:i.join(""),months:s.join(""),years:u.join("")})));return this.$date=a.find('[data-type="date"]'),this.$month=a.find('[data-type="month"]'),this.$year=a.find('[data-type="year"]'),this.$hidden=e('<input type="hidden" name="'+this.key+'" />'),a.append(this.$hidden),this.setValue(this.value),this.setElement(a),this.$el.attr("id",this.id),this.$el.attr("name",this.getName()),this.hasFocus&&this.trigger("blur",this),this},getValue:function(){var e=this.$year.val(),t=this.$month.val(),n=this.$date.val();return!e||!t||!n?null:new Date(e,t,n)},setValue:function(e){this.$date.val(e.getDate()),this.$month.val(e.getMonth()),this.$year.val(e.getFullYear()),this.updateHidden()},focus:function(){if(this.hasFocus)return;this.$("select").first().focus()},blur:function(){if(!this.hasFocus)return;this.$("select:focus").blur()},updateHidden:function(){var e=this.getValue();t.isDate(e)&&(e=e.toISOString()),this.$hidden.val(e)}},{template:t.template('    <div>      <select data-type="date"><%= dates %></select>      <select data-type="month"><%= months %></select>      <select data-type="year"><%= years %></select>    </div>  ',null,r.templateSettings),showMonthNames:!0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"]}),r.editors.DateTime=r.editors.Base.extend({events:{"change select":function(){this.updateHidden(),this.trigger("change",this)},"focus select":function(){if(this.hasFocus)return;this.trigger("focus",this)},"blur select":function(){if(!this.hasFocus)return;var e=this;setTimeout(function(){if(e.$("select:focus")[0])return;e.trigger("blur",e)},0)}},initialize:function(e){e=e||{},r.editors.Base.prototype.initialize.call(this,e),this.options=t.extend({DateEditor:r.editors.DateTime.DateEditor},e),this.schema=t.extend({minsInterval:15},e.schema||{}),this.dateEditor=new this.options.DateEditor(e),this.value=this.dateEditor.value,this.template=e.template||this.constructor.template},render:function(){function n(e){return e<10?"0"+e:e}var r=this.schema,i=t.map(t.range(0,24),function(e){return'<option value="'+e+'">'+n(e)+"</option>"}),s=t.map(t.range(0,60,r.minsInterval),function(e){return'<option value="'+e+'">'+n(e)+"</option>"}),o=e(e.trim(this.template({hours:i.join(),mins:s.join()})));return o.find("[data-date]").append(this.dateEditor.render().el),this.$hour=o.find('select[data-type="hour"]'),this.$min=o.find('select[data-type="min"]'),this.$hidden=o.find('input[type="hidden"]'),this.setValue(this.value),this.setElement(o),this.$el.attr("id",this.id),this.$el.attr("name",this.getName()),this.hasFocus&&this.trigger("blur",this),this},getValue:function(){var e=this.dateEditor.getValue(),t=this.$hour.val(),n=this.$min.val();return!e||!t||!n?null:(e.setHours(t),e.setMinutes(n),e)},setValue:function(e){t.isDate(e)||(e=new Date(e)),this.dateEditor.setValue(e),this.$hour.val(e.getHours()),this.$min.val(e.getMinutes()),this.updateHidden()},focus:function(){if(this.hasFocus)return;this.$("select").first().focus()},blur:function(){if(!this.hasFocus)return;this.$("select:focus").blur()},updateHidden:function(){var e=this.getValue();t.isDate(e)&&(e=e.toISOString()),this.$hidden.val(e)},remove:function(){this.dateEditor.remove(),r.editors.Base.prototype.remove.call(this)}},{template:t.template('    <div class="bbf-datetime">      <div class="bbf-date-container" data-date></div>      <select data-type="hour"><%= hours %></select>      :      <select data-type="min"><%= mins %></select>    </div>  ',null,r.templateSettings),DateEditor:r.editors.Date}),r.VERSION="0.12.0",n.Form=r,r}),function(){n("plugins/backbone-forms.bootstrap",["jquery","underscore","backbone","libs/backbone-forms"],function(e,t,n){var r;return r=n.Form,r.template=t.template('<form class="form" data-fieldsets></form>'),r.Fieldset.template=t.template('<fieldset class="bbf-fieldset" data-fields>\n  <% if (legend) { %>\n    <legend><%= legend %></legend>\n  <% } %>\n</fieldset>'),r.Field.template=t.template('<div class="control-group field-<%= key %> bbf-field">\n  <% if (this.options.schema.type === "Checkbox") { %>\n    <div class="bbf-editor hacked-for-checkbox" data-editor><label class="control-label" for="<%= editorId %>"><%= title %></label></div>\n    <div class="clearfix"></div>\n  <% } else { %>\n    <label class="control-label" for="<%= editorId %>"><%= title %></label>\n    <div class="bbf-editor" data-editor></div>\n  <% } %>\n  <div class="bbf-error-tooltip-container">\n    <div class="bff-error-tooltip versal-tooltip versal-tooltip-text versal-tooltip-left versal-tooltip-align-top">\n      <div class="versal-tooltip-arrow"></div>\n      <div class="bbf-error" data-error></div>\n    </div>\n  </div>\n</div>'),r.editors.Date.template=t.template('<div class="bbf-date">\n  <select data-type="date" class="bbf-date"><%= dates %></select>\n  <select data-type="month" class="bbf-month"><%= months %></select>\n  <select data-type="year" class="bbf-year"><%= years %></select>\n</div>'),r.editors.DateTime.template=t.template('<div class="bbf-datetime">\n  <div class="bbf-date-container" data-date></div>\n  <select data-type="hour" style="width: 4em"><%= hours %></select>\n  :\n  <select data-type="min" style="width: 4em"><%= mins %></select>\n</div>'),r.Field.errorClassName="bbf-error"})}.call(this),function(e,t,n){function f(e,t,n){var r=[];for(var i=0;i<e.length;i++){var s=tinycolor(e[i]),u=s.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";u+=tinycolor.equals(t,e[i])?" sp-thumb-active":"";var a=o?"background-color:"+s.toRgbString():"filter:"+s.toFilter();r.push('<span title="'+s.toRgbString()+'" data-color="'+s.toRgbString()+'" class="'+u+'"><span class="sp-thumb-inner" style="'+a+';" /></span>')}return"<div class='sp-cf "+n+"'>"+r.join("")+"</div>"}function l(){for(var e=0;e<i.length;e++)i[e]&&i[e].hide()}function c(e,n){var i=t.extend({},r,e);return i.callbacks={move:m(i.move,n),change:m(i.change,n),show:m(i.show,n),hide:m(i.hide,n),beforeShow:m(i.beforeShow,n)},i}function h(r,h){function gt(){d.showPaletteOnly&&(d.showPalette=!0),J.toggleClass("sp-flat",m),J.toggleClass("sp-input-disabled",!d.showInput),J.toggleClass("sp-alpha-enabled",d.showAlpha),J.toggleClass("sp-buttons-disabled",!d.showButtons),J.toggleClass("sp-palette-disabled",!d.showPalette),J.toggleClass("sp-palette-only",d.showPaletteOnly),J.toggleClass("sp-initial-disabled",!d.showInitial),J.addClass(d.className),jt()}function yt(){function o(e){return e.data&&e.data.ignore?(Ot(t(this).data("color")),Dt()):(Ot(t(this).data("color")),Bt(!0),Dt(),Lt()),!1}s&&J.find("*:not(input)").attr("unselectable","on"),gt(),at&&X.after(ft).hide();if(m)X.after(J).hide();else{var n=d.appendTo==="parent"?X.parent():t(d.appendTo);n.length!==1&&(n=t("body")),n.append(J)}if(w&&e.localStorage){try{var r=e.localStorage[w].split(",#");r.length>1&&(delete e.localStorage[w],t.each(r,function(e,t){bt(t)}))}catch(i){}try{I=e.localStorage[w].split(";")}catch(i){}}lt.bind("click.spectrum touchstart.spectrum",function(e){V||Ct(),e.stopPropagation(),t(e.target).is("input")||e.preventDefault()}),(X.is(":disabled")||d.disabled===!0)&&Rt(),J.click(v),nt.change(Nt),nt.bind("paste",function(){setTimeout(Nt,1)}),nt.keydown(function(e){e.keyCode==13&&Nt()}),st.text(d.cancelText),st.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),Lt("cancel")}),ot.text(d.chooseText),ot.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),_t()&&(Bt(!0),Lt())}),g(et,function(e,t,n){B=e/O,n.shiftKey&&(B=Math.round(B*10)/10),Dt()}),g(G,function(e,t){D=parseFloat(t/L),Dt()},xt,Tt),g(K,function(e,t,n){if(!n.shiftKey)U=null;else if(!U){var r=P*N,i=C-H*C,s=Math.abs(e-r)>Math.abs(t-i);U=s?"x":"y"}var o=!U||U==="x",u=!U||U==="y";o&&(P=parseFloat(e/N)),u&&(H=parseFloat((C-t)/C)),Dt()},xt,Tt),ht?(Ot(ht),Pt(),vt=dt||tinycolor(ht).format,bt(ht)):Pt(),m&&kt();var u=s?"mousedown.spectrum":"click.spectrum touchstart.spectrum";rt.delegate(".sp-thumb-el",u,o),it.delegate(".sp-thumb-el:nth-child(1)",u,{ignore:!0},o)}function bt(n){if(b){var r=tinycolor(n).toRgbString();if(t.inArray(r,I)===-1){I.push(r);while(I.length>q)I.shift()}if(w&&e.localStorage)try{e.localStorage[w]=I.join(";")}catch(i){}}}function wt(){var e=[],t=I,n={},r;if(d.showPalette){for(var i=0;i<F.length;i++)for(var s=0;s<F[i].length;s++)r=tinycolor(F[i][s]).toRgbString(),n[r]=!0;for(i=0;i<t.length;i++)r=tinycolor(t[i]).toRgbString(),n.hasOwnProperty(r)||(e.push(t[i]),n[r]=!0)}return e.reverse().slice(0,d.maxSelectionSize)}function Et(){var e=Mt(),n=t.map(F,function(t,n){return f(t,e,"sp-palette-row sp-palette-row-"+n)});I&&n.push(f(wt(),e,"sp-palette-row sp-palette-row-selection")),rt.html(n.join(""))}function St(){if(d.showInitial){var e=pt,t=Mt();it.html(f([e,t],t,"sp-palette-row-initial"))}}function xt(){(C<=0||N<=0||L<=0)&&jt(),J.addClass(R),U=null}function Tt(){J.removeClass(R)}function Nt(){var e=tinycolor(nt.val());e.ok?Ot(e):nt.addClass("sp-validation-error")}function Ct(){T?Lt():kt()}function kt(){var n=t.Event("beforeShow.spectrum");if(T){jt();return}X.trigger(n,[Mt()]);if(S.beforeShow(Mt())===!1||n.isDefaultPrevented())return;l(),T=!0,t(z).bind("click.spectrum",Lt),t(e).bind("resize.spectrum",x),ft.addClass("sp-active"),J.removeClass("sp-hidden"),d.showPalette&&Et(),jt(),Pt(),pt=Mt(),St(),S.show(pt),X.trigger("show.spectrum",[pt])}function Lt(n){if(n&&n.type=="click"&&n.button==2)return;if(!T||m)return;T=!1,t(z).unbind("click.spectrum",Lt),t(e).unbind("resize.spectrum",x),ft.removeClass("sp-active"),J.addClass("sp-hidden");var r=!tinycolor.equals(Mt(),pt);r&&(mt&&n!=="cancel"?Bt(!0):At()),S.hide(Mt()),X.trigger("hide.spectrum",[Mt()])}function At(){Ot(pt,!0)}function Ot(e,t){if(tinycolor.equals(e,Mt()))return;var n=tinycolor(e),r=n.toHsv();D=r.h%360/360,P=r.s,H=r.v,B=r.a,Pt(),n.ok&&!t&&(vt=dt||n.format)}function Mt(e){return e=e||{},tinycolor.fromRatio({h:D,s:P,v:H,a:Math.round(B*100)/100},{format:e.format||vt})}function _t(){return!nt.hasClass("sp-validation-error")}function Dt(){Pt(),S.move(Mt()),X.trigger("move.spectrum",[Mt()])}function Pt(){nt.removeClass("sp-validation-error"),Ht();var e=tinycolor.fromRatio({h:D,s:1,v:1});K.css("background-color",e.toHexString());var t=vt;B<1&&(t==="hex"||t==="hex3"||t==="hex6"||t==="name")&&(t="rgb");var n=Mt({format:t}),r=n.toHexString(),i=n.toRgbString();o||n.alpha===1?ct.css("background-color",i):(ct.css("background-color","transparent"),ct.css("filter",n.toFilter()));if(d.showAlpha){var u=n.toRgb();u.a=0;var a=tinycolor(u).toRgbString(),f="linear-gradient(left, "+a+", "+r+")";s?Z.css("filter",tinycolor(a).toFilter({gradientType:1},r)):(Z.css("background","-webkit-"+f),Z.css("background","-moz-"+f),Z.css("background","-ms-"+f),Z.css("background",f))}d.showInput&&nt.val(n.toString(t)),d.showPalette&&Et(),St()}function Ht(){var e=P,t=H,n=e*N,r=C-t*C;n=Math.max(-k,Math.min(N-k,n-k)),r=Math.max(-k,Math.min(C-k,r-k)),Q.css({top:r,left:n});var i=B*O;tt.css({left:i-M/2});var s=D*L;Y.css({top:s-_})}function Bt(e){var t=Mt();ut&&X.val(t.toString(vt));var n=!tinycolor.equals(t,pt);pt=t,bt(t),e&&n&&(S.change(t),X.trigger("change",[t]))}function jt(){N=K.width(),C=K.height(),k=Q.height(),A=G.width(),L=G.height(),_=Y.height(),O=et.width(),M=tt.width(),m||(J.css("position","absolute"),J.offset(p(J,lt))),Ht()}function Ft(){X.show(),lt.unbind("click.spectrum touchstart.spectrum"),J.remove(),ft.remove(),i[Ut.id]=null}function It(e,r){if(e===n)return t.extend({},d);if(r===n)return d[e];d[e]=r,gt()}function qt(){V=!1,X.attr("disabled",!1),lt.removeClass("sp-disabled")}function Rt(){Lt(),V=!0,X.attr("disabled",!0),lt.addClass("sp-disabled")}var d=c(h,r),m=d.flat,b=d.showSelectionPalette,w=d.localStorageKey,E=d.theme,S=d.callbacks,x=y(jt,10),T=!1,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=1,j=d.palette.slice(0),F=t.isArray(j[0])?j:[j],I=d.selectionPalette.slice(0),q=d.maxSelectionSize,R="sp-dragging",U=null,z=r.ownerDocument,W=z.body,X=t(r),V=!1,J=t(a,z).addClass(E),K=J.find(".sp-color"),Q=J.find(".sp-dragger"),G=J.find(".sp-hue"),Y=J.find(".sp-slider"),Z=J.find(".sp-alpha-inner"),et=J.find(".sp-alpha"),tt=J.find(".sp-alpha-handle"),nt=J.find(".sp-input"),rt=J.find(".sp-palette"),it=J.find(".sp-initial"),st=J.find(".sp-cancel"),ot=J.find(".sp-choose"),ut=X.is("input"),at=ut&&!m,ft=at?t(u).addClass(E).addClass(d.className):t([]),lt=at?ft:X,ct=ft.find(".sp-preview-inner"),ht=d.color||ut&&X.val(),pt=!1,dt=d.preferredFormat,vt=dt,mt=!d.showButtons||d.clickoutFiresChange;yt();var Ut={show:kt,hide:Lt,toggle:Ct,reflow:jt,option:It,enable:qt,disable:Rt,set:function(e){Ot(e),Bt()},get:Mt,destroy:Ft,container:J};return Ut.id=i.push(Ut)-1,Ut}function p(e,n){var r=0,i=e.outerWidth(),s=e.outerHeight(),o=n.outerHeight(),u=e[0].ownerDocument,a=u.documentElement,f=a.clientWidth+t(u).scrollLeft(),l=a.clientHeight+t(u).scrollTop(),c=n.offset();return c.top+=o,c.left-=Math.min(c.left,c.left+i>f&&f>i?Math.abs(c.left+i-f):0),c.top-=Math.min(c.top,c.top+s>l&&l>s?Math.abs(s+o-r):r),c}function d(){}function v(e){e.stopPropagation()}function m(e,t){var n=Array.prototype.slice,r=n.call(arguments,2);return function(){return e.apply(t,r.concat(n.call(arguments)))}}function g(n,r,i,o){function d(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}function v(e){if(a){if(s&&document.documentMode<9&&!e.button)return g();var t=e.originalEvent.touches,i=t?t[0].pageX:e.pageX,o=t?t[0].pageY:e.pageY,u=Math.max(0,Math.min(i-f.left,c)),p=Math.max(0,Math.min(o-f.top,l));h&&d(e),r.apply(n,[u,p,e])}}function m(e){var r=e.which?e.which==3:e.button==2,s=e.originalEvent.touches;!r&&!a&&i.apply(n,arguments)!==!1&&(a=!0,l=t(n).height(),c=t(n).width(),f=t(n).offset(),t(u).bind(p),t(u.body).addClass("sp-dragging"),h||v(e),d(e))}function g(){a&&(t(u).unbind(p),t(u.body).removeClass("sp-dragging"),o.apply(n,arguments)),a=!1}r=r||function(){},i=i||function(){},o=o||function(){};var u=n.ownerDocument||document,a=!1,f={},l=0,c=0,h="ontouchstart"in e,p={};p.selectstart=d,p.dragstart=d,p["touchmove mousemove"]=v,p["touchend mouseup"]=g,t(n).bind("touchstart mousedown",m)}function y(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,e.apply(i,s)};n&&clearTimeout(r);if(n||!r)r=setTimeout(o,t)}}function b(){e.console&&(Function.prototype.bind?b=Function.prototype.bind.call(console.log,console):b=function(){Function.prototype.apply.call(console.log,console,arguments)},b.apply(this,arguments))}var r={beforeShow:d,move:d,change:d,show:d,hide:d,color:!1,flat:!1,showInput:!1,showButtons:!0,clickoutFiresChange:!1,showInitial:!1,showPalette:!1,showPaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",preferredFormat:!1,className:"",showAlpha:!1,theme:"sp-light",palette:["fff","000"],selectionPalette:[],disabled:!1},i=[],s=!!/msie/i.exec(e.navigator.userAgent),o=function(){function e(e,t){return!!~(""+e).indexOf(t)}var t=document.createElement("div"),n=t.style;return n.cssText="background-color:rgba(0,0,0,.5)",e(n.backgroundColor,"rgba")||e(n.backgroundColor,"hsla")}(),u=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),a=function(){var e="";if(s)for(var t=1;t<=6;t++)e+="<div class='sp-"+t+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",e,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),w="spectrum.id";t.fn.spectrum=function(e,n){if(typeof e=="string"){var r=this,s=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=i[t(this).data(w)];if(n){var o=n[e];if(!o)throw new Error("Spectrum: no such method: '"+e+"'");e=="get"?r=n.get():e=="container"?r=n.container:e=="option"?r=n.option.apply(n,s):e=="destroy"?(n.destroy(),t(this).removeData(w)):o.apply(n,s)}}),r}return this.spectrum("destroy").each(function(){var n=h(this,e);t(this).data(w,n.id)})},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=g,t.fn.spectrum.defaults=r,t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){var e=t("<input type='color' value='!' />")[0],n=e.type==="color"&&e.value!="!";n||t("input[type=color]").spectrum({preferredFormat:"hex6"})},function(e){function f(e,t){e=e?e:"",t=t||{};if(typeof e=="object"&&e.hasOwnProperty("_tc_id"))return e;var n=l(e),i=n.r,o=n.g,u=n.b,a=n.a,c=s(100*a)/100,p=t.format||n.format;return i<1&&(i=s(i)),o<1&&(o=s(o)),u<1&&(u=s(u)),{ok:n.ok,format:p,_tc_id:r++,alpha:a,toHsv:function(){var e=d(i,o,u);return{h:e.h*360,s:e.s,v:e.v,a:a}},toHsvString:function(){var e=d(i,o,u),t=s(e.h*360),n=s(e.s*100),r=s(e.v*100);return a==1?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+c+")"},toHsl:function(){var e=h(i,o,u);return{h:e.h*360,s:e.s,l:e.l,a:a}},toHslString:function(){var e=h(i,o,u),t=s(e.h*360),n=s(e.s*100),r=s(e.l*100);return a==1?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+c+")"},toHex:function(e){return m(i,o,u,e)},toHexString:function(e){return"#"+m(i,o,u,e)},toRgb:function(){return{r:s(i),g:s(o),b:s(u),a:a}},toRgbString:function(){return a==1?"rgb("+s(i)+", "+s(o)+", "+s(u)+")":"rgba("+s(i)+", "+s(o)+", "+s(u)+", "+c+")"},toPercentageRgb:function(){return{r:s(w(i,255)*100)+"%",g:s(w(o,255)*100)+"%",b:s(w(u,255)*100)+"%",a:a}},toPercentageRgbString:function(){return a==1?"rgb("+s(w(i,255)*100)+"%, "+s(w(o,255)*100)+"%, "+s(w(u,255)*100)+"%)":"rgba("+s(w(i,255)*100)+"%, "+s(w(o,255)*100)+"%, "+s(w(u,255)*100)+"%, "+c+")"},toName:function(){return y[m(i,o,u,!0)]||!1},toFilter:function(e){var n=m(i,o,u),r=n,s=Math.round(parseFloat(a)*255).toString(16),l=s,c=t&&t.gradientType?"GradientType = 1, ":"";if(e){var h=f(e);r=h.toHex(),l=Math.round(parseFloat(h.alpha)*255).toString(16)}return"progid:DXImageTransform.Microsoft.gradient("+c+"startColorstr=#"+N(s)+n+",endColorstr=#"+N(l)+r+")"},toString:function(e){e=e||this.format;var t=!1;e==="rgb"&&(t=this.toRgbString()),e==="prgb"&&(t=this.toPercentageRgbString());if(e==="hex"||e==="hex6")t=this.toHexString();return e==="hex3"&&(t=this.toHexString(!0)),e==="name"&&(t=this.toName()),e==="hsl"&&(t=this.toHslString()),e==="hsv"&&(t=this.toHsvString()),t||this.toHexString()}}}function l(e){var t={r:0,g:0,b:0},n=1,r=!1,i=!1;typeof e=="string"&&(e=L(e)),typeof e=="object"&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(t=c(e.r,e.g,e.b),r=!0,i=String(e.r).substr(-1)==="%"?"prgb":"rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(e.s=C(e.s),e.v=C(e.v),t=v(e.h,e.s,e.v),r=!0,i="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(e.s=C(e.s),e.l=C(e.l),t=p(e.h,e.s,e.l),r=!0,i="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=parseFloat(n);if(isNaN(n)||n<0||n>1)n=1;return{ok:r,format:e.format||i,r:o(255,u(t.r,0)),g:o(255,u(t.g,0)),b:o(255,u(t.b,0)),a:n}}function c(e,t,n){return{r:w(e,255)*255,g:w(t,255)*255,b:w(n,255)*255}}function h(e,t,n){e=w(e,255),t=w(t,255),n=w(n,255);var r=u(e,t,n),i=o(e,t,n),s,a,f=(r+i)/2;if(r==i)s=a=0;else{var l=r-i;a=f>.5?l/(2-r-i):l/(r+i);switch(r){case e:s=(t-n)/l+(t<n?6:0);break;case t:s=(n-e)/l+2;break;case n:s=(e-t)/l+4}s/=6}return{h:s,s:a,l:f}}function p(e,t,n){function o(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var r,i,s;e=w(e,360),t=w(t,100),n=w(n,100);if(t===0)r=i=s=n;else{var u=n<.5?n*(1+t):n+t-n*t,a=2*n-u;r=o(a,u,e+1/3),i=o(a,u,e),s=o(a,u,e-1/3)}return{r:r*255,g:i*255,b:s*255}}function d(e,t,n){e=w(e,255),t=w(t,255),n=w(n,255);var r=u(e,t,n),i=o(e,t,n),s,a,f=r,l=r-i;a=r===0?0:l/r;if(r==i)s=0;else{switch(r){case e:s=(t-n)/l+(t<n?6:0);break;case t:s=(n-e)/l+2;break;case n:s=(e-t)/l+4}s/=6}return{h:s,s:a,v:f}}function v(e,t,n){e=w(e,360)*6,t=w(t,100),n=w(n,100);var r=i.floor(e),s=e-r,o=n*(1-t),u=n*(1-s*t),a=n*(1-(1-s)*t),f=r%6,l=[n,u,o,o,a,n][f],c=[a,n,n,u,o,o][f],h=[o,o,a,n,n,u][f];return{r:l*255,g:c*255,b:h*255}}function m(e,t,n,r){var i=[N(s(e).toString(16)),N(s(t).toString(16)),N(s(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function b(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function w(e,t){x(e)&&(e="100%");var n=T(e);return e=o(t,u(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),i.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function E(e){return o(1,u(0,e))}function S(e){return parseInt(e,16)}function x(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function T(e){return typeof e=="string"&&e.indexOf("%")!=-1}function N(e){return e.length==1?"0"+e:""+e}function C(e){return e<=1&&(e=e*100+"%"),e}function L(e){e=e.replace(t,"").replace(n,"").toLowerCase();var r=!1;if(g[e])e=g[e],r=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0};var i;return(i=k.rgb.exec(e))?{r:i[1],g:i[2],b:i[3]}:(i=k.rgba.exec(e))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=k.hsl.exec(e))?{h:i[1],s:i[2],l:i[3]}:(i=k.hsla.exec(e))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=k.hsv.exec(e))?{h:i[1],s:i[2],v:i[3]}:(i=k.hex6.exec(e))?{r:S(i[1]),g:S(i[2]),b:S(i[3]),format:r?"name":"hex"}:(i=k.hex3.exec(e))?{r:S(i[1]+""+i[1]),g:S(i[2]+""+i[2]),b:S(i[3]+""+i[3]),format:r?"name":"hex"}:!1}var t=/^[\s,#]+/,n=/\s+$/,r=0,i=Math,s=i.round,o=i.min,u=i.max,a=i.random;f.fromRatio=function(e,t){if(typeof e=="object"){var n={};for(var r in e)e.hasOwnProperty(r)&&(r==="a"?n[r]=e[r]:n[r]=C(e[r]));e=n}return f(e,t)},f.equals=function(e,t){return!e||!t?!1:f(e).toRgbString()==f(t).toRgbString()},f.random=function(){return f.fromRatio({r:a(),g:a(),b:a()})},f.desaturate=function(e,t){var n=f(e).toHsl();return n.s-=(t||10)/100,n.s=E(n.s),f(n)},f.saturate=function(e,t){var n=f(e).toHsl();return n.s+=(t||10)/100,n.s=E(n.s),f(n)},f.greyscale=function(e){return f.desaturate(e,100)},f.lighten=function(e,t){var n=f(e).toHsl();return n.l+=(t||10)/100,n.l=E(n.l),f(n)},f.darken=function(e,t){var n=f(e).toHsl();return n.l-=(t||10)/100,n.l=E(n.l),f(n)},f.complement=function(e){var t=f(e).toHsl();return t.h=(t.h+180)%360,f(t)},f.triad=function(e){var t=f(e).toHsl(),n=t.h;return[f(e),f({h:(n+120)%360,s:t.s,l:t.l}),f({h:(n+240)%360,s:t.s,l:t.l})]},f.tetrad=function(e){var t=f(e).toHsl(),n=t.h;return[f(e),f({h:(n+90)%360,s:t.s,l:t.l}),f({h:(n+180)%360,s:t.s,l:t.l}),f({h:(n+270)%360,s:t.s,l:t.l})]},f.splitcomplement=function(e){var t=f(e).toHsl(),n=t.h;return[f(e),f({h:(n+72)%360,s:t.s,l:t.l}),f({h:(n+216)%360,s:t.s,l:t.l})]},f.analogous=function(e,t,n){t=t||6,n=n||30;var r=f(e).toHsl(),i=360/n,s=[f(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,s.push(f(r));return s},f.monochromatic=function(e,t){t=t||6;var n=f(e).toHsv(),r=n.h,i=n.s,s=n.v,o=[],u=1/t;while(t--)o.push(f({h:r,s:i,v:s})),s=(s+u)%1;return o},f.readability=function(e,t){var n=f(e).toRgb(),r=f(t).toRgb(),i=(n.r*299+n.g*587+n.b*114)/1e3,s=(r.r*299+r.g*587+r.b*114)/1e3,o=Math.max(n.r,r.r)-Math.min(n.r,r.r)+Math.max(n.g,r.g)-Math.min(n.g,r.g)+Math.max(n.b,r.b)-Math.min(n.b,r.b);return{brightness:Math.abs(i-s),color:o}},f.readable=function(e,t){var n=f.readability(e,t);return n.brightness>125&&n.color>500},f.mostReadable=function(e,t){var n=null,r=0,i=!1;for(var s=0;s<t.length;s++){var o=f.readability(e,t[s]),u=o.brightness>125&&o.color>500,a=3*(o.brightness/125)+o.color/500;if(u&&!i||u&&i&&a>r||!u&&!i&&a>r)i=u,r=a,n=f(t[s])}return n};var g=f.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},y=f.hexNames=b(g),k=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();e.tinycolor=f}(this),t(function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()})}(window,jQuery),n("libs/spectrum",function(){}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("views/backbone-forms/color",["libs/backbone-forms","libs/spectrum"],function(e){return e.editors.Color=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.events={"change  input[type=color]":"onColorChange","change  input[type=text]":"onTextChange","keyup   input[type=text]":"onTextChange","keydown input[type=text]":"onTextChange",focus:"onFocus",blur:"onBlur"},n.prototype.onColorChange=function(){return this.setPickerColor(this.$colorInput().val())},n.prototype.onTextChange=function(){return this.color=this.$textInput().val(),this.$colorInput().val(this.color),this.trigger("change",this)},n.prototype.onFocus=function(){return this.trigger("focus",this)},n.prototype.onBlur=function(){return this.trigger("blur",this)},n.prototype.render=function(){var e;return e=this.$colorInput(),this.$el.html(e),e[0].type!=="color"&&this.$colorInput().spectrum({color:this.value,move:function(e){return function(t){return e.setPickerColor("#"+t.toHex())}}(this)}),this.$el.append(this.$textInput()),this.setValue(this.value),this},n.prototype.setPickerColor=function(e){return this.color=e,this.$textInput().val(this.color),this.trigger("change",this)},n.prototype.$colorInput=function(){return this._colorInput!=null?this._colorInput:this._colorInput=$('<input class="input-color-color" type="color"></input>')},n.prototype.$textInput=function(){return this._textInput!=null?this._textInput:this._textInput=$('<input class="input-color-text" type="text"></input>')},n.prototype.getValue=function(){return this.color},n.prototype.setValue=function(e){return this.color=e,this.$colorInput().val(this.color),this.$textInput().val(this.color)},n.prototype.focus=function(){if(!this.hasFocus)return this.$colorInput().focus()},n.prototype.blur=function(){if(this.hasFocus)return this.$colorInput().blur()},n}(e.editors.Base)})}.call(this),function(){n("libs/clayer",[],function(){var e={};return window.clayer=e,e.texts={drag:"drag"},e.makeCall=function(e,t,n){if(e[t])return e[t].apply(e,n)},e.setCss3=function(e,t,n,r){r=r||!1;var i=["","-ms-","-moz-","-webkit-","-o-"];for(var s=0;s<i.length;s++){var o=i[s]+t,u=(r?i[s]:"")+n;e.css(o,u)}},e.isTouch="ontouchstart"in document.documentElement,e.initBody=function(){e.isTouch?$("body").addClass("clayer-body-touch"):$("body").addClass("clayer-body-mouse")},e.Touchable=function(){return this.init.apply(this,arguments)},e.Touchable.prototype={init:function(e,t){this.$element=e,this.$document=$(e[0].ownerDocument),this.callbacks=t,this.mouseDown=$.proxy(this.mouseDown,this),this.mouseMove=$.proxy(this.mouseMove,this),this.mouseUp=$.proxy(this.mouseUp,this),this.touchStart=$.proxy(this.touchStart,this),this.touchMove=$.proxy(this.touchMove,this),this.touchEnd=$.proxy(this.touchEnd,this),this.hoverMove=$.proxy(this.hoverMove,this),this.hoverLeave=$.proxy(this.hoverLeave,this),this.documentEvents={mousemove:this.mouseMove,mouseup:this.mouseUp,touchmove:this.touchMove,touchend:this.touchEnd,touchcancel:this.touchEnd},this.setTouchable(!1),this.setHoverable(!1)},remove:function(){this.setTouchable(!1),this.setHoverable(!1)},setTouchable:function(e){if(this.isTouchable===e)return;this.isTouchable=e,this.touchEvent=null,e?this.$element.on({mousedown:this.mouseDown,touchstart:this.touchStart}):(this.$element.off("mousedown touchstart"),this.$document.off(this.documentEvents))},setHoverable:function(e){if(this.isHoverable===e)return;this.isHoverable=e,this.hoverEvent=null,e?this.$element.on({mousemove:this.hoverMove,mouseleave:this.hoverLeave}):this.$element.off({mousemove:this.hoverMove,mouseleave:this.hoverLeave})},mouseDown:function(t){return this.isTouchable&&(this.$document.on({mousemove:this.mouseMove,mouseup:this.mouseUp}),this.touchEvent=new e.PositionEvent(this.$element,t,t.timeStamp,!0),e.makeCall(this.callbacks,"touchDown",[this.touchEvent])),!1},mouseMove:function(t){return this.isTouchable&&this.touchEvent&&(this.touchEvent.move(t,t.timeStamp),e.makeCall(this.callbacks,"touchMove",[this.touchEvent])),!1},mouseUp:function(t){return this.isTouchable&&this.touchEvent&&(this.touchEvent.up(t,t.timeStamp),e.makeCall(this.callbacks,"touchUp",[this.touchEvent]),this.touchEvent=null),this.$document.off(this.documentEvents),!1},touchStart:function(t){return this.$element.off({mousedown:this.mouseDown,mousemove:this.hoverMove,mouseleave:this.hoverLeave}),!this.isTouchable||this.touchEvent||t.originalEvent.targetTouches.length>1?this.touchEnd(t):(this.$document.on({touchmove:this.touchMove,touchend:this.touchEnd,touchcancel:this.touchEnd}),this.touchEvent=new e.PositionEvent(this.$element,t.originalEvent.targetTouches[0],t.timeStamp,!1),e.makeCall(this.callbacks,"touchDown",[this.touchEvent])),!1},touchMove:function(t){if(this.isTouchable&&this.touchEvent){var n=this.findTouchEvent(t.originalEvent.touches);n===null?this.touchEnd(t):(this.touchEvent.move(n,t.timeStamp),e.makeCall(this.callbacks,"touchMove",[this.touchEvent]))}return!1},touchEnd:function(t){return this.isTouchable&&this.touchEvent&&(this.touchEvent.up(this.findTouchEvent(t.originalEvent.touches),t.timeStamp),e.makeCall(this.callbacks,"touchUp",[this.touchEvent]),this.touchEvent=null),this.$document.off(this.documentEvents),!1},hoverMove:function(t){return this.touchEvent?this.mouseMove(t):this.isHoverable&&(this.hoverEvent?this.hoverEvent.move(t,t.timeStamp):this.hoverEvent=new e.PositionEvent(this.$element,t,!0),e.makeCall(this.callbacks,"hoverMove",[this.hoverEvent])),!1},hoverLeave:function(t){return this.isHoverable&&this.hoverEvent&&(this.hoverEvent.move(t),e.makeCall(this.callbacks,"hoverLeave",[this.hoverEvent]),this.hoverEvent=null),!1},findTouchEvent:function(e){for(var t=0;t<e.length;t++)if(e[t].identifier===this.touchEvent.event.identifier)return e[t];return null}},e.PositionEvent=function(){return this.init.apply(this,arguments)},e.PositionEvent.prototype={init:function(e,t,n,r){this.$element=e,this.globalPoint={x:t.pageX,y:t.pageY},this.translation={x:0,y:0},this.deltaTranslation={x:0,y:0},this.localPoint={x:0,y:0},this.updateLocalPoint(),this.event=t,this.startTimestamp=this.timestamp=n,this.hasMoved=!1,this.wasTap=!1,this.mouse=r},getTimeSinceGoingDown:function(){return this.timestamp-this.startTimestamp},resetDeltaTranslation:function(){this.deltaTranslation.x=0,this.deltaTranslation.y=0},inElement:function(){return this.localPoint.x>=0&&this.localPoint.x<=this.$element.outerWidth()&&this.localPoint.y>=0&&this.localPoint.y<=this.$element.outerHeight()},move:function(e,t){this.event=e,this.timestamp=t,this.updatePositions()},up:function(e,t){this.event=e||this.event,this.timestamp=t,this.wasTap=!this.hasMoved&&this.getTimeSinceGoingDown()<300},updatePositions:function(){var e=this.event.pageX-this.globalPoint.x,t=this.event.pageY-this.globalPoint.y;this.translation.x+=e,this.translation.y+=t,this.deltaTranslation.x+=e,this.deltaTranslation.y+=t,this.globalPoint.x=this.event.pageX,this.globalPoint.y=this.event.pageY,this.updateLocalPoint(),this.translation.x*this.translation.x+this.translation.y*this.translation.y>200&&(this.hasMoved=!0)},updateLocalPoint:function(){var e=this.$element.offset();this.localPoint.x=this.globalPoint.x-e.left,this.localPoint.y=this.globalPoint.y-e.top}},e.Scrubbable=function(){return this.init.apply(this,arguments)},e.Scrubbable.prototype={init:function(t,n,r){this.$element=t,this.callbacks=n,this.options=r||{},this.touchable=new e.Touchable(t,this),this.setScrubbable(!0)},remove:function(){this.touchable.remove()},setScrubbable:function(e){this.touchable.setTouchable(e),this.options.disableHover?this.touchable.setHoverable(!1):this.touchable.setHoverable(e)},hoverMove:function(t){e.makeCall(this.callbacks,"scrubMove",[t.localPoint.x,t.localPoint.y,!1])},hoverLeave:function(t){e.makeCall(this.callbacks,"scrubLeave",[])},touchDown:function(e){this.touchMove(e)},touchMove:function(t){e.makeCall(this.callbacks,"scrubMove",[t.localPoint.x,t.localPoint.y,!0])},touchUp:function(t){!t.mouse||!t.inElement()?e.makeCall(this.callbacks,"scrubLeave",[]):this.hoverMove(t),t.wasTap&&e.makeCall(this.callbacks,"scrubTap",[t.localPoint.x,t.localPoint.y])}},e.Slider=function(){return this.init.apply(this,arguments)},e.Slider.prototype={init:function(t,n,r,i){this.$element=t,this.$element.addClass("clayer-slider"),this.callbacks=n,this.valueWidth=r||1,this.markerValue=0,this.knobValue=0,this.$container=$('<div class="clayer-slider-container"></div>'),this.$element.append(this.$container),this.$bar=$('<div class="clayer-slider-bar"></div>'),this.$container.append(this.$bar),this.$segmentContainer=$('<div class="clayer-slider-segment-container"></div>'),this.$bar.append(this.$segmentContainer),this.$marker=$('<div class="clayer-slider-marker"></div>'),this.markerWidth=Math.min(this.valueWidth,10),this.$marker.width(this.markerWidth),this.$bar.append(this.$marker),this.$knob=$('<div class="clayer-slider-knob"></div>'),this.$container.append(this.$knob),this.scrubbable=new e.Scrubbable(this.$element,this,i),this.bounceTimer=null,this.renderKnob(),this.renderMarker()},remove:function(){this.scrubbable.remove(),this.$segmentContainer.remove(),this.$marker.remove(),this.$knob.remove(),this.$bar.remove(),this.$container.remove()},setSegments:function(e){this.$segmentContainer.html("");for(var t=0;t<e.length;t++){var n=e[t],r=$('<div class="clayer-slider-segment"></div>');this.$segmentContainer.append(r),r.css("left",n.start*this.valueWidth),r.width((n.end-n.start+1)*this.valueWidth),r.css("background-color",n.color)}},setValue:function(e){this.markerValue=this.knobValue=e,this.renderKnob(),this.renderMarker()},setKnobValue:function(e){this.knobValue=e,this.renderKnob()},changed:function(t){e.makeCall(this.callbacks,"sliderChanged",[this.knobValue,t])},updateKnob:function(e){e=Math.max(0,Math.min(this.$element.width()-1,e)),this.updateKnobValue(Math.floor(e/this.valueWidth))},updateKnobValue:function(e){this.knobValue!==e&&(this.knobValue=e,this.renderKnob(),this.changed(!1))},updateMarker:function(e){e=Math.max(0,Math.min(this.$element.width()-1,e));var t=Math.floor(e/this.valueWidth);this.markerValue!==t&&(this.knobValue=this.markerValue=t,this.renderKnob(),this.renderMarker(),this.changed(!0))},renderKnob:function(){this.$knob.css("left",(this.knobValue+.5)*this.valueWidth)},renderMarker:function(){this.$marker.css("left",(this.markerValue+.5)*this.valueWidth-this.markerWidth/2)},scrubMove:function(e,t,n){this.$knob.addClass("clayer-active"),n?(this.$knob.addClass("clayer-pressed"),this.updateMarker(e)):(this.$knob.removeClass("clayer-pressed"),this.updateKnob(e))},scrubLeave:function(){this.$knob.removeClass("clayer-active clayer-pressed"),this.updateKnobValue(this.markerValue),e.makeCall(this.callbacks,"sliderLeave")},scrubTap:function(){this.$knob.removeClass("clayer-slider-knob-jump"),setTimeout($.proxy(this.startJump,this),0)},startJump:function(){this.$knob.addClass("clayer-slider-knob-jump")}},e.Draggable=function(){return this.init.apply(this,arguments)},e.Draggable.prototype={init:function(t,n,r){this.$element=t,this.callbacks=n,this.$parent=r,this.touchable=new e.Touchable(t,this),this.setDraggable(!0)},remove:function(){this.touchable.remove()},setDraggable:function(e){this.touchable.setTouchable(e),this.touchable.setHoverable(!1)},touchDown:function(t){this.offsetX=t.localPoint.x+parseInt(this.$element.css("margin-left"),10),this.offsetY=t.localPoint.y+parseInt(this.$element.css("margin-top"),10),e.makeCall(this.callbacks,"dragStart",[this.offsetX,this.offsetY])},touchMove:function(t){var n=t.globalPoint.x-this.offsetX,r=t.globalPoint.y-this.offsetY;if(this.$parent!==undefined){var i=this.$parent.offset();n=Math.max(0,Math.min(this.$parent.outerWidth(),n-i.left)),r=Math.max(0,Math.min(this.$parent.outerHeight(),r-i.top)),this.$element.css("left",n),this.$element.css("top",r),e.makeCall(this.callbacks,"dragMove",[n,r,t.globalPoint.x,t.globalPoint.y])}else e.makeCall(this.callbacks,"dragMove",[n,r,t.globalPoint.x,t.globalPoint.y])},touchUp:function(t){e.makeCall(this.callbacks,"dragEnd"),t.wasTap&&e.makeCall(this.callbacks,"dragTap",[t.localPoint.x,t.localPoint.y])}},e.DragKnob=function(){return this.init.apply(this,arguments)},e.DragKnob.prototype={init:function(t,n,r){this.$element=t,this.$element.addClass("clayer-dragknob"),this.$element.append('<div class="clayer-dragknob-label">'+e.texts.drag+"</div>"),this.$parent=r,this.$parent!==undefined&&this.$parent.addClass("clayer-dragknob-parent"),this.callbacks=n,this.draggable=new e.Draggable(t,this,r)},remove:function(){this.draggable.remove(),this.$element.removeClass("clayer-dragknob"),this.$parent!==undefined&&this.$parent.addClass("clayer-dragknob-parent")},dragStart:function(){this.$element.addClass("clayer-pressed"),this.$element.removeClass("clayer-dragknob-show-label"),e.makeCall(this.callbacks,"dragStart")},dragMove:function(t,n){e.makeCall(this.callbacks,"dragMove",arguments)},dragEnd:function(){this.$element.removeClass("clayer-pressed"),e.makeCall(this.callbacks,"dragEnd")},dragTap:function(){this.$element.addClass("clayer-dragknob-show-label"),e.makeCall(this.callbacks,"dragTap")}},e})}(),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("views/backbone-forms/range",["jquery","libs/backbone-forms","libs/clayer"],function(e,n,r){return n.editors.Range=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.width=210,i.prototype.initialize=function(e){return i.__super__.initialize.call(this,e),this.min=this.schema.min||0,this.max=this.schema.max||100,this.step=this.schema.step||1},i.prototype.render=function(){var t;return this.$el.width(this.width),t=(this.max-this.min)/this.step+1,this.slider=new r.Slider(this.$el,this,this.width/t,{disableHover:!0}),this.$knob=e('<div class="clayer-slider-knob-value"></div>'),this.$(".clayer-slider-knob").append(this.$knob),this.setValue(this.value||0),this},i.prototype.sliderChanged=function(e){var t,n;return t=this._decimalPlaces(),n=Number((e*this.step+this.min).toFixed(t)),this.sliderValue=this._clamp(n),this.updateKnob(),this.trigger("change",this)},i.prototype._decimalPlaces=function(){var e;return e=(""+this.step).split(".")[1]||"",e.length},i.prototype._clamp=function(e){return Math.min(this.max,Math.max(this.min,e))},i.prototype.getValue=function(){return this.sliderValue},i.prototype.setValue=function(e){return this.sliderValue=e,this.slider.setValue((e-this.min)/this.step),this.updateKnob()},i.prototype.updateKnob=function(){return this.$knob.text(this.sliderValue)},i.prototype.focus=function(){this.hasFocus},i.prototype.blur=function(){!this.hasFocus},i}(n.editors.Base)})}.call(this),function(e){e.autocomplete=function(t,n,r){var i={url:!1,apply:function(e){o.val(e)}},s=this;s.settings={};var o=e(t),t=t;s.init=function(){s.settings=e.extend({},i,r),s.input=o,s.ignore=[],s.data={},s.open=!1,s.load(),s.blocker=e('<div class="autocomplete-blocker"></div>').css({position:"fixed",top:0,left:0,right:0,bottom:0,"z-index":1999}).hide(),s.box=e('<div class="autocomplete"></div>').css("z-index",2e3),s.tooltip=e('<div class="versal-tooltip versal-tooltip-white versal-tooltip-top versal-tooltip-align-left versal-tooltip-offset"><div class="versal-tooltip-arrow"></div></div>'),s.box.append(s.tooltip),s.ul=e("<ul></ul>"),s.tooltip.hide(),s.blocker.click(function(e){s.kill(),s.input.focus(),e.stopPropagation()}),o.keyup(function(t){s.pos=s.selection();switch(t.keyCode){case 13:s.apply();case 27:s.kill();case 38:case 40:return!1;case 39:var n=s.value();n.length>0&&s.pos==s.input.val().length&&s.apply();break;case 188:s.apply();default:s.complete(e(this).val())}}),o.keydown(function(e){s.pos=s.selection();switch(e.keyCode){case 9:return s.value().length>0?(s.apply(),!1):!0;case 38:return s.prev(),!1;case 40:return s.next(),!1}}),s.box.click(function(e){e.stopPropagation()}),e("body").append(s.box),e("body").append(s.blocker),e(window).resize(s.position),s.position()},s.load=function(){typeof n=="object"?s.data=n:e.getJSON(n,function(e){s.data=e})},s.complete=function(t){s.kill(),s.position();var n=0,t=e.trim(t);if(t.length==0)return!1;var r=new RegExp("^"+t,"i"),i=s.data.filter(function(e){if(s.ignore.indexOf(e)==-1&&e.match(r))return e});i=i.slice(0,5),e.each(i,function(r,i){var o='<span class="autocomplete-highlight">'+i.substring(0,t.length)+"</span>"+i.substring(t.length),u=e("<li>"+o+"</li>");u.click(function(){s.apply(i)}),u.mouseover(function(){s.ul.find(".selected").removeClass("selected"),u.addClass("over")}),u.mouseout(function(){u.removeClass("over")}),s.ul.append(u),n==0&&u.addClass("first selected"),n++}),n>0&&(s.tooltip.append(s.ul),s.tooltip.show(),s.blocker.show(),s.open=!0)},s.kill=function(){s.blocker.hide(),s.ul.empty(),s.tooltip.hide(),s.open=!1},s.apply=function(e){if(!e)var e=s.value();s.settings.apply.call(s,e)},s.value=function(){return s.selected().text()},s.selected=function(){return s.ul.find(".selected")},s.select=function(e){s.deselect(),e.addClass("selected")},s.deselect=function(){s.selected().removeClass("selected")},s.prev=function(){var e=s.selected(),t=e.prev();t.length>0&&s.select(t)},s.next=function(){var e=s.selected(),t=e.length>0?e.next():s.ul.find("li:first-child");t.length>0&&s.select(t)},s.selection=function(){var e=s.input[0],t=s.val;if(!e.createTextRange)return e.selectionStart;var n=document.selection.createRange().duplicate();return n.moveEnd("character",t.length),n.text==""?t.length:t.lastIndexOf(n.text)},s.position=function(){var e=o.offset(),t=o.innerHeight();e.top=e.top+t,s.box.css(e)},s.init()},e.fn.autocomplete=function(t,n){return this.each(function(){if(undefined==e(this).data("autocomplete")){var r=new e.autocomplete(this,t,n);e(this).data("autocomplete",r)}})}}(jQuery),function(e){e.tagbox=function(t,n){var r={url:!1,autocomplete:{},lowercase:!0,classname:"tagbox",separator:", ",duplicates:!1,minLength:1,maxLength:140,keydown:function(){},onAdd:function(){},onRemove:function(){},onDuplicate:function(){return i.input.focus()},onInvalid:function(){return i.input.focus()},onReady:function(){}},i=this,s=null;i.settings={};var o=e(t),t=t;i.init=function(){i.settings=e.extend({},r,n);var t=o.attr("name"),s=o.attr("id"),u=o.val();i.index=[],i.val="",i.focused=!1,i.origin=o.addClass("tagboxified").hide(),i.box=e('<div class="'+i.settings.classname+'"><ul><li class="new"><input autocomplete="off" tabindex="0" type="text" /></li></ul></div>'),i.input=i.box.find("input").css("width",20),i.bhits=0,i.lhits=0;if(i.settings.url){var a={apply:function(e){i.add(e),this.kill(),i.input.focus()}};i.input.autocomplete(i.settings.url,e.extend({},a,i.settings.autocomplete)),i.autocomplete=i.input.data("autocomplete"),i.settings.onAdd=function(e){i.autocomplete.ignore=i.serialize()},i.settings.onRemove=function(e){i.autocomplete.ignore=i.serialize()}}i.origin.before(i.box),i.measure=e('<div style="display: inline" />').css({"font-size":i.input.css("font-size"),"font-family":i.input.css("font-family"),visibility:"hidden",position:"absolute",top:-1e4,left:-1e4}),e("body").append(i.measure),i.box.click(function(e){i.focus(),i.input.focus(),e.stopPropagation()}),i.input.keydown(function(e){i.val=i.input.val(),i.position=i.selection(),i.settings.keydown.call(i,e,i.val)}),i.input.keyup(function(e){i.val=i.input.val(),i.position=i.selection(),i.resize(i.val),i.val.match(new RegExp(i.settings.separator))&&i.add(i.val)}),i.input.focus(function(e){i.input.focused=!0,i.deselect(),i.bhits=0,i.focus()}),i.input.blur(function(e){i.input.focused=!1,i.bhits=0,i.val.length==0&&i.blur()}),i.settings.onReady.call(this),e(document).keydown(function(e){if(!i.focused)return!0;switch(e.keyCode){case 8:if(!i.input.focused)return i.remove(),!1;if(i.val.length==0)return i.next(),!1;if(i.position==0){if(i.bhits>0)return i.bhits=0,i.next(),!1;i.bhits++}break;case 37:if(!i.input.focused)return i.previous();if(i.val.length==0)return i.next(),!1;if(i.position==0){if(i.lhits>0)return i.lhits=0,i.next(),!1;i.lhits++}break;case 39:if(!i.input.focused)return i.next(),!1;break;case 9:if(i.input.focused&&i.val.length>i.settings.minLength)return i.add(i.val),!1;if(i.selected().length>0)return i.deselect(),i.input.focus(),!1;break;case 13:case 188:if(i.input.focused)return i.settings.autocomplete||i.add(i.val),!1}}).click(function(e){i.val.length>0&&i.add(i.val)}),u.length>0&&i.add(u)},i.resize=function(e){i.measure.text(e),i.input.css("width",i.measure.width()+20)},i.focus=function(t){if(i.focused)return!0;e(".tagboxified").not(i.origin).each(function(){e(this).data("tagbox")&&e(this).data("tagbox").blur()}),i.box.addClass("focus"),i.focused=!0;if(t==undefined)var t=!0;t!==!1&&i.input.focus()},i.blur=function(){if(!i.focused)return!0;i.box.removeClass("focus"),i.focused=!1,i.input.blur(),i.deselect()},i.tag=function(t){return t=t.replace(/,/g,"").replace(/;/g,""),i.settings.lowercase&&(t=t.toLowerCase()),e.trim(t)},i.serialize=function(){return i.index},i.string=function(){return i.serialize().toString()},i.add=function(t){i.input.val("");if(!t&&i.val.length>0)return i.add(i.val);if(!t)return!0;if(e.isArray(t)||t.match(new RegExp(i.settings.separator))){var n=e.isArray(t)?t:t.split(i.settings.separator);return e.each(n,function(e,t){i.add(t)}),!0}var t=i.tag(t);if(t.length<i.settings.minLength||t.length>i.settings.maxLength)return i.settings.onInvalid.call(i,t,length);if(i.settings.duplicates==0&&e.inArray(t,i.index)>-1)return i.settings.onDuplicate.call(i,t);i.index.push(t);var r=e('<li><span class="tag"></span><span class="delete">&#215;</span></li>').data("tag",t);r.find(".tag").text(t),r.find(".delete").click(function(){i.remove(r)}),r.click(function(e){i.blur(),e.stopPropagation(),i.select(r)}),r.focus(function(e){i.select(r)}),i.input.parent().before(r),i.input.val(""),i.input.css("width",20);var s=i.serialize();i.origin.val(s.join(i.settings.separator)),i.settings.onAdd.call(i,t,s,r)},i.select=function(e){if(typeof e=="string"){var e=i.find(e);if(!e)return!1}if(e.length==0)return!1;i.input.blur(),this.deselect(),e.addClass("selected"),i.focus(!1)},i.selected=function(){return i.box.find(".selected")},i.deselect=function(){var e=i.selected();e.removeClass("selected")},i.find=function(t){var n=!1;return i.box.find("li").not(".new").each(function(){e(this).data("tag")==t&&(n=e(this))}),n},i.remove=function(e){i.input.val("");if(typeof e=="string"){var e=i.find(e);if(!e)return!1}var t=i.selected();if(!e&&t.length>0)var e=t.first();var n=i.previous(!0);n.length==0?i.next():i.select(n);var r=e.find(".tag").text();i.removeFromIndex(r),e.remove();var s=i.serialize();i.origin.val(s),i.settings.onRemove.call(i,r,s,e)},i.removeFromIndex=function(e){var t=i.index.indexOf(e);i.index.splice(t,1)},i.selection=function(){var e=i.input[0],t=i.val;if(!e.createTextRange)return e.selectionStart;var n=document.selection.createRange().duplicate();return n.moveEnd("character",t.length),n.text==""?t.length:t.lastIndexOf(n.text)},i.previous=function(e){var t=i.selected(),n=t.length==0?i.box.find("li").not(".new").first():t.prev().not(".new");return e?n:i.select(n)},i.next=function(e){var t=i.selected(),n=t.length==0?i.box.find("li").not(".new").last():t.next();return e?n:n.hasClass("new")?i.input.focus():i.select(n)},i.init()},e.fn.tagbox=function(t){return this.each(function(){if(undefined==e(this).data("tagbox")){var n=new e.tagbox(this,t);e(this).data("tagbox",n)}})}}(jQuery),n("libs/tags",function(){}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("views/backbone-forms/tags",["underscore","libs/backbone-forms","libs/tags"],function(e,n,r){return n.editors.Tags=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.width=210,r.prototype.tagName="input",r.prototype.initialize=function(e){return r.__super__.initialize.call(this,e),this.tagboxValue=this.value||[]},r.prototype.render=function(){return e.defer(function(e){return function(){return e.renderTagbox()}}(this)),this},r.prototype.renderTagbox=function(){var e,t,n,r,i,s,o;return this.tagboxOptions=(n=this.schema.options)!=null?n:[],this.$el.tagbox({url:this.tagboxOptions,lowercase:(r=this.schema.lowercase)!=null?r:!0,duplicates:(i=this.schema.duplicates)!=null?i:!1,minLength:(s=this.schema.minLength)!=null?s:1,maxLength:(o=this.schema.maxLength)!=null?o:140}),this.tagbox=this.$el.data("tagbox"),e=this.tagbox.settings.onAdd,this.tagbox.settings.onAdd=function(t){return function(){e();if(t.updating)return;return t.onChange(),t.updateTagboxOptions()}}(this),t=this.tagbox.settings.onRemove,this.tagbox.settings.onRemove=function(e){return function(){t();if(e.updating)return;return e.onChange()}}(this),this.updateTagbox()},r.prototype.getValue=function(){return this.tagbox!=null&&(this.tagboxValue=this.tagbox.serialize().slice(0)),this.tagboxValue||[]},r.prototype.setValue=function(t){if(!e.isArray(t))return;if(e.isEqual(t,this.tagboxValue))return;return this.tagboxValue=t,this.updateTagbox()},r.prototype.updateTagbox=function(){var e,t,n,r;if(this.tagbox==null)return;this.updating=!0,this.clearValue(),r=this.tagboxValue;for(t=0,n=r.length;t<n;t++)e=r[t],this.tagbox.add(""+e);return this.updating=!1,this.updateTagboxOptions()},r.prototype.clearValue=function(){var e,t;t=[];while(((e=this.tagbox.serialize())!=null?e.length:void 0)>0)t.push(this.tagbox.remove(0));return t},r.prototype.onChange=function(){return this.trigger("change",this)},r.prototype.updateTagboxOptions=function(){var t,n,r,i,s;if(!this.schema.updateAutoComplete)return;i=e.difference(this.tagbox.serialize(),this.tagboxOptions),s=[];for(n=0,r=i.length;n<r;n++)t=i[n],s.push(this.tagboxOptions.push(t));return s},r}(n.editors.Base)})}.call(this),function(e,r){typeof exports=="object"?module.exports=r(t("backbone"),t("react"),t("underscore")):typeof n=="function"&&n.amd?n("react-backbone",["backbone","react","underscore"],r):e.amdWeb=r(e.Backbone,e.React,e._)}(this,function(e,t,n){var r={changeOptions:"add remove reset sort",updateScheduler:function(e){return n.debounce(e,0)}},i={changeOptions:"change",updateScheduler:n.identity},s=function(t,n,s){if(!n)return;var o=n instanceof e.Collection?r:i,u=o.updateScheduler(function(){t.isMounted()&&(t.onModelChange||t.forceUpdate).call(t)}),a=s||t.changeOptions||o.changeOptions;n.on(a,u,t)},o=function(e,t){if(!t)return;t.off(null,null,e)};return t.BackboneMixin=function(e,t){var n,r;return typeof e=="object"?(t=e.renderOn,n=e.propName,r=e.modelOrCollection):n=e,r||(r=function(e){return e[n]}),{componentDidMount:function(){s(this,r(this.props),t)},componentWillReceiveProps:function(e){if(r(this.props)===r(e))return;o(this,r(this.props)),s(this,r(e),t),typeof this.componentWillChangeModel=="function"&&this.componentWillChangeModel()},componentDidUpdate:function(e,t){if(r(this.props)===r(e))return;typeof this.componentDidChangeModel=="function"&&this.componentDidChangeModel()},componentWillUnmount:function(){o(this,r(this.props))}}},t.BackboneViewMixin={getModel:function(){return this.props.model},model:function(){return this.getModel()},getCollection:function(){return this.props.collection},collection:function(){return this.getCollection()},el:function(){return this.isMounted()&&this.getDOMNode()}},t.createBackboneClass=function(e){var n=e.mixins||[];return e.mixins=n.concat([t.BackboneMixin("model"),t.BackboneMixin("collection"),t.BackboneViewMixin]),t.createClass(e)},t}),function(){var e=[].slice;n("views/property_sheet",["underscore","react","views/tether","libs/backbone-forms","plugins/backbone-forms.bootstrap","views/backbone-forms/color","views/backbone-forms/range","views/backbone-forms/tags","react-coffeescript-glue","react-backbone"],function(t,n,r,i){var s,o,u,a;return s=n.createClass({componentDidMount:function(){return this.renderForm()},componentDidUpdate:function(){return this.renderForm()},componentWillUnmount:function(){return this.removeForm()},shouldComponentUpdate:function(n){var r,i;return t.isEqual(this.form.schema,n.schema)?(r=t.pick.apply(t,[this.form.getValue()].concat(e.call(Object.keys(n.config)))),i=t.pick.apply(t,[n.config].concat(e.call(Object.keys(n.schema)))),t.isEqual(r,i)?!1:!0):!0},render:function(){return _div([])},renderForm:function(){var e;return this.removeForm(),this.form=new i({data:this.props.config,schema:this.props.schema}),e=this.form.validate(),this.form.render(),this.getDOMNode().appendChild(this.form.el),this.form.on("change",this.onFormChange,this),this.form.el.addEventListener("submit",function(e){return e.preventDefault()}),this.form.el.addEventListener("change",this.onFormChange),this.props.onErrorCountChange(t.size(e))},removeForm:function(){if(this.form==null)return;return this.getDOMNode().removeChild(this.form.el),this.form.off(null,null,this),this.form=null},onFormChange:function(){return this.form.validate(),this.props.onConfigChange(this.form.getValue())}}),u=n.createClass({getInitialState:function(){return{errorCount:0}},render:function(){return t(this.props.schema).isEmpty()?_div([{style:{display:"none"}}]):_div(["properties-dialog",{onClick:function(e){return e.stopPropagation()}}],_div(["properties-dialog-arrow"]),_div(["properties-dialog-header"],"Properties",this.state.errorCount>0?_div(["properties-dialog-error-count"],this.state.errorCount,"error",this.state.errorCount!==1?"s":void 0):void 0),s({config:this.props.config,schema:this.props.schema,onErrorCountChange:function(e){return function(t){return e.setState({errorCount:t})}}(this),onConfigChange:this.props.onConfigChange}))}}),a=n.createClass({render:function(){return r({attachment:"top right",targetAttachment:"middle left",zIndex:900,offset:"22px 0",constraints:[{pin:["top","bottom"],to:"window"},{pin:["left"],to:"window",attachment:"together"}]},u(this.props))}}),o=n.createClass({mixins:[n.BackboneMixin("config"),n.BackboneMixin("schema")],render:function(){return a({config:this.props.config.toJSON(),schema:this.props.schema.sanitizedSchema(),onConfigChange:function(e){return function(t){return e.props.config.save(t)}}(this)})}})})}.call(this),function(){n("views/gadget_draggable",["react","views/gadget/drag_image","views/render_in_body","react-coffeescript-glue"],function(e,t,n){var r;return r=e.createClass({getInitialState:function(){return{setDragImage:null,renderCustomDragImage:!1,customDragImageX:null,customDragImageY:null}},_onDragStart:function(e){var t;return t=e.nativeEvent.dataTransfer,t!=null&&(t.effectAllowed="move"),t!=null&&t.setData("Text",JSON.stringify(this.props.dragData)),(t!=null?t.setDragImage:void 0)!=null?(this.setState({setDragImage:t.setDragImage.bind(t)}),setTimeout(this.props.onDragStart,100)):(this.props.onDragStart(),this.setState({renderCustomDragImage:!0}))},_onDragEnd:function(){return this.setState(this.getInitialState()),this.props.onDragEnd()},_onDrag:function(e){return this.setState({customDragImageX:e.clientX,customDragImageY:e.clientY})},render:function(){return _div(["spec-gadget-draggable",{draggable:!0,onDragStart:this._onDragStart,onDragEnd:this._onDragEnd,onDrag:this._onDrag}],this.state.renderCustomDragImage?void 0:this.props.children,this.state.setDragImage!=null?n(null,t({className:"gadget-drag-image-dragging",manifest:this.props.gadgetManifest,ref:"dragImage"})):this.state.renderCustomDragImage?n(null,e.DOM.div({style:{position:"fixed",top:this.state.customDragImageY-30,left:this.state.customDragImageX-30,zIndex:3100,opacity:.5,pointerEvents:"none"}},t({className:"gadget-drag-image-dragging",manifest:this.props.gadgetManifest}))):void 0)},componentDidUpdate:function(){if(this.state.setDragImage!=null)return this.state.setDragImage(this.refs.dragImage.getDOMNode(),30,30),_.defer(function(e){return function(){return e.setState({setDragImage:null})}}(this))}})})}.call(this),function(){n("views/gadget_toolbar",["react","models/settings","views/tether","views/gadget/drag_image","views/property_sheet","views/gadget_draggable","react-coffeescript-glue"],function(e,t,n,r,i,s){var o;return o=e.createClass({propTypes:{selected:e.PropTypes.bool,editing:e.PropTypes.bool,showSelectButton:e.PropTypes.bool,showEditButton:e.PropTypes.bool,showDeleteButton:e.PropTypes.bool,gadgetId:e.PropTypes.string,gadgetCid:e.PropTypes.string,config:e.PropTypes.object,schema:e.PropTypes.object,gadgetManifest:e.PropTypes.object,onDragStart:e.PropTypes.func,onDragEnd:e.PropTypes.func,onEditClick:e.PropTypes.func,onDeleteClick:e.PropTypes.func,onSelectedChange:e.PropTypes.func},getDefaultProps:function(){return{selected:!1,showSelectButton:!1,showEditButton:!1,showDeleteButton:!1}},getInitialState:function(){return{showingInfo:!1,dragging:!1}},render:function(){return _div(["gadget-toolbar",{onClick:function(e){return e.stopPropagation()}}],this.props.showSelectButton?_i(["js-select-gadget gadget-toolbar-icon",this.props.selected?"icon-check":"icon-check-empty",{onClick:function(e){return function(){return e.props.onSelectedChange(!e.props.selected)}}(this)}]):void 0,_div([{style:{display:this.props.selected?"none":"block"}}],s({gadgetManifest:this.props.gadgetManifest,dragData:{action:"reorder",gadgetId:this.props.gadgetId,gadgetCid:this.props.gadgetCid},onDragStart:function(e){return function(){return e.setState({dragging:!0}),e.props.onDragStart()}}(this),onDragEnd:function(e){return function(){return e.setState({dragging:!1}),e.props.onDragEnd()}}(this)},_i(["gadget-toolbar-icon gadget-toolbar-drag icon-reorder spec-toolbar-drag-icon"])),_i(["gadget-toolbar-icon gadget-toolbar-info icon-info",{onMouseEnter:function(e){return function(){return e.setState({showingInfo:!0})}}(this),onMouseLeave:function(e){return function(){return e.setState({showingInfo:!1})}}(this)}],this.state.showingInfo&&!this.state.dragging?n({attachment:"top right",targetAttachment:"top left",offset:"5px 0",zIndex:901,constraints:[{pin:["left"],to:"window",attachment:"together"}]},_div(["gadget-info-tooltip"],r({manifest:this.props.gadgetManifest}))):void 0),this.props.showEditButton?_i(["gadget-toolbar-icon gadget-toolbar-edit icon-cog spec-toolbar-edit-icon",this.props.editing?"gadget-toolbar-edit-editing":void 0,{onClick:this.props.onEditClick}],this.props.editing&&!this.state.dragging?i({config:this.props.config,schema:this.props.propertySheetSchema}):void 0):void 0,this.props.showDeleteButton?_i(["gadget-toolbar-icon gadget-toolbar-delete icon-trash spec-toolbar-trash-icon",{onClick:this.props.onDeleteClick}]):void 0))}})})}.call(this),function(){n("views/marionette_view_component",["marionette","react","react-coffeescript-glue"],function(e,t){var n;return n=t.createClass({componentDidMount:function(){return this._region=new e.Region({el:this.getDOMNode()}),this._region.show(this.props.view)},componentDidUpdate:function(){return this._region.show(this.props.view)},componentWillUnmount:function(){return this._region.close()},render:function(){return _div([])}})})}.call(this),function(){n("views/gadget_lock",["views/marionette_view_component","collab/collab","react"],function(e,t,n){var r;return r=n.createClass({render:function(){return e({view:t.lockViewForGadgetId(this.props.gadgetInstanceId)})}})})}.call(this),function(){n("views/gadget_comments",["views/marionette_view_component","collab/collab","react"],function(e,t,n){var r;return r=n.createClass({render:function(){return e({view:t.commentsViewForGadgetId(this.props.gadgetInstanceId)})}})})}.call(this),function(){n("views/gadget_dialog",["react","react-coffeescript-glue"],function(e){var t;return t=e.createClass({render:function(){return _div(["gadget-dialog"],_div(["gadget-dialog-vertical-align"],_div(["gadget-dialog-message"],this.props.message),_div([],this.props.children)))}})})}.call(this),function(){n("launchers/react_launcher",["underscore","react"],function(e,t){var n;return n=t.createClass({propTypes:{manifest:t.PropTypes.object.isRequired,environment:t.PropTypes.object.isRequired,attributes:t.PropTypes.object,learnerState:t.PropTypes.object,isEditable:t.PropTypes.bool,launcherCtor:t.PropTypes.func,patchProps:t.PropTypes.func,patchLearnerState:t.PropTypes.func,legacyRequestAsset:t.PropTypes.func,launch:t.PropTypes.func,autoLaunch:t.PropTypes.bool},getDefaultProps:function(){return{isEditable:!1}},render:function(){return this.props.launcherCtor?t.DOM.div({onClick:function(e){return function(e){return e.nativeEvent.stopImmediatePropagation()}}(this)},t.createElement(this.props.launcherCtor,this.launcherProps())):this.props.autoLaunch?t.DOM.div(null,"Loading..."):t.DOM.div(null,t.DOM.a({onClick:this.props.launch},"launch"))},componentDidMount:function(){var e;if(this.props.autoLaunch)return typeof (e=this.props).launch=="function"?e.launch():void 0},launcherProps:function(){return e.extend({},this.props.attributes,{gadget:this.gadgetInterface()})},gadgetInterface:function(){return e.extend({},e.pick(this.props,"isEditable","patchProps","patchLearnerState"),this.props.environment,{baseUrl:this.props.manifest.baseUrl})}})})}.call(this),function(){n("launchers/iframe_launcher",["underscore","react"],function(e,t){var n,r;return r=function(e){var t,n,r,i,s,o;i=/\/gadgets\/(.*?)\/(.*?)\/(.*?)\/?$/,n=e.match(i);if(n)return t=n[0],s=n[1],r=n[2],o=n[3],["gadget",s,r,o.replace(/\./g,"_")].join("-")},n=t.createClass({propTypes:{manifest:t.PropTypes.object.isRequired,environment:t.PropTypes.object.isRequired,attributes:t.PropTypes.object,learnerState:t.PropTypes.object,isEditable:t.PropTypes.bool,patchProps:t.PropTypes.func,patchLearnerState:t.PropTypes.func,legacyTrack:t.PropTypes.func,legacyChangeBlocking:t.PropTypes.func,legacySetPropertySheetAttributes:t.PropTypes.func,legacyEditingAllowed:t.PropTypes.bool,legacyRequestAsset:t.PropTypes.func},iframeStyle:{display:"block",border:"none",width:"100%",height:1},getDefaultProps:function(){return{isEditable:!1,attributes:{},learnerState:{},patchProps:function(e){return function(e){return console.warn("Your attributes patch is ignored. No one is listening.",e)}}(this),patchLearnerState:function(e){return function(e){return console.warn("Your learner state patch is ignored. No one is listening.",e)}}(this)}},render:function(){return t.DOM.iframe({ref:"gadgetIframe",src:this.src(),style:this.iframeStyle,allowFullScreen:"allowfullscreen",scrolling:"no",sandbox:"allow-same-origin allow-scripts allow-forms"})},src:function(){return this.props.launchUrl||this.props.manifest.launchUrl},environment:function(){return this.props.manifest.launcher==="iframe"?this.props.environment:e.extend({},this.props.environment,{baseUrl:this.props.manifest.baseUrl,cssClassName:r(this.props.manifest.baseUrl)})},componentDidMount:function(){return window.addEventListener("message",this._handleMessage)},componentWillUnmount:function(){return window.removeEventListener("message",this._handleMessage)},shouldComponentUpdate:function(e,t){return e.isEditable!==this.props.isEditable&&this.postMessage({event:"editableChanged",data:{editable:e.isEditable}}),e.attributes!==this.props.attributes&&this.postMessage({event:"attributesChanged",data:e.attributes||{}}),e.learnerState!==this.props.learnerState&&this.postMessage({event:"learnerStateChanged",data:e.learnerState||{}}),!1},_iframeDOMNode:function(){return this.refs.gadgetIframe.getDOMNode()},_handleMessage:function(e){var t,n;if(e.source!==((n=this._iframeDOMNode())!=null?n.contentWindow:void 0)||!e.data)return;return t=e.data,t.event==="startListening"?this._startListening():t.event==="setHeight"?this._setHeight(t.data.pixels):t.event==="setAttributes"?this.props.patchProps(t.data):t.event==="setLearnerState"?this.props.patchLearnerState(t.data):t.event==="setPropertySheetAttributes"?this.props.legacySetPropertySheetAttributes(t.data):t.event==="track"?this.props.legacyTrack(t.data):t.event==="changeBlocking"?this.props.legacyChangeBlocking(t.data):t.event==="requestAsset"?this.props.legacyRequestAsset(t.data):console.warn("Exotic API:",t.event)},_startListening:function(){return this.postMessage({event:"environmentChanged",data:this.environment()}),this.postMessage({event:"attributesChanged",data:this.props.attributes}),this.postMessage({event:"learnerStateChanged",data:this.props.learnerState}),this.postMessage({event:"editableChanged",data:{editable:this.props.isEditable}})},_setHeight:function(e){return this._iframeDOMNode().style.height=e+"px"},postMessage:function(e){var t,n;return(t=this._iframeDOMNode())!=null?(n=t.contentWindow)!=null?n.postMessage(e,"*"):void 0:void 0}})})}.call(this),function(){n("launchers/native_launcher",["underscore","react"],function(e,t){var n,r,i,s;return i=t.createClass({propTypes:{manifest:t.PropTypes.object.isRequired,attributes:t.PropTypes.object},getDefaultProps:function(){return{manifest:{},attributes:{}}},render:function(){var e,n,i,o;return e=((i=this.props.attributes)!=null?i.content:void 0)||"",n=(o=this.props.manifest)!=null?o.name:void 0,n==="text"||n==="markdown"?t.createElement(s,this.props.attributes):n==="header"?t.createElement(r,{content:e}):t.DOM.div(null,"Unknown gadget:",n)}}),s=t.createClass({render:function(){return t.DOM.div({className:"native-text",dangerouslySetInnerHTML:{__html:this.htmlContent()}})},htmlContent:function(){var e;return this.props.htmlData||this.props.cachedHtml||this.props.html||((e=this.props.content)!=null?e:{"<p>${this.props.content}</p>":null})||""}}),r=t.createClass({render:function(){return t.DOM.div({className:"js-sticky-header",style:n},this.props.content)}}),n={fontSize:18,height:37,lineHeight:"37px",fontWeight:"bold",fontFamily:"AvenirNextLTPro-Regular",color:"#524e47",whiteSpace:"nowrap",overflow:"hidden"},i})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,r=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};n("views/gadget/instance",["jquery","underscore","marionette","react","mediator","collab/collab","plugins/tracker","views/gadget/drag_image","models/property_sheet_schema","state/position","state/selection","templates/gadget_instance","tether","models/settings","player_palette","views/react_view","views/render_in_body","views/gadget_toolbar","views/gadget_lock","views/gadget_comments","views/gadget_dialog","launchers/react_launcher","launchers/iframe_launcher","launchers/native_launcher","react-coffeescript-glue"],function(t,n,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N){var C,k;return C=1e4,k=function(i){function u(){return this._onGadgetSeen=e(this._onGadgetSeen,this),this._handleError=e(this._handleError,this),this._onSelectedChange=e(this._onSelectedChange,this),this._scrollIntoViewIfNeeded=e(this._scrollIntoViewIfNeeded,this),this._gadgetDropped=e(this._gadgetDropped,this),this.prevent=e(this.prevent,this),this.stopEditing=e(this.stopEditing,this),this._onSelectionClear=e(this._onSelectionClear,this),this._onGadgetUnlocked=e(this._onGadgetUnlocked,this),this._onGadgetLocked=e(this._onGadgetLocked,this),this._saveUserState=e(this._saveUserState,this),this._saveConfig=e(this._saveConfig,this),this._patchLearnerState=e(this._patchLearnerState,this),this._patchProps=e(this._patchProps,this),u.__super__.constructor.apply(this,arguments)}return r(u,i),u.prototype.template=n.template(p),u.prototype.className="gadget js-gadget",u.prototype.regions={commentsRegion:".toolbar-right",leftBarRegion:".js-left-bar-region",dialogRegion:".js-dialog-region"},u.prototype.events={"click .gadgetContent":"onContentClick","click .js-placeholder":"onPlaceholderClick","click .toolbar-right":"prevent"},u.prototype.modelEvents={destroy:"onModelDestroy"},u.prototype.ui={gadgetContent:".gadgetContent",commentsBox:".js-comments-box",placeholder:".js-placeholder",lockOverlay:".js-collab-lock-overlay"},u.prototype.initialize=function(e){var r,i;this.manifest=e.manifest,this.isEditable=e.isEditable,this.lesson=e.lesson,r=e.dropped;if(!this.manifest)throw new Error("Gadget manifest not found for gadget type "+this.model.get("type"));return this.gadgetRendering=t.Deferred(),this.selected=!1,this.gadgetRendering=t.Deferred(),i=window.setTimeout(function(e){return function(){return e.gadgetRendering.reject(new Error("Gadget took too long to load (call setHeight / watchBodyHeight?)"))}}(this),C),this.on("close",function(){return window.clearTimeout(i)}),this.gadgetRendering.always(function(e){return function(){return e.trigger("gadgetRendered"),window.clearTimeout(i)}}(this)),this.gadgetRendering.fail(function(e){return function(t){return e._handleError(t),e.showCouldNotLoad()}}(this)),r&&this.gadgetRendering.always(this._gadgetDropped),this.listenTo(this.model.config,"change",this._onGadgetConfigChange),this.listenTo(this.model.userState,"change",this._onGadgetUserStateChange),this.listenTo(this.model.userState,"sync",this._onGadgetUserStateSync),this.listenTo(this.model.userState,"change:progress",this._onGadgetProgressChanged),o.on("collab:gadget:locked",this._onGadgetLocked),o.on("collab:gadget:unlocked",this._onGadgetUnlocked),this.listenTo(h,"selection:clear",this._onSelectionClear),this._debouncedSaveConfig=n.debounce(this._saveConfig,500),this._debouncedSaveUserState=n.debounce(this._saveUserState,500),this._propertySheetSchema=new l},u.prototype.onRender=function(){var e;return this.el.setAttribute("id","gadget-"+this.model.cid),this.el.setAttribute("data-cid",this.model.cid),this.el.setAttribute("data-type",this.model.get("type")),this.el.addEventListener("elementWasSeen",this._onGadgetSeen),this._renderGadget(),this.gadgetRendering.resolve(),this._renderLeftBar(),this.commentsRegion.show(new g({component:E({gadgetInstanceId:this.model.id})})),e=this.manifest.launcher!=="react",this.$el.toggleClass("sandbox",e)},u.prototype._renderGadget=function(){var e,t,n,r;e=this.ui.gadgetContent[0],r=this._propsForReactAndIframeLaunchers(),n=this.launcher(this.manifest);try{return s.render(s.createElement(n,r),e)}catch(i){return t=i,this._handleError(t),this.showCouldNotLoad(t)}},u.prototype.launcher=function(e){if(!this.isEditable&&!e.launcher&&(e.name==="text"||e.name==="header"))return N;switch(e.launcher){case"react":return x;default:return T}},u.prototype.isIframeGadget=function(){return this.manifest.launcher!=="react"},u.prototype._propsForReactAndIframeLaunchers=function(){var e,t;return{manifest:this.manifest,attributes:this.model.config.toJSON(),learnerState:this.model.userState.toJSON(),isEditable:this.isEditing(),launcherCtor:this._reactCtor,autoLaunch:!0,environment:{assetUrlTemplate:o.assetUrlTemplate,sessionId:v.get("sessionId")||((e=v.get("api"))!=null?e.sessionId:void 0),apiUrl:v.get("apiUrl")||((t=v.get("api"))!=null?t.url:void 0),userId:o.userId,editingAllowed:o.isCourseEditable},patchProps:this._patchProps,patchLearnerState:this._patchLearnerState,launch:function(e){return function(){return m.installReactGadget(e.manifest.name,e.manifest.launchUrl).then(function(t){return e._reactCtor=t,e._renderGadget()})["catch"](function(t){return e._handleError(t),e.showCouldNotLoad(t)})}}(this),legacySetPropertySheetAttributes:function(e){return function(t){return e._propertySheetSchema.set(t)}}(this),legacySetEmpty:function(e){return function(){return e.toggleEmpty(!0)}}(this),legacyTrack:function(e){return function(t){return e._track(t["@type"],n.omit(t,"@type"))}}(this),legacyRequestAsset:function(e){return function(t){return o.trigger("asset:select",{type:t.type,success:function(n){if(t.attribute)return e.model.config.save(t.attribute,n)}})}}(this),legacyChangeBlocking:function(e){return function(){return o.trigger("blocking:changed")}}(this),legacyError:function(e){return function(t){var n;return"string"==typeof t?n=new Error(t):t&&t.message?n=t:(n=new Error("Misformatted error"),console.error(t)),e._handleError(n),e.showCouldNotLoad()}}(this)}},u.prototype._patchProps=function(e){return this.isEditing()?(this.model.config.set(e),this._debouncedSaveConfig()):(console.warn(this.manifest.title,"trying to update attributes while not editable."),this.isIframeGadget()&&this.model.config.set(e),this._debouncedSaveConfig())},u.prototype._patchLearnerState=function(e){return this.model.userState.set(e),this._debouncedSaveUserState()},u.prototype._saveConfig=function(){if(!this.model.isNew())return this.model.config.save().then(function(){return o.pendingConfig=!1})},u.prototype._saveUserState=function(){if(!this.model.isNew())return this.model.userState.save().then(function(){return o.pendingUserState=!1})},u.prototype.onClose=function(){return this.ui.gadgetContent.off()},u.prototype.ondragstart=function(e){return this._renderLeftBar(),this.$el.addClass("gadget-dragging"),o.trigger("gadget:dragstart")},u.prototype.ondragend=function(){return this.$el.removeClass("gadget-dragging"),o.trigger("gadget:dragend"),this._renderLeftBar()},u.prototype._onGadgetLocked=function(e){if(e!==this.model.id)return;return this._locked=!0,this._renderLeftBar()},u.prototype._onGadgetUnlocked=function(e){if(e!==this.model.id)return;return this._locked=!1,this._renderLeftBar()},u.prototype._onSelectionClear=function(){return this._onSelectedChange(!1)},u.prototype.onContentClick=function(e){if(this.manifest.noToggleSwitch)return this.startEditing()},u.prototype.onPlaceholderClick=function(e){return this.startEditing(),e.stopPropagation()},u.prototype.isEditing=function(){return this.manifest.noToggleSwitch&&this.isEditable?!0:!!this._isEditing},u.prototype._toggleEditing=function(){if(!this.isEditable)return;return this.isEditing()?this.stopEditing():this.startEditing()},u.prototype.startEditing=function(){if(!this.isEditable)return;if(this.isEditing())return;return this.trigger("before:startEditing"),this._isEditing=!0,this.$el.addClass("editing"),this._renderLeftBar(),this._renderGadget(),o.trigger("gadget:editing:start",this.model),o.trigger("collab:gadget:editing:start",this.model),t(window).one("click",this.stopEditing),this.trigger("after:startEditing")},u.prototype.stopEditing=function(){if(!this.isEditing())return;return this._isEditing=!1,this.$el.removeClass("editing"),this._renderLeftBar(),this._renderGadget(),o.trigger("gadget:editing:stop",this.model),o.trigger("collab:gadget:editing:stop",this.model),t(window).off("click",this.stopEditing)},u.prototype.prevent=function(e){var n,r;if(((n=this.leftBarRegion)!=null?n.$el:void 0)&&t.contains(this.leftBarRegion.$el[0],e.target))return;if(((r=this.dialogRegion)!=null?r.$el:void 0)&&t.contains(this.dialogRegion.$el[0],e.target))return;return e.stopPropagation()},u.prototype._gadgetDropped=function(){return this._scrollIntoViewIfNeeded(),this.startEditing()},u.prototype._scrollIntoViewIfNeeded=function(){var e;e=this.el.getBoundingClientRect();if(e.top<=0){this.el.scrollIntoView(!0);if(e.top<=0)return window.scrollBy(0,-37)}else if(e.bottom>t(window).height())return this.el.scrollIntoView(!1)},u.prototype.onModelDestroy=function(){return o.trigger("gadget:deleted",this.model)},u.prototype.showCouldNotLoad=function(){return this.dialogRegion.show(new g({component:S({message:"Something went wrong and this gadget didn't load properly.\nWe're on it. Please check back in a bit."},_button(["spec-gadget-dialog-error",{onClick:function(e){return function(){return e.$el.hide()}}(this)}],"close")," ",this.isEditable?_button(["action",{onClick:function(e){return function(){return e.stopEditing(),e.model.destroy()}}(this)}],"delete"):void 0)})),this.trigger("gadgetRendered"),this.$el.addClass("gadget-showing-dialog")},u.prototype.showDeleteMsg=function(){return this.dialogRegion.show(new g({component:S({message:"Are you sure you want to delete this gadget?"},_button([{onClick:function(e){return function(){return e.stopEditing(),e.dialogRegion.close(),e.$el.removeClass("gadget-showing-dialog")}}(this)}],"cancel")," ",_button(["action spec-gadget-dialog-delete",{onClick:function(e){return function(){return e.stopEditing(),e.model.destroy()}}(this)}],"delete"))})),this.$el.addClass("gadget-showing-dialog")},u.prototype.renderAfterMove=function(){return this._renderLeftBar()},u.prototype.onClose=function(){return h.off("selection:clear",this._onSelectionClear)},u.prototype._onSelectedChange=function(e){return this.stopEditing(),this.selected=e,this.$el.toggleClass("selected",e),this._renderLeftBar()},u.prototype._renderLeftBar=function(){var e,t;if(!this.isEditable)return;return(t=this.ui.lockOverlay)!=null&&typeof t.toggle=="function"&&t.toggle(!!this._locked),this._locked?e=w({gadgetInstanceId:this.model.id}):e=_div(["gadget-toolbar-container"],b({onDragStart:this.ondragstart.bind(this),onDragEnd:this.ondragend.bind(this),gadgetManifest:this.manifest,showSelectButton:v.get("feature_selection")===!0,showEditButton:this.manifest.noToggleSwitch!==!0,showDeleteButton:!0,editing:this.isEditing(),onEditClick:this._toggleEditing.bind(this),config:this.model.config,propertySheetSchema:this._propertySheetSchema,onDeleteClick:this.showDeleteMsg.bind(this),gadgetId:this.model.id,gadgetCid:this.model.cid,selected:this.selected,onSelectedChange:function(e){return function(t){return t?h.add(e.model.id):h.remove(e.model.id),e._onSelectedChange(t)}}(this)})),this.leftBarRegion.currentView!=null?this.leftBarRegion.currentView.renderComponent(e):this.leftBarRegion.show(new g({component:e}))},u.prototype._handleError=function(e){var t,r;if(!e)return;return n.extend(e,{gadgetType:(t=this.model)!=null?t.get("type"):void 0,gadgetId:(r=this.model)!=null?r.id:void 0}),typeof console.error=="function"&&console.error(e),this._track("gadget-error",e)},u.prototype._onGadgetSeen=function(){return this.trigger("gadgetSeen",n.pick(this.model.attributes,"id","type")),this._track("gadget-seen")},u.prototype.toggleEmpty=function(e){return e&&(this._emptyState=this.model.config.toJSON()),this.$el.toggleClass("empty",e)},u.prototype._onGadgetConfigChange=function(e){return this._emptyState&&!n.isEqual(e.toJSON(),this._emptyState)&&this.toggleEmpty(!1),this.model.isNew()||this.trigger("gadgetConfigChanged",n.pick(this.model.attributes,"id","type")),this._renderGadget(),o.trigger("collab:gadget:changed",this.model)},u.prototype._onGadgetUserStateChange=function(e){this._renderGadget();if(!this.model.isNew())return this.trigger("gadgetUserStateChanged",n.pick(this.model.attributes,"id","type"))},u.prototype._onGadgetUserStateSync=function(e,t,n){return this._renderGadget(),this.trigger("lessonIsCompleteMayHaveChanged")},u.prototype._track=function(e,t){var r,i,s;return r=n.extend({},t,{_source:"gadget",lessonId:(i=this.lesson)!=null?(s=i.model)!=null?s.id:void 0:void 0,gadgetId:this.model.id,gadgetType:this.manifest.type||this.manifest.manifestUrl}),a.track(e,r)},u}(i.Layout)})}.call(this),function(){n("plugins/feature-detection",[],function(){var e;return e=function(){function e(){}return e.prototype.userAgent=function(){return this._userAgent!=null?this._userAgent:this._userAgent=navigator.userAgent.toLowerCase()},e.prototype.edgeScroll=function(){return this.isChrome()},e.prototype.isIE=function(){return this.userAgent().indexOf("trident")>0},e.prototype.isChrome=function(){return this.userAgent().indexOf("chrome")>0},e}(),new e})}.call(this),function(){n("views/lesson_screen",["jquery","backbone","react","plugins/feature-detection"],function(e,t,n,r){var i,s;return s=n.DOM.div,i=n.createClass({getDefaultProps:function(){return{lessonView:{},lesson:{}}},getInitialState:function(){return{dropTargetTop:0,dropTargetVisible:!1}},render:function(){return s({className:"lesson-screen",onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this.onDragOver,onDrop:this.onDrop},s({style:{position:"fixed",opacity:this.state.dropTargetVisible?.7:0,top:this.state.dropTargetTop+"px"},className:"lesson-drop-target"}))},_scrollSpeed:25,_scrollDuration:50,_scrollDirection:0,componentWillMount:function(){return this._scrollContainer=e(".js-main-container"),this._edgeScrollEnabled=r.edgeScroll()},onDragEnter:function(e){return e.preventDefault(),e.dataTransfer.dropEffect="move",this.setState({dropTargetVisible:!0,dropTargetTop:e.clientY}),this._scrollContainer.on("scroll",this.onScroll)},onDragLeave:function(e){return this.setState({dropTargetVisible:!1}),this._stopScrolling(),this._scrollContainer.off("scroll",this.onScroll)},onDragOver:function(e){var t,n,r;e.preventDefault(),e.dataTransfer.dropEffect="move",this.setState({dropTargetTop:this._dropTargetPosition(e.clientY),dropTargetVisible:!0});if(!this._edgeScrollEnabled&&this._scrollContainer)return n=this._scrollContainer.get(0).getBoundingClientRect(),r=e.clientY-n.top,t=n.bottom-e.clientY,0<r&&r<50?this._startScrolling(-1):0<t&&t<50?this._startScrolling(1):this._stopScrolling()},onDrop:function(e){var t,n,r;return e.preventDefault(),e.stopPropagation(),this._stopScrolling(),n=this._gadgetAtCursor(e.clientY),r=this._dropTargetIndex(e.clientY,n),t=JSON.parse(e.dataTransfer.getData("text")),_.defer(function(e){return function(){switch(t.action){case"reorder":return e.props.lessonView.moveGadgetToIndex(t.gadgetCid,r);case"create":return e.props.lessonView.createManifestInstanceAt(t.manifestUrl,r,!0);case"paste":return e.props.lessonView.pasteGadgetInstancesAt(t.gadgets,r)}}}(this))},onScroll:function(){return this.setState({dropTargetVisible:!1})},_dropTargetPosition:function(e){var t,n;return t=this._gadgetAtCursor(e),t?this._dropTargetPositionAtGadgetBox(e,t.getBoundingClientRect()):(n=this._gadgetContainerRect(),this.props.lesson.gadgets.length>0&&e>=n.top?n.bottom:n.top)},_gadgetAtCursor:function(e){return _(this.props.lessonView.el.querySelectorAll(".js-gadget")).find(function(t){var n;return n=t.getBoundingClientRect(),e>=n.top&&e<n.bottom})},_dropTargetIndex:function(t,n){var r,i;return n?(i=n.getBoundingClientRect(),r=this._cursorPositionMultiplier(t,i),e(n).index()+r):t<=this._gadgetContainerRect().top?0:this.props.lessonView.$el.find(".js-gadget").length},_dropTargetPositionAtGadgetBox:function(e,t){return t.top+t.height*this._cursorPositionMultiplier(e,t)},_gadgetContainerRect:function(){return this.props.lessonView.el.querySelector(".js-lesson-gadgets").getBoundingClientRect()},_startScrolling:function(e){if(this._scrollDirection===e)return;return this._scrollDirection=e,setTimeout(this._scrollOneStep.bind(this),250)},_scrollOneStep:function(){var e;if(this._scrollDirection===0)return;return e=this._scrollContainer.scrollTop()+this._scrollDirection*this._scrollSpeed,this._scrollContainer.animate({scrollTop:e},this._scrollDuration,"linear",this._scrollOneStep.bind(this))},_stopScrolling:function(){if(this._scrollDirection===0)return;return this._scrollDirection=0},_cursorPositionMultiplier:function(e,t){return e-t.top>=t.height/2?1:0}})})}.call(this),function(){n("views/inline_input",["react","react-coffeescript-glue"],function(e){var t;return t=e.createClass({render:function(){return _input(["inline-input",{ref:"input"},this.props])},componentDidMount:function(){return this._afterRender()},componentDidUpdate:function(e,t){return this._afterRender()},_afterRender:function(){return this.refs.input.getDOMNode().focus()}})})}.call(this),function(){n("views/lesson_title",["underscore","react","views/inline_input","react-coffeescript-glue","react-backbone"],function(e,t,n){var r,i;return i=t.createClass({getInitialState:function(){return{editing:!1}},_finishEditing:function(){return this.setState({editing:!1}),this.props.onFinishEditing()},render:function(){return _h1([],_div(["lesson-title",this.props.editable&&!this.state.editing?"lesson-title-with-outline":void 0],this.state.editing?n({value:this.props.title,placeholder:"Enter lesson title",onClick:function(e){return e.stopPropagation()},onBlur:function(e){return function(){return e._finishEditing()}}(this),onKeyDown:function(e){return function(t){var n;if((n=t.key)==="Enter"||n==="Escape")return e._finishEditing()}}(this),onChange:function(e){return function(t){return e.props.onChangeTitle(t.target.value)}}(this)}):_div([{onClick:function(e){return function(){if(e.props.editable)return e.setState({editing:!0})}}(this)}],this.props.title)))}}),r=t.createClass({mixins:[t.BackboneMixin("lesson")],render:function(){return i({title:this.props.lesson.get("title"),editable:this.props.editable,onChangeTitle:function(e){return function(t){return e.props.lesson.set({title:t})}}(this),onFinishEditing:function(e){return function(){return e.props.lesson.save()}}(this)})}})})}.call(this),function(){n("plugins/backbone.move",["backbone","underscore"],function(e,t){return e.Collection.prototype.move=function(e,t,n){var r;r=this.indexOf(e);if(r===-1)throw new Error("Can't move a model that's not in the collection");if(r===t)return;this.models.splice(t,0,this.models.splice(r,1)[0]),this.trigger("sort",this);if(n!=null?!n.silent:!void 0)return this._syncOrder(n)},e.Collection.prototype._getIndexes=function(){return t.map(this.models,function(e){return e.id})},e.Collection.prototype._syncOrder=function(e){var n;e==null&&(e={}),n=this._getIndexes();if(!n.length)return;return e.url==null&&(e.url=t.result(this,"url")+"/order"),e.attrs==null&&(e.attrs=n),this.sync("update",this,e)},e})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,r=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};n("views/lesson",["underscore","async","jquery","marionette","mediator","player_palette","plugins/tracker","models/settings","models/gadget","templates/lesson","views/gadget/instance","views/lesson_screen","state/position","state/selection","views/react_view","views/lesson_title","plugins/backbone.move"],function(t,n,i,s,o,u,a,f,l,c,h,p,d,v,m,g){var y,b;return y="../../assets/img/clipboard_item.png",b=function(s){function b(){return this.showGadget=e(this.showGadget,this),this._onDragEnd=e(this._onDragEnd,this),this._onDragStart=e(this._onDragStart,this),this._onGadgetInserted=e(this._onGadgetInserted,this),this.addGadgetToTheEnd=e(this.addGadgetToTheEnd,this),this.itemViewOptions=e(this.itemViewOptions,this),b.__super__.constructor.apply(this,arguments)}return r(b,s),b.prototype.template=t.template(c),b.prototype.ui={gadgets:".gadgets",lessonTitle:".js-lesson-title",lessonContent:".js-lesson-content",screen:".js-lesson-screen",canvasMessage:".canvas-message"},b.prototype.className="lesson",b.prototype.itemViewContainer=".gadgets",b.prototype.itemView=h,b.prototype.itemViewOptions=function(e){return{manifest:u.findManifestByShortType(e.get("type")),isEditable:this.isEditable,lesson:this,dropped:e.dropped}},b.prototype.initialize=function(e){return this.isEditable=e.isEditable,this.collection=this.model.gadgets,this.activeView=null,this.on("itemview:lessonIsCompleteMayHaveChanged",function(e){return function(){return e.trigger("lessonIsCompleteMayHaveChanged")}}(this)),this.on("itemview:before:startEditing",this.onBeforeStartEditingGadget),this.on("itemview:gadgetRendered",this._onGadgetRendered),this.on("itemview:gadgetConfigChanged",this._onGadgetConfigChanged,this),this.on("itemview:gadgetUserStateChanged",this._onGadgetUserStateChanged,this),this.on("itemview:gadgetSeen",this._onGadgetSeen,this),this.listenTo(this.model.gadgets,"remove",this.onGadgetDeleted),this.listenTo(this.model.gadgets,"change:isEditing",this.onGadgetEditingChanged),this.listenTo(this,"composite:collection:rendered",this.onCollectionRender),this.listenTo(this.model.gadgets,"add remove",this.fixCanvasMessage),o.on("tray:gadgetSelected",this.addGadgetToTheEnd,this),o.on("gadget:dragstart",this._onDragStart,this),o.on("gadget:dragend",this._onDragEnd,this),this.listenTo(v,"selection:add",this._onClipboardSelectionCopy,this),this.listenTo(v,"selection:cut",this._onClipboardSelectionCut,this)},b.prototype.onRender=function(){this.fixCanvasMessage(),d.set({lessonCid:this.model.cid,gadgetCid:null}),v.clear(),this.isEditable&&(this.lessonScreenReactView=new m({component:p({lessonView:this,lesson:this.model})}),this.lessonScreenReactView.render().$el.appendTo(this.ui.screen),this.lessonScreenReactView.onShow()),this.children.length===0&&o.trigger("lesson:allGadgetsRendered",this.model);if(!f.get("embedded")||this.model.get("title")!=="Untitled lesson")this.lessonTitleReactView=new m({component:g({editable:this.isEditable,lesson:this.model})}),this.lessonTitleReactView.render().$el.appendTo(this.ui.lessonTitle),this.lessonTitleReactView.onShow();if(!this.isEditable)return a.track("Viewed lesson",{courseId:f.get("courseId"),lessonId:this.model.id})},b.prototype.onClose=function(){o.off("tray:gadgetSelected",this.addGadgetToTheEnd,this),v.off("selection:cut",this._onClipboardSelectionCut,this),v.off("selection:add",this._onClipboardSelectionCopy,this);if(this.lessonTitleReactView)return this.lessonTitleReactView.close()},b.prototype.onGadgetEditingChanged=function(e,t){return this.$el.toggleClass("has-editing-gadget",t)},b.prototype._onGadgetConfigChanged=function(e,t){return a.track("Edited gadget",{courseId:f.get("courseId"),lessonId:this.model.id,gadgetId:t.id,gadgetType:t.type})},b.prototype._onGadgetUserStateChanged=function(e,t){if(this.isEditable)return;return a.track("Changed learner state",{courseId:f.get("courseId"),lessonId:this.model.id,gadgetId:t.id,gadgetType:t.type})},b.prototype._onGadgetSeen=function(e,t){if(this.isEditable)return;return a.track("Viewed Gadget",{courseId:f.get("courseId"),lessonId:this.model.id,gadgetId:t.id,gadgetType:t.type})},b.prototype.onBeforeStartEditingGadget=function(e){var t;return(t=this._currentlyEditingGadget)!=null&&t.stopEditing(),this._currentlyEditingGadget=e},b.prototype.onBeforeStartCommentingGadget=function(e){var t;return(t=this._currentlyCommentingGadget)!=null&&t.stopCommenting(),this._currentlyCommentingGadget=e},b.prototype.createManifestInstanceAt=function(e,t,n){var r;return n==null&&(n=!1),r=u.createGadgetInstance(e),this.insertGadgetInstanceAt(r,t,n)},b.prototype.insertGadgetInstanceAt=function(e,t,n){var r;return n==null&&(n=!1),r=this.createGadgetInstanceAt(e,t,n),this.collection.create(r,{at:t,success:this._onGadgetInserted})},b.prototype.createGadgetInstanceAt=function(e,t,n){var r;return r=new l(e),r.set("index",t),r.dropped=n,r},b.prototype.addGadgetToTheEnd=function(e){return this.createManifestInstanceAt(e,this.children.length,this.isEditable)},b.prototype.pasteGadgetInstancesAt=function(e,t){var r,i;return r=e.map(function(e){return function(n,r){return e.createGadgetInstanceAt(n,t+r)}}(this)),this.collection.add(r,{at:t}),i=r.map(function(e){return function(t,n){return function(n){return t.save({},{error:n,success:function(r){return e._onGadgetInserted(t),n()}})}}}(this)),n.series(i,function(e){if(e)return console.error(e)})},b.prototype.pasteGadgetInstancesAtSaveWithPut=function(e,t){var n;return e.forEach(function(e){return function(n,r){var i;return i=e.createGadgetInstanceAt(n,t+r),i.set("id",Math.random().toString(36).substring(7)),e.collection.add(i,{at:t+r})}}(this)),n=this.model.toJSON({gadgets:!0}),this.model.save(n).then(function(t){return function(){return e.forEach(t._onGadgetInserted)}}(this))},b.prototype._onGadgetInserted=function(e){return a.track("Added gadget",{courseId:f.get("courseId"),lessonId:this.model.id,gadgetId:e.id,gadgetType:e.get("type")}),o.trigger("collab:lesson:gadget:added",this,e)},b.prototype.onGadgetDeleted=function(e){return a.track("Deleted gadget",{courseId:f.get("courseId"),lessonId:this.model.id,gadgetId:e.id,gadgetType:e.get("type")}),o.trigger("collab:lesson:gadget:deleted",this,e)},b.prototype.moveGadgetToIndex=function(e,n){var r,i,s;return i=this.collection.get(e),this.collection.indexOf(i)<n&&n--,this.collection.move(i,n),s=this.children.findByModel(i),r=s.$el.detach(),t.defer(function(e){return function(){var t;return n===0?e.ui.gadgets.prepend(r):(t=e.children.findByModel(e.collection.at(n-1)),r.insertAfter(t.el)),o.trigger("collab:lesson:gadget:moved",e),e._relegateChildGadgets(),s.renderAfterMove()}}(this))},b.prototype._onDragStart=function(e){return this.$el.addClass("dragover")},b.prototype._onDragEnd=function(){return this.$el.removeClass("dragover")},b.prototype._serializeSelection=function(e){var n,r,i,s,o,a,f,l;return s=(a=this.model.gadgets)!=null?(f=a.models)!=null?f.filter(function(n){return t.contains(e,n.id)}).map(function(e){return t.pick(e.toJSON(),"config","type")}):void 0:void 0,r=u.findManifestByShortType((l=s[0])!=null?l.type:void 0),n=new Date,o=n.toString().split(" ").slice(0,4).slice(1,3).join(" "),o+=" "+n.toTimeString().substring(0,8),i=e.length===1?r.distributedIconPath:y,{gadgets:s,title:o,icon:i}},b.prototype._onClipboardSelectionCopy=function(){var e;e=v.keys();if(!e.length)return;return v.trigger("clipboard:item:add",this._serializeSelection(e)),v.clear()},b.prototype._onClipboardSelectionCut=function(){var e,t;e=v.keys();if(!e.length)return;return this._onClipboardSelectionCopy(),v.trigger("selection:cut"),t=this.collection.filter(function(t){return e.indexOf(t.id)>=0}),t!=null?t.forEach(function(e){return e.destroy()}):void 0},b.prototype.onCollectionRender=function(){return this._currentlyCommentingGadget=null,this._currentlyEditingGadget=null},b.prototype.appendHtml=function(e,t,n){var r;return r=this.ui.gadgets.children(),r.size()<=n?this.ui.gadgets.append(t.el):r.eq(n).before(t.el)},b.prototype._onGadgetRendered=function(e){var t;e.rendered=!0,t=this.children.every(function(e){return e.rendered});if(t)return o.trigger("lesson:allGadgetsRendered",this.model)},b.prototype.showHoverables=function(e){return e==null&&(e=!0),this.children.each(function(t){return t.showHoverables(e)})},b.prototype.showGadget=function(e){var n,r;return n=i(".js-main-container"),r=this.children.findByIndex(e-1),this._showGadget==null&&(this._showGadget=t.debounce(function(e){return e.gadgetRendering.done(function(){var t;return t=e.$el.offset().top+n.scrollTop(),t+=5,n.animate({scrollTop:t},"fast")})},250,!0)),this._showGadget(r)},b.prototype.isComplete=function(){if(this.model.collection.indexOf(this.model)<this.model.collection.length-1)throw"Only call isComplete on the last lesson";return this.model.gadgets.every(function(e){var t;return e.get("type")!=="6/quiz@1.0.04"||((t=e.userState.get("results"))!=null?t.pass:void 0)===!0})},b.prototype._relegateChildGadgets=function(){var e;return e=[],this.collection.each(function(t){return function(n){if(n.isChild)return e.push(n),t.collection.remove(n,{silent:!0})}}(this)),this.collection.add(e,{silent:!0})},b.prototype.fixCanvasMessage=function(){return this.ui.canvasMessage.toggleClass("hidden",!!this.collection.length)},b}(s.CompositeView)})}.call(this),function(){n("templates/loading",[],function(){return'<div class="loading-overlay">\n  <span class="loading-content">\n    <span class="js-loading-indicator-region loading-indicator"></span>\n    Loading...\n  </span>\n</div>'})}.call(this),function(){n("views/loading_indicator",["react","react-coffeescript-glue"],function(e){var t;return t=e.createClass({render:function(){var e;return _div(["loading-indicator"],function(){var t,n;n=[];for(e=t=0;t<=14;e=++t)n.push(_div(["loading-indicator-line","loading-indicator-line-"+e,{key:"line-"+e}]));return n}())}})})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("views/loading",["marionette","templates/loading","views/react_view","views/loading_indicator"],function(e,n,r,i){var s;return s=function(e){function s(){return s.__super__.constructor.apply(this,arguments)}return t(s,e),s.prototype.template=_.template(n),s.prototype.regions={loadingIndicatorRegion:".js-loading-indicator-region"},s.prototype.onRender=function(){return this.loadingIndicatorRegion.show(new r({component:i()}))},s.prototype.hide=function(){return this.$(".loading-overlay").fadeOut(400,function(e){return function(){return e.close()}}(this))},s}(e.Layout)})}.call(this),function(){n("templates/nav_buttons",[],function(){return"<div class=\"nav-wrapper\">\n  <div class=\"nav\">\n    <%= buttonIf(previousAvailable(), 'js-prev previous-button', 'previous', 'left') %>\n    <%= buttonIf(nextAvailable(), 'js-next next-button', 'next', 'right') %>\n    <%= buttonIf(isComplete() && !nextAvailable(), 'js-finish finish-button', 'finish', 'right') %>\n    <div class=\"clearfix\"></div>\n  </div>\n</div>"})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("models/current_user",["backbone"],function(e){var n,r;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.url="/user",n}(e.Model),r=null,{fetchDeferred:function(){return r==null&&(r=(new n).fetch()),r}}})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,r=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};n("views/nav_buttons",["marionette","templates/nav_buttons","mediator","models/current_user","plugins/tracker"],function(t,n,i,s,o){var u;return u=function(t){function u(){return this.templateHelpers=e(this.templateHelpers,this),this.buttonIf=e(this.buttonIf,this),this.isComplete=e(this.isComplete,this),this.nextAvailable=e(this.nextAvailable,this),this.previousAvailable=e(this.previousAvailable,this),this._onCourseEnd=e(this._onCourseEnd,this),u.__super__.constructor.apply(this,arguments)}return r(u,t),u.prototype.className="nav-buttons",u.prototype.initialize=function(){return i.on("lesson:rendered",this.updateButtons,this),this._isEditable=this.model.get("isEditable")},u.prototype.onClose=function(){return i.off("lesson:rendered",this.updateButtons)},u.prototype.events={"click .js-prev":"onPreviousClick","click .js-next":"onNextClick","click .js-finish":"onFinishClick"},u.prototype.ui={finishButton:".js-finish",nextButton:".js-next",prevButton:".js-prev"},u.prototype.template=_.template(n),u.prototype.updateButtons=function(e){var t,n,r;return(t=this.lessonView)!=null&&t.off("lessonIsCompleteMayHaveChanged",this.render),(n=this.next)!=null&&n.off("change:isAccessible",this.render),this.lessonView=e,this.prev=this.model.lessons.at(this.model.lessons.indexOf(this.lessonView.model)-1),this.next=this.model.lessons.at(this.model.lessons.indexOf(this.lessonView.model)+1),this.lessonView.on("lessonIsCompleteMayHaveChanged",this.render,this),(r=this.next)!=null&&r.on("change:isAccessible",this.render,this),this.render()},u.prototype.onPreviousClick=function(){var e;return this.ui.prevButton.addClass("disabled"),e=1+this.model.lessons.indexOf(this.prev),i.trigger("navigate:lesson",e)},u.prototype.onNextClick=function(){var e;return this.ui.nextButton.addClass("disabled"),e=1+this.model.lessons.indexOf(this.next),i.trigger("navigate:lesson",e)},u.prototype._fetchCurrentUser=function(){return s.fetchDeferred()},u.prototype._onCourseEnd=function(e){return i.trigger("parent:notify",{event:"player:course:completed",user:_.pick(e,"email","id")}),this.ui.finishButton.removeClass("disabled")},u.prototype.onFinishClick=function(){if(this.ui.finishButton.hasClass("disabled"))return;return o.track("Finished course",{courseId:this.model.id}),this.ui.finishButton.addClass("disabled"),this.model.complete().then(this._fetchCurrentUser).then(this._onCourseEnd)},u.prototype.previousAvailable=function(){return this.prev!=null&&(this.prev.get("isAccessible")||this._isEditable)},u.prototype.nextAvailable=function(){return this.next!=null&&(this.next.get("isAccessible")||this._isEditable)},u.prototype.isComplete=function(){var e;return!this.next&&((e=this.lessonView)!=null?e.isComplete():void 0)},u.prototype.buttonIf=function(e,t,n,r){if(e)return"<a class='nav-button "+t+" pull-"+r+"'>\n  <i class='icon-caret-"+r+" pull-"+r+"'></i>\n  <span class='nav-button-text'>"+n+"</span>\n</a>"},u.prototype.templateHelpers=function(){return{previousAvailable:this.previousAvailable,nextAvailable:this.nextAvailable,isComplete:this.isComplete,buttonIf:this.buttonIf}},u}(t.CompositeView)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,r=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};n("views/course",["jquery","marionette","templates/course","views/lesson","views/loading","mediator","plugins/tracker","views/nav_buttons"],function(t,n,i,s,o,u,a,f){var l;return l=function(n){function l(){return this._refetchSections=e(this._refetchSections,this),l.__super__.constructor.apply(this,arguments)}return r(l,n),l.prototype.initialize=function(e){return e==null&&(e={}),this.listenTo(this.model.lessons,"add",this.onLessonsAdd,this),u.on("tray:gadgetUpdated",this.rerenderLesson,this),u.on("blocking:changed",this._onBlockingChanged,this),u.on("collab:populate:updateBar",this._onPopulateUpdateBar,this),this._isEditable=this.model.get("isEditable"),this.singleLesson=e.singleLesson},l.prototype.onClose=function(){return u.off("tray:gadgetUpdated",this.rerenderLesson,this),u.off("blocking:changed",this._onBlockingChanged,this),u.off("collab:populate:updateBar",this._onPopulateUpdateBar,this),u.off("course:save:error",this.showSaveErrorMsg,this),u.off("course:save:success",this.hideSaveErrorMsg,this)},l.prototype.ui={saveErrorMsg:".saveErrorMsg"},l.prototype.regions={updateNotificationContainer:".js-update-notification-container",lessonRegion:".js-lessons",loadingRegion:".js-loading",nav:".js-nav"},l.prototype.template=_.template(i),l.prototype.className=function(){return this._isEditable?"course editable":"course"},l.prototype.getLessonView=function(e){return this.children.findByModel(e)},l.prototype.activeLessonIndex=function(){return this.model.lessons.indexOf(this._activeLesson)},l.prototype.activateLesson=function(e){return this.loadingLesson&&this.loadingLesson.abort(),this.renderingLesson=t.Deferred(),this.model.lessons.indexOf(e)===-1||e===this._activeLesson?(this.renderingLesson.resolve(),!1):(this.loadingLesson=e.fetch(),a.timeXHR(this.loadingLesson,"fetch-lesson",{courseId:this.model.id,lessonId:e.id}),this._activeLesson&&(this._loadingView=new o,this.loadingRegion.show(this._loadingView)),this._activeLesson=null,this.loadingLesson.done(function(t){return function(){return t.displayLesson(e)}}(this)))},l.prototype.displayLesson=function(e){var n,r,i,o;return n=this._activeLesson,this._activeLesson=e,this._loadingView&&this._loadingView.hide(function(e){return function(){return e.loadingRegion.close()}}(this)),r=this.activeLessonIndex()+1,this.model.progress.get("lessonIndex")!==r&&(i=this.renderingLesson)!=null&&i.done(function(e){return function(){return e.model.progress.save({lessonIndex:r})}}(this)),(o=this._lessonView)!=null&&o.close(),this._lessonView=new s({model:this._activeLesson,isEditable:this._isEditable}),this.lessonRegion.show(this._lessonView),t(".js-main-container").scrollTop(0),this.renderingLesson&&this.renderingLesson.resolve(),u.trigger("lesson:rendered",this._lessonView),n&&(u.trigger("collab:lesson:closed",n),u.trigger("stickyHeaders:refresh")),u.trigger("collab:lesson:opened",this._activeLesson)},l.prototype.startEditing=function(e){if(!this._isEditable)return;return e.toggleEdit(!0),e.$el.parent().addClass("editing"),this._lessonView.showHoverables(!1)},l.prototype.onRender=function(){return this._rendered=!0,this.el.className=this.className(),this.activateLesson(this._activeLesson||this.model.lessons.first()),this.navView=new f({model:this.model}),this.singleLesson||this.nav.show(this.navView),u.on("course:save:error",this.showSaveErrorMsg,this),u.on("course:save:success",this.hideSaveErrorMsg,this)},l.prototype._onPopulateUpdateBar=function(e){return this.updateNotificationContainer.show(e)},l.prototype.onShow=function(){return u.trigger("collab:player:course:ready")},l.prototype.showLesson=function(e){return this.showGadget(e,null)},l.prototype.showGadget=function(e,n){var r;return(r=this.model.lessons.at(e-1))&&this.activateLesson(r),this.renderingLesson.done(function(e){return function(){return n?e._lessonView.showGadget(n):t(".js-main-container").animate({scrollTop:0})}}(this))},l.prototype.showSaveErrorMsg=function(){if(!this.saveErrorShowing&&!!this._isEditable)return this.ui.saveErrorMsg.slideDown(50),this.saveErrorShowing=!0},l.prototype.hideSaveErrorMsg=function(){if(this.saveErrorShowing)return this.saveErrorShowing=!1,this.ui.saveErrorMsg.slideUp(50)},l.prototype._onBlockingChanged=function(){return setTimeout(this._refetchSections,100)},l.prototype._refetchSections=function(){var e;return e=this.model.fetch({data:{depth:"sections"},success:function(e){return function(){return e.navView.updateButtons(e._lessonView)}}(this)}),a.timeXHR(e,"fetch-sections",{courseId:this.model.id})},l.prototype.rerenderLesson=function(){return this.displayLesson(this._activeLesson)},l}(n.Layout)})}.call(this),function(){n("views/sidebar/sidebar_course_component",["react","views/inline_input","react-coffeescript-glue"],function(e,t){var n,r,i,s,o,u,a,f,l,c;return c=10,n=e.createClass({render:function(){var e;return e=this.props.children.trim(),e?_span([],e):_span(["sidebar-placeholder-text"],this.props.placeholder)}}),f=e.createClass({_onClick:function(e){if(!this.props.isAccessible)return;return this.props.onClick(),e.stopPropagation()},render:function(){return _div(["sidebar-section-title",this.props.hasCompletedSection||this.props.isCurrentSection?"sidebar-toc-progressed":void 0,this.props.isCurrentSection?"sidebar-toc-active":void 0,{onClick:this._onClick}],this.props.title)}}),o=e.createClass({_dragYOffset:function(){return this.isMounted()?this.getDOMNode().offsetHeight/2:0},render:function(){return _div(["sidebar-lesson sidebar-lesson-drag-image",{style:{left:this.props.x-c,top:this.props.y-this._dragYOffset(),width:this.props.width}}],_div(["sidebar-lesson-title"],_div(["sidebar-lesson-title-readonly"],n({placeholder:this.props.placeholder},this.props.title))))}}),r=e.createClass({componentWillMount:function(){return this._elementInBody=document.createElement("div"),document.body.appendChild(this._elementInBody)},componentWillUnmount:function(){return e.unmountComponentAtNode(this._elementInBody),document.body.removeChild(this._elementInBody)},render:function(){return _span()},componentDidMount:function(){return this._renderElementInBody()},componentDidUpdate:function(){return this._renderElementInBody()},_renderElementInBody:function(){return e.renderComponent(this.props.children,this._elementInBody)}}),a=e.createClass({_onClick:function(e){if(!this.props.isAccessible)return;return this.props.onClick(),e.stopPropagation()},_renderSections:function(){return this.props.gadgets.map(function(e){return function(t,n){var r;if(t.type!==e.props.sectionGadgetType)return;r=(t.config.content||"").trim();if(r==="")return;return f({key:t.id,title:r,isAccessible:e.props.isAccessible,hasCompletedSection:e.props.hasCompletedLesson||e.props.isCurrentLesson&&n<=e.props.currentGadgetIndex,isCurrentSection:e.props.isCurrentLesson&&n===e.props.currentGadgetIndex,onClick:function(){return e.props.onClickSection(n)}})}}(this))},getInitialState:function(){return{editing:!1,dragImageContainer:null,customDragImageX:null,customDragImageY:null}},_onDragEnter:function(e){return e.preventDefault(),e.dataTransfer.dropEffect="move"},_onDragOver:function(e){var t,n,r;return e.preventDefault(),r=e.clientY-this.getDOMNode().getBoundingClientRect().top,n=this.getDOMNode().offsetHeight/2,t=r>n,this.props.onDragMove(t)},_onDrag:function(e){return this.setState({customDragImageX:e.clientX,customDragImageY:e.clientY})},_onDragEnd:function(){return this.setState({renderCustomDragImage:!1,customDragImageX:null,customDragImageY:null})},_onDrop:function(e){return e.preventDefault()},_dragHandleOnDragStart:function(e){var t;return e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("Text",this.props.title),e.dataTransfer.setDragImage?(t=this.refs.title.getDOMNode().offsetHeight/2,e.dataTransfer.setDragImage(this.getDOMNode(),c,t),setTimeout(this.props.onDragStart,0)):(this.props.onDragStart(),this.setState({renderCustomDragImage:!0}))},_dragHandleOnDragEnd:function(){return this.props.onDragEnd(),this.props.onHoverStart(),setTimeout(function(e){return function(){return e.props.onHoverStart()}}(this),50)},render:function(){var e,i;return e="Untitled lesson",_div(["sidebar-lesson",this.props.isAccessible?void 0:"sidebar-lesson-disabled",this.state.editing?"sidebar-lesson-editing":void 0,this.props.editable?"sidebar-lesson-editable":void 0,this.props.hovered?"sidebar-lesson-hovered":void 0,this.props.dragging?"sidebar-lesson-dragging":void 0,this.props.hasCompletedLesson||this.props.isCurrentLesson?"sidebar-toc-progressed":void 0,this.props.isCurrentLesson?"sidebar-toc-active":void 0,{onClick:this._onClick,onDragEnter:this._onDragEnter,onDragOver:this._onDragOver,onDrag:this._onDrag,onDragEnd:this._onDragEnd,onDrop:this._onDrop,onMouseEnter:this.props.onHoverStart,onMouseMove:this.props.onHoverStart,onMouseLeave:this.props.onHoverEnd}],this.props.editable?_div([],_div(["sidebar-lesson-drag-handle",{draggable:!0,onDragStart:this._dragHandleOnDragStart,onDragEnd:this._dragHandleOnDragEnd}],_i(["icon-reorder"])),_div(["sidebar-lesson-delete-button",{onClick:function(e){return e.stopPropagation()},onMouseDown:function(e){return function(t){if(confirm("Are you sure you want to delete this lesson?"))return e.props.onDelete()}}(this)}],_i(["icon-remove"])),this.state.editing?_div(["sidebar-lesson-edit-button",{key:"edit-button-editing"}],_i(["icon-pencil"])):_div(["sidebar-lesson-edit-button",{key:"edit-button-not-editing",onClick:function(e){return function(t){return t.stopPropagation(),e.setState({editing:!e.state.editing})}}(this)}],_i(["icon-pencil"]))):void 0,_div(["sidebar-lesson-title",{ref:"title"}],this.state.editing?t({value:this.props.title,placeholder:e,onClick:function(e){return function(e){return e.stopPropagation()}}(this),onBlur:function(e){return function(){return e.setState({editing:!1})}}(this),onKeyDown:function(e){return function(t){var n;if((n=t.key)==="Enter"||n==="Escape")return e.setState({editing:!1})}}(this),onChange:function(e){return function(t){return e.props.onChangeTitle(t.target.value)}}(this)}):_div(["sidebar-lesson-title-readonly"],n({placeholder:e},this.props.title))),_div([],this._renderSections()),_i(["sidebar-lesson-lock icon-lock",{title:"This lesson is locked by one or more quizzes"}]),this.state.renderCustomDragImage?r({},o({title:this.props.title,x:this.state.customDragImageX,y:this.state.customDragImageY,width:(i=this.getDOMNode())!=null?i.offsetWidth:void 0,placeholder:e})):void 0)},componentDidMount:function(){return this._afterRender(!1)},componentDidUpdate:function(e,t){return this._afterRender(e.isCurrentLesson)},_afterRender:function(e){var t,n;if(!this.getDOMNode().offsetParent)return console.warn("Invariant violation: SidebarLessonComponent has no offsetParent, probably not attached to the DOM yet");if(!this.getDOMNode().offsetParent.className.match("sidebar-body"))return console.warn("Invariant violation: SidebarLessonComponent offsetParent is not the sidebar body!");if(this.props.isCurrentLesson&&!e){t=this.getDOMNode().offsetParent;if(!(t.scrollTop<=(n=this.getDOMNode().offsetTop)&&n<=t.scrollTop+t.offsetHeight))return t.scrollTop=this.getDOMNode().offsetTop-t.offsetHeight/2}}}),s=e.createClass({getInitialState:function(){return{editing:!1}},render:function(){var e;return e="Untitled course",_div(["sidebar-course-title"],this.state.editing?t({value:this.props.title,placeholder:e,onBlur:function(e){return function(){return e.setState({editing:!1})}}(this),onKeyDown:function(e){return function(t){var n;if((n=t.key)==="Enter"||n==="Escape")return e.setState({editing:!1})}}(this),onChange:function(e){return function(t){return e.props.onChange(t.target.value)}}(this)}):_div([{onClick:function(e){return function(){return e.props.onClick()}}(this)}],n({placeholder:e},this.props.title)),this.props.editable?this.state.editing?_i(["sidebar-course-title-edit-icon icon-pencil",{key:"edit-button-editing"}]):_i(["sidebar-course-title-edit-icon icon-pencil",{key:"edit-button-not-editing",onClick:function(e){return function(){return e.setState({editing:!0})}}(this)}]):void 0)}}),u=e.createClass({getInitialState:function(){return{opened:!1}},_onDocumentClick:function(e){if(this.getDOMNode().contains(e.target))return;return this.setState({opened:!1})},componentDidMount:function(){return document.addEventListener("click",this._onDocumentClick,!0)},componentWillUnmount:function(){return document.removeEventListener("click",this._onDocumentClick,!0)},render:function(){return _div([],_div(["sidebar-course-title-options-toggle",{onClick:function(e){return function(){return e.setState({opened:!e.state.opened})}}(this)}],this.state.opened?_i(["icon-caret-up"]):_i(["icon-caret-down"])),this.state.opened?_div(["sidebar-course-title-options-dropdown spec-sidebar-course-title-options-dropdown"],_div(["sidebar-course-title-options-dropdown-list"],this.props.children)):void 0)}}),l=e.createClass({_timeSince:function(e){var t,n,r,i,s,o,u,a,f,l;t=+(new Date)-e;if(t<=3e4)n="seconds";else if(3e4<t&&t<=6e4)n="less than a minute";else{f=[["minute",6e4,36e5],["hour",36e5,864e5],["day",864e5,Infinity]];for(u=0,a=f.length;u<a;u++)l=f[u],s=l[0],i=l[1],r=l[2],i<t&&t<=r&&(o=Math.floor(t/i),n=""+o+" "+s,o>1&&(n+="s"))}return n},componentDidMount:function(){return this._interval=setInterval(function(e){return function(){return e.forceUpdate()}}(this),1e4)},componentWillUnmount:function(){return clearInterval(this._interval)},render:function(){return _span([],this._timeSince(this.props.date))}}),i=e.createClass({getInitialState:function(){return{dragFromIndex:null,dragToIndex:null,hoveredId:null}},_addDropTargetToLessons:function(e){var t;return t=e.slice(),this.state.dragToIndex!=null&&t.splice(this.state.dragToIndex,0,_div(["sidebar-lesson-drop-target"])),t},_draggingSomeLesson:function(){return this.state.dragFromIndex!=null},_renderLesson:function(e,t){var n,r;return n=t<this.props.currentLessonIndex,r=t===this.props.currentLessonIndex,a({key:e.id,title:e.title,isAccessible:e.isAccessible,gadgets:e.gadgets,hovered:this.state.hoveredId===e.id,sectionGadgetType:this.props.sectionGadgetType,hasCompletedLesson:n&&!this._draggingSomeLesson(),isCurrentLesson:r&&!this._draggingSomeLesson(),dragging:t===this.state.dragFromIndex,currentGadgetIndex:this.props.currentGadgetIndex,editable:this.props.editable,onClick:function(e){return function(){return e.props.onClickLesson(t)}}(this),onClickSection:function(e){return function(n){return e.props.onClickSection(t,n)}}(this),onChangeTitle:function(e){return function(n){return e.props.onChangeLessonTitle(t,n)}}(this),onDelete:function(e){return function(){return e.props.onLessonDelete(t)}}(this),onDragStart:function(e){return function(){return e.setState({dragFromIndex:t})}}(this),onDragMove:function(e){return function(n){if(e.state.dragFromIndex==null)return;return e.setState({dragToIndex:t+(n?1:0)})}}(this),onDragEnd:function(e){return function(){var t,n;if(e.state.dragFromIndex==null)return;return t=e.props.course.lessons[e.state.dragFromIndex].id,n=e.state.dragToIndex,n>e.state.dragFromIndex&&n--,e.props.onLessonMove(t,n),e.setState({dragFromIndex:null,dragToIndex:null})}}(this),onHoverStart:function(t){return function(){return t.setState({hoveredId:e.id})}}(this),onHoverEnd:function(e){return function(){return e.setState({hoveredId:null})}}(this)})},_addLesson:function(e){return e.preventDefault(),this.props.onLessonAdd()},render:function(){return _div(["sidebar"],_div(["sidebar-course-title-container"],s({title:this.props.course.title,onClick:this.props.onClickCourseTitle,onChange:this.props.onChangeCourseTitle,editable:this.props.editable}),this.props.editable?u({},_div([],_b([],"view as learner")),_div([],_a([{target:"_blank",href:this.props.siteBaseUrl+"/c/"+this.props.course.id+"/learn"}],"this revision")),this.props.course.isPublished?_div([],_a([{target:"_blank",href:this.props.siteBaseUrl+"/c/"+this.props.course.id+"/learn?revision=true"}],"published course")):void 0):void 0),_div(["sidebar-body","custom-scrollbar",this._draggingSomeLesson()?"sidebar-dragging-some-lesson":void 0,{style:{position:"relative"}}],_div([],this._addDropTargetToLessons(this.props.course.lessons.map(this._renderLesson))),this.props.editable?_div(["sidebar-lesson"],_a(["sidebar-add-lesson",{onClick:this._addLesson}],"Add a lesson")):void 0),this.props.editable?_div(["sidebar-footer"],_div(["sidebar-last-saved"],l({date:this.props.lastSavedDateTime})),this.props.contributorsComponent?_div(["sidebar-contributors"],this.props.contributorsComponent):void 0):void 0)},componentDidMount:function(){if(!this.getDOMNode().offsetParent)return console.warn("Invariant violation: SidebarCourseComponent has no offsetParent, probably not attached to the DOM yet")}})})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("views/sidebar/author",["jquery","marionette","mediator","state/position","./sidebar_course_component","models/settings","plugins/tracker","react","react-backbone","react-coffeescript-glue","plugins/backbone.move"],function(e,n,r,i,s,o,u,a){var f,l,c;return c=a.createClass({componentDidMount:function(){return this._contribRegion=new n.Region({el:this.getDOMNode()}),this.props.mediator.on("collab:populate:contributorsRegion",this._onPopulateContributors)},componentWillUnmount:function(){return this.props.mediator.off("collab:populate:contributorsRegion",this._onPopulateContributors),this._contribRegion.close()},render:function(){return _div([])},_onPopulateContributors:function(e){return this._contribRegion.show(e)}}),l=a.createClass({mixins:[a.BackboneMixin("course"),a.BackboneMixin("currentPosition")],getInitialState:function(){return{lastSavedTime:+(new Date)}},componentDidMount:function(){return this.props.course.lessons.on("add remove reset sort change",function(){return this.forceUpdate()},this),e(document).on("ajaxComplete",this._onAjaxComplete),this.props.mediator.trigger("collab:player:authorSideBar:ready"),this._ensureLesson()},componentWillReceiveProps:function(e){if(this.props.course.lessons!==e.course.lessons)return this.props.course.lessons.off(null,null,this),e.course.lessons.on("add remove reset sort change",function(){return this.forceUpdate()},this)},componentWillUnmount:function(){return this.props.course.lessons.off(null,null,this),e(document).off("ajaxComplete",this._onAjaxComplete)},_onAjaxComplete:function(){return this.setState({lastSavedTime:+(new Date)})},_ensureLesson:function(e){return e==null&&(e=function(){}),this.props.course.lessons.length===0?this.props.course.lessons.create({},{success:e}):e()},render:function(){var e,t,n,r,i,o,a,f,l;r=this.props.course.lessons.get(this.props.currentPosition.get("lessonCid")),r&&(i=this.props.course.lessons.indexOf(r),t=r.gadgets.get(this.props.currentPosition.get("gadgetCid")),n=r.gadgets.indexOf(t)),e=this.props.course.toJSON({lessons:!0,gadgets:!0}),l=e.lessons;for(a=0,f=l.length;a<f;a++)o=l[a],o.isAccessible=!0;return s({course:e,currentLessonIndex:i,currentGadgetIndex:n,sectionGadgetType:"versal/header",editable:!0,lastSavedDateTime:this.state.lastSavedTime,contributorsComponent:c({mediator:this.props.mediator}),siteBaseUrl:this.props.siteBaseUrl,onClickCourseTitle:function(e){return function(){return e.props.mediator.trigger("parent:notify",{event:"publishCourse"})}}(this),onChangeCourseTitle:function(e){return function(t){return e.props.course.set({title:t}),e.props.course.debouncedSave()}}(this),onClickLesson:function(e){return function(t){return e.props.mediator.trigger("navigate:lesson",t+1)}}(this),onClickSection:function(e){return function(t,n){return e.props.mediator.trigger("navigate:gadget",t+1,n+1)}}(this),onChangeLessonTitle:function(e){return function(t,n){return o=e.props.course.lessons.at(t),o.set({title:n}),o.debouncedSave()}}(this),onLessonDelete:function(e){return function(t){return o=e.props.course.lessons.at(t),o.destroy(),e.props.mediator.trigger("lesson:deleted",o),u.track("Removed lesson",{lessonId:o.id,courseId:e.props.course.id}),e._ensureLesson(function(){return e.props.mediator.trigger("navigate:lesson",null)})}}(this),onLessonMove:function(e){return function(t,n){var r;return r=e.props.course.lessons.get(t),e.props.course.lessons.move(r,n)}}(this),onLessonAdd:function(e){return function(){return e.props.course.lessons.create({},{success:function(t){var n;return t.set("isAccessible",!0),n=e.props.course.lessons.indexOf(t),u.track("Added lesson",{lessonId:t.id,courseId:e.props.course.id}),e.props.mediator.trigger("navigate:lesson",n+1)}})}}(this)})}}),f=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.className="spec-author-sidebar",n.prototype.template=function(){return""},n.prototype.onShow=function(){var e;return this.$el.css("height","100%"),e=l({course:this.model,currentPosition:i,siteBaseUrl:o.get("site"),mediator:r}),a.renderComponent(e,this.el)},n.prototype.onClose=function(){return a.unmountComponentAtNode(this.el)},n}(n.ItemView)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("views/sidebar/learner",["marionette","mediator","state/position","./sidebar_course_component","react","react-backbone","react-coffeescript-glue"],function(e,n,r,i,s){var o,u;return u=s.createClass({mixins:[s.BackboneMixin("course"),s.BackboneMixin("currentPosition")],render:function(){var e,t,r,s;return r=this.props.course.lessons.get(this.props.currentPosition.get("lessonCid")),r&&(s=this.props.course.lessons.indexOf(r),e=r.gadgets.get(this.props.currentPosition.get("gadgetCid")),t=r.gadgets.indexOf(e)),i({course:this.props.course.toJSON({lessons:!0,gadgets:!0}),currentLessonIndex:s,currentGadgetIndex:t,sectionGadgetType:"versal/header",onClickCourseTitle:function(){return n.trigger("parent:notify",{event:"publishCourse"})},onClickLesson:function(e){return n.trigger("navigate:lesson",e+1)},onClickSection:function(e,t){return n.trigger("navigate:gadget",e+1,t+1)}})}}),o=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.className="spec-learner-sidebar",n.prototype.template=function(){return""},n.prototype.onShow=function(){return this.$el.css("height","100%"),s.renderComponent(u({course:this.model,currentPosition:r}),this.el)},n.prototype.onClose=function(){return s.unmountComponentAtNode(this.el)},n}(e.ItemView)})}.call(this),function(){n("views/tray/tray_slider",["underscore","react","mediator","react-coffeescript-glue"],function(e,t,n){var r,i,s;return i=72,r=t.addons.CSSTransitionGroup,s=t.createClass({propTypes:{scrollIndex:t.PropTypes.number,itemsPerRow:t.PropTypes.number},getInitialState:function(){return{scrollIndex:0,itemsPerRow:10}},componentDidMount:function(){return n.on("tray:catalog:changed",function(e){return function(){return e.setState({scrollIndex:0})}}(this))},_scrollNext:function(){var e,t;return e=this.props.children.length,t=Math.min(e-1,this.state.scrollIndex+this.state.itemsPerRow),this.setState({scrollIndex:t})},_scrollPrev:function(){var e;return e=Math.max(0,this.state.scrollIndex-this.props.itemsPerRow),this.setState({scrollIndex:e})},_scrollPositionStyle:function(){var e;return e="translateX(-"+this.state.scrollIndex*i+"px)",{style:{transform:e,WebkitTransform:e,MsTransform:e,MozTransform:e,OTransform:e}}},render:function(){var e,t;return e=this.state.scrollIndex===0,t=this.state.scrollIndex+this.props.itemsPerRow>=this.props.children.length,_div(["tray-slider-container"],_div(["tray-slider"],_div(["tray-gadgets-scroller"],_div(["prev-arrow",e?"invisible-tray-arrow":void 0,{onClick:this._scrollPrev}],_i(["icon-caret-left"])),r({transitionName:"tray-gadgets-animation"},_div(["tray-gadgets",this._scrollPositionStyle()],this.props.children)),_div(["next-arrow",t?"invisible-tray-arrow":void 0,{onClick:this._scrollNext}],_i(["icon-caret-right"])))))}})})}.call(this),function(){n("views/gadget_info_overview",["react","models/settings"],function(e,t){var n;return n=e.createClass({propTypes:{title:e.PropTypes.string,description:e.PropTypes.string,version:e.PropTypes.string,exampleUrl:e.PropTypes.string,documentationUrl:e.PropTypes.string,onMouseEnter:e.PropTypes.func,onMouseLeave:e.PropTypes.func,onSetExpanded:e.PropTypes.func,exampleAvailable:e.PropTypes.bool,expanded:e.PropTypes.bool},render:function(){var t,n;return t="gadget-info-overview-tooltip",this.props.expanded&&(t+=" expanded"),n="",this.props.tooltipOffsetLeft&&(n=this.props.tooltipOffsetLeft+"px"),e.DOM.div({className:t,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},e.DOM.div({className:"tooltip-arrow-bottom",style:{left:n}}),e.DOM.div({className:"gadget-info-overview"},e.DOM.div({className:"gadget-info-overview-top-row"},e.DOM.div({className:"gadget-info-overview-title"},this.props.title),e.DOM.div({className:"gadget-info-overview-version"},this.props.version)),e.DOM.div({className:"gadget-info-overview-description"},this.props.description),e.DOM.div({className:"gadget-info-overview-bottom-row"},this.props.documentationUrl?e.DOM.a({className:"gadget-info-more-info-link",href:this.props.documentationUrl,target:"_blank"},"more info..."):void 0,this.props.exampleUrl&&!this.props.expanded&&this.props.exampleAvailable?e.DOM.a({className:"gadget-info-show-more-link",onClick:function(e){return function(t){return t.preventDefault(),t.stopPropagation(),e.props.onSetExpanded(!e.props.expanded)}}(this)},"see example"):void 0),this.props.expanded?e.DOM.iframe({className:"gadget-info-example-iframe",src:this.props.exampleUrl+"?singleLesson=true&embed=true&display-footer=false",scrolling:"no"}):void 0))}})})}.call(this),!function(e,t,r,i){function s(e,t,n){return setTimeout(c(e,n),t)}function o(e,t,n){return Array.isArray(e)?(u(e,n[t],n),!0):!1}function u(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==i)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function a(e,t,n){for(var r=Object.keys(t),s=0;s<r.length;)(!n||n&&e[r[s]]===i)&&(e[r[s]]=t[r[s]]),s++;return e}function f(e,t){return a(e,t,!0)}function l(e,t,n){var r,i=t.prototype;r=e.prototype=Object.create(i),r.constructor=e,r._super=i,n&&a(r,n)}function c(e,t){return function(){return e.apply(t,arguments)}}function h(e,t){return typeof e==ct?e.apply(t?t[0]||i:i,t):e}function p(e,t){return e===i?t:e}function d(e,t,n){u(y(t),function(t){e.addEventListener(t,n,!1)})}function v(e,t,n){u(y(t),function(t){e.removeEventListener(t,n,!1)})}function m(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function g(e,t){return e.indexOf(t)>-1}function y(e){return e.trim().split(/\s+/g)}function b(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function w(e){return Array.prototype.slice.call(e,0)}function E(e,t,n){for(var r=[],i=[],s=0;s<e.length;){var o=t?e[s][t]:e[s];b(i,o)<0&&r.push(e[s]),i[s]=o,s++}return n&&(r=t?r.sort(function(e,n){return e[t]>n[t]}):r.sort()),r}function S(e,t){for(var n,r,s=t[0].toUpperCase()+t.slice(1),o=0;o<ft.length;){if(n=ft[o],r=n?n+s:t,r in e)return r;o++}return i}function x(){return vt++}function T(e){var t=e.ownerDocument;return t.defaultView||t.parentWindow}function N(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){h(e.options.enable,[e])&&n.handler(t)},this.init()}function C(e){var t,n=e.options.inputClass;return new(t=n?n:yt?q:bt?z:gt?X:I)(e,k)}function k(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,s=t&Nt&&r-i===0,o=t&(kt|Lt)&&r-i===0;n.isFirst=!!s,n.isFinal=!!o,s&&(e.session={}),n.eventType=t,L(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function L(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=M(t)),i>1&&!n.firstMultiple?n.firstMultiple=M(t):1===i&&(n.firstMultiple=!1);var s=n.firstInput,o=n.firstMultiple,u=o?o.center:s.center,a=t.center=_(r);t.timeStamp=dt(),t.deltaTime=t.timeStamp-s.timeStamp,t.angle=B(u,a),t.distance=H(u,a),A(n,t),t.offsetDirection=P(t.deltaX,t.deltaY),t.scale=o?F(o.pointers,r):1,t.rotation=o?j(o.pointers,r):0,O(n,t);var f=e.element;m(t.srcEvent.target,f)&&(f=t.srcEvent.target),t.target=f}function A(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},s=e.prevInput||{};(t.eventType===Nt||s.eventType===kt)&&(i=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}function O(e,t){var n,r,s,o,u=e.lastInterval||t,a=t.timeStamp-u.timeStamp;if(t.eventType!=Lt&&(a>Tt||u.velocity===i)){var f=u.deltaX-t.deltaX,l=u.deltaY-t.deltaY,c=D(a,f,l);r=c.x,s=c.y,n=pt(c.x)>pt(c.y)?c.x:c.y,o=P(f,l),e.lastInterval=t}else n=u.velocity,r=u.velocityX,s=u.velocityY,o=u.direction;t.velocity=n,t.velocityX=r,t.velocityY=s,t.direction=o}function M(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:ht(e.pointers[n].clientX),clientY:ht(e.pointers[n].clientY)},n++;return{timeStamp:dt(),pointers:t,center:_(t),deltaX:e.deltaX,deltaY:e.deltaY}}function _(e){var t=e.length;if(1===t)return{x:ht(e[0].clientX),y:ht(e[0].clientY)};for(var n=0,r=0,i=0;t>i;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:ht(n/t),y:ht(r/t)}}function D(e,t,n){return{x:t/e||0,y:n/e||0}}function P(e,t){return e===t?At:pt(e)>=pt(t)?e>0?Ot:Mt:t>0?_t:Dt}function H(e,t,n){n||(n=jt);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function B(e,t,n){n||(n=jt);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,r)/Math.PI}function j(e,t){return B(t[1],t[0],Ft)-B(e[1],e[0],Ft)}function F(e,t){return H(t[0],t[1],Ft)/H(e[0],e[1],Ft)}function I(){this.evEl=qt,this.evWin=Rt,this.allow=!0,this.pressed=!1,N.apply(this,arguments)}function q(){this.evEl=Wt,this.evWin=Xt,N.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function R(){this.evTarget=$t,this.evWin=Jt,this.started=!1,N.apply(this,arguments)}function U(e,t){var n=w(e.touches),r=w(e.changedTouches);return t&(kt|Lt)&&(n=E(n.concat(r),"identifier",!0)),[n,r]}function z(){this.evTarget=Qt,this.targetIds={},N.apply(this,arguments)}function W(e,t){var n=w(e.touches),r=this.targetIds;if(t&(Nt|Ct)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,s,o=w(e.changedTouches),u=[],a=this.target;if(s=n.filter(function(e){return m(e.target,a)}),t===Nt)for(i=0;i<s.length;)r[s[i].identifier]=!0,i++;for(i=0;i<o.length;)r[o[i].identifier]&&u.push(o[i]),t&(kt|Lt)&&delete r[o[i].identifier],i++;return u.length?[E(s.concat(u),"identifier",!0),u]:void 0}function X(){N.apply(this,arguments);var e=c(this.handler,this);this.touch=new z(this.manager,e),this.mouse=new I(this.manager,e)}function V(e,t){this.manager=e,this.set(t)}function $(e){if(g(e,nn))return nn;var t=g(e,rn),n=g(e,sn);return t&&n?rn+" "+sn:t||n?t?rn:sn:g(e,tn)?tn:en}function J(e){this.id=x(),this.manager=null,this.options=f(e||{},this.defaults),this.options.enable=p(this.options.enable,!0),this.state=on,this.simultaneous={},this.requireFail=[]}function K(e){return e&cn?"cancel":e&fn?"end":e&an?"move":e&un?"start":""}function Q(e){return e==Dt?"down":e==_t?"up":e==Ot?"left":e==Mt?"right":""}function G(e,t){var n=t.manager;return n?n.get(e):e}function Y(){J.apply(this,arguments)}function Z(){Y.apply(this,arguments),this.pX=null,this.pY=null}function et(){Y.apply(this,arguments)}function tt(){J.apply(this,arguments),this._timer=null,this._input=null}function nt(){Y.apply(this,arguments)}function rt(){Y.apply(this,arguments)}function it(){J.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function st(e,t){return t=t||{},t.recognizers=p(t.recognizers,st.defaults.preset),new ot(e,t)}function ot(e,t){t=t||{},this.options=f(t,st.defaults),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.element=e,this.input=C(this),this.touchAction=new V(this,this.options.touchAction),ut(this,!0),u(t.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function ut(e,t){var n=e.element;u(e.options.cssProps,function(e,r){n.style[S(n.style,r)]=t?e:""})}function at(e,n){var r=t.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=n,n.target.dispatchEvent(r)}var ft=["","webkit","moz","MS","ms","o"],lt=t.createElement("div"),ct="function",ht=Math.round,pt=Math.abs,dt=Date.now,vt=1,mt=/mobile|tablet|ip(ad|hone|od)|android/i,gt="ontouchstart"in e,yt=S(e,"PointerEvent")!==i,bt=gt&&mt.test(navigator.userAgent),wt="touch",Et="pen",St="mouse",xt="kinect",Tt=25,Nt=1,Ct=2,kt=4,Lt=8,At=1,Ot=2,Mt=4,_t=8,Dt=16,Pt=Ot|Mt,Ht=_t|Dt,Bt=Pt|Ht,jt=["x","y"],Ft=["clientX","clientY"];N.prototype={handler:function(){},init:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(T(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(T(this.element),this.evWin,this.domHandler)}};var It={mousedown:Nt,mousemove:Ct,mouseup:kt},qt="mousedown",Rt="mousemove mouseup";l(I,N,{handler:function(e){var t=It[e.type];t&Nt&&0===e.button&&(this.pressed=!0),t&Ct&&1!==e.which&&(t=kt),this.pressed&&this.allow&&(t&kt&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:St,srcEvent:e}))}});var Ut={pointerdown:Nt,pointermove:Ct,pointerup:kt,pointercancel:Lt,pointerout:Lt},zt={2:wt,3:Et,4:St,5:xt},Wt="pointerdown",Xt="pointermove pointerup pointercancel";e.MSPointerEvent&&(Wt="MSPointerDown",Xt="MSPointerMove MSPointerUp MSPointerCancel"),l(q,N,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=Ut[r],s=zt[e.pointerType]||e.pointerType,o=s==wt,u=b(t,e.pointerId,"pointerId");i&Nt&&(0===e.button||o)?0>u&&(t.push(e),u=t.length-1):i&(kt|Lt)&&(n=!0),0>u||(t[u]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:s,srcEvent:e}),n&&t.splice(u,1))}});var Vt={touchstart:Nt,touchmove:Ct,touchend:kt,touchcancel:Lt},$t="touchstart",Jt="touchstart touchmove touchend touchcancel";l(R,N,{handler:function(e){var t=Vt[e.type];if(t===Nt&&(this.started=!0),this.started){var n=U.call(this,e,t);t&(kt|Lt)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:wt,srcEvent:e})}}});var Kt={touchstart:Nt,touchmove:Ct,touchend:kt,touchcancel:Lt},Qt="touchstart touchmove touchend touchcancel";l(z,N,{handler:function(e){var t=Kt[e.type],n=W.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:wt,srcEvent:e})}}),l(X,N,{handler:function(e,t,n){var r=n.pointerType==wt,i=n.pointerType==St;if(r)this.mouse.allow=!1;else if(i&&!this.mouse.allow)return;t&(kt|Lt)&&(this.mouse.allow=!0),this.callback(e,t,n)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Gt=S(lt.style,"touchAction"),Yt=Gt!==i,Zt="compute",en="auto",tn="manipulation",nn="none",rn="pan-x",sn="pan-y";V.prototype={set:function(e){e==Zt&&(e=this.compute()),Yt&&(this.manager.element.style[Gt]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return u(this.manager.recognizers,function(t){h(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),$(e.join(" "))},preventDefaults:function(e){if(!Yt){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var r=this.actions,i=g(r,nn),s=g(r,sn),o=g(r,rn);return i||s&&n&Pt||o&&n&Ht?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var on=1,un=2,an=4,fn=8,ln=fn,cn=16,hn=32;J.prototype={defaults:{},set:function(e){return a(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(o(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=G(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return o(e,"dropRecognizeWith",this)?this:(e=G(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(o(e,"requireFailure",this))return this;var t=this.requireFail;return e=G(e,this),-1===b(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(o(e,"dropRequireFailure",this))return this;e=G(e,this);var t=b(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(n.options.event+(t?K(r):""),e)}var n=this,r=this.state;fn>r&&t(!0),t(),r>=fn&&t(!0)},tryEmit:function(e){return this.canEmit()?this.emit(e):void (this.state=hn)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(hn|on)))return!1;e++}return!0},recognize:function(e){var t=a({},e);return h(this.options.enable,[this,t])?(this.state&(ln|cn|hn)&&(this.state=on),this.state=this.process(t),void (this.state&(un|an|fn|cn)&&this.tryEmit(t))):(this.reset(),void (this.state=hn))},process:function(){},getTouchAction:function(){},reset:function(){}},l(Y,J,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=t&(un|an),i=this.attrTest(e);return r&&(n&Lt||!i)?t|cn:r||i?n&kt?t|fn:t&un?t|an:un:hn}}),l(Z,Y,{defaults:{event:"pan",threshold:10,pointers:1,direction:Bt},getTouchAction:function(){var e=this.options.direction,t=[];return e&Pt&&t.push(sn),e&Ht&&t.push(rn),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,s=e.deltaX,o=e.deltaY;return i&t.direction||(t.direction&Pt?(i=0===s?At:0>s?Ot:Mt,n=s!=this.pX,r=Math.abs(e.deltaX)):(i=0===o?At:0>o?_t:Dt,n=o!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return Y.prototype.attrTest.call(this,e)&&(this.state&un||!(this.state&un)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Q(e.direction);t&&this.manager.emit(this.options.event+t,e),this._super.emit.call(this,e)}}),l(et,Y,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[nn]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&un)},emit:function(e){if(this._super.emit.call(this,e),1!==e.scale){var t=e.scale<1?"in":"out";this.manager.emit(this.options.event+t,e)}}}),l(tt,J,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[en]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!r||!n||e.eventType&(kt|Lt)&&!i)this.reset();else if(e.eventType&Nt)this.reset(),this._timer=s(function(){this.state=ln,this.tryEmit()},t.time,this);else if(e.eventType&kt)return ln;return hn},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===ln&&(e&&e.eventType&kt?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=dt(),this.manager.emit(this.options.event,this._input)))}}),l(nt,Y,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[nn]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&un)}}),l(rt,Y,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Pt|Ht,pointers:1},getTouchAction:function(){return Z.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(Pt|Ht)?t=e.velocity:n&Pt?t=e.velocityX:n&Ht&&(t=e.velocityY),this._super.attrTest.call(this,e)&&n&e.direction&&e.distance>this.options.threshold&&pt(t)>this.options.velocity&&e.eventType&kt},emit:function(e){var t=Q(e.direction);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),l(it,J,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[tn]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),e.eventType&Nt&&0===this.count)return this.failTimeout();if(r&&i&&n){if(e.eventType!=kt)return this.failTimeout();var o=this.pTime?e.timeStamp-this.pTime<t.interval:!0,u=!this.pCenter||H(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,u&&o?this.count+=1:this.count=1,this._input=e;var a=this.count%t.taps;if(0===a)return this.hasRequireFailures()?(this._timer=s(function(){this.state=ln,this.tryEmit()},t.interval,this),un):ln}return hn},failTimeout:function(){return this._timer=s(function(){this.state=hn},this.options.interval,this),hn},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ln&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),st.VERSION="2.0.4",st.defaults={domEvents:!1,touchAction:Zt,enable:!0,inputTarget:null,inputClass:null,preset:[[nt,{enable:!1}],[et,{enable:!1},["rotate"]],[rt,{direction:Pt}],[Z,{direction:Pt},["swipe"]],[it],[it,{event:"doubletap",taps:2},["tap"]],[tt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var pn=1,dn=2;ot.prototype={set:function(e){return a(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?dn:pn},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,r=this.recognizers,i=t.curRecognizer;(!i||i&&i.state&ln)&&(i=t.curRecognizer=null);for(var s=0;s<r.length;)n=r[s],t.stopped===dn||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&n.state&(un|an|fn)&&(i=t.curRecognizer=n),s++}},get:function(e){if(e instanceof J)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(o(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(o(e,"remove",this))return this;var t=this.recognizers;return e=this.get(e),t.splice(b(t,e),1),this.touchAction.update(),this},on:function(e,t){var n=this.handlers;return u(y(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this},off:function(e,t){var n=this.handlers;return u(y(e),function(e){t?n[e].splice(b(n[e],t),1):delete n[e]}),this},emit:function(e,t){this.options.domEvents&&at(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&ut(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},a(st,{INPUT_START:Nt,INPUT_MOVE:Ct,INPUT_END:kt,INPUT_CANCEL:Lt,STATE_POSSIBLE:on,STATE_BEGAN:un,STATE_CHANGED:an,STATE_ENDED:fn,STATE_RECOGNIZED:ln,STATE_CANCELLED:cn,STATE_FAILED:hn,DIRECTION_NONE:At,DIRECTION_LEFT:Ot,DIRECTION_RIGHT:Mt,DIRECTION_UP:_t,DIRECTION_DOWN:Dt,DIRECTION_HORIZONTAL:Pt,DIRECTION_VERTICAL:Ht,DIRECTION_ALL:Bt,Manager:ot,Input:N,TouchAction:V,TouchInput:z,MouseInput:I,PointerEventInput:q,TouchMouseInput:X,SingleTouchInput:R,Recognizer:J,AttrRecognizer:Y,Tap:it,Pan:Z,Swipe:rt,Pinch:et,Rotate:nt,Press:tt,on:d,off:v,each:u,merge:f,extend:a,inherit:l,bindFn:c,prefixed:S}),typeof n==ct&&n.amd?n("hammerjs",[],function(){return st}):"undefined"!=typeof module&&module.exports?module.exports=st:e[r]=st}(window,document,"Hammer"),function(){n("views/tray/item",["react","views/gadget_draggable","views/gadget_info_overview","views/tether","mediator","hammerjs","react-coffeescript-glue"],function(e,t,n,r,i,s){var o;return o=e.createClass({propTypes:{gadgetProject:e.PropTypes.object,paletteModel:e.PropTypes.object,onShowModal:e.PropTypes.func,onDragStart:e.PropTypes.func,onDragEnd:e.PropTypes.func,onGadgetSelected:e.PropTypes.func,isRevertable:e.PropTypes.bool,onMouseEnter:e.PropTypes.func,onMouseLeave:e.PropTypes.func},render:function(){return _div(["tray-gadget"],t({gadgetManifest:this.props.gadgetProject,dragData:{action:"create",type:this.props.gadgetProject.shortType,manifestUrl:this.props.gadgetProject.manifestUrl},onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd},_div(["spec-tray-item",{onDoubleClick:this.selectGadget}],_div([{onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},"gadget-icon",{style:{backgroundImage:"url("+this.props.gadgetProject.distributedIconPath+")"}}]),_div(["tray-gadget-title"],this.props.gadgetProject.title),this.props.gadgetProject.isUpgradable?_div(["upgrade-icon spec-tray-item-upgrade",{onClick:function(e){return function(){return e.props.onShowModal(e.props.paletteModel)}}(this)}],_i(["arrow-icon icon-circle-arrow-up"])):this.props.isRevertable?_div(["revert-icon spec-tray-item-revert",{onClick:function(e){return function(){return e.props.onShowModal(e.props.paletteModel)}}(this)}],_i(["arrow-icon icon-circle-arrow-down"])):void 0)))},componentDidMount:function(){var e;return e=new s.Manager(this.getDOMNode()),e.add(new s.Tap({event:"doubleTap",taps:2})),e.on("doubleTap",function(e){return function(t){if("mouse"!==t.pointerType)return e.selectGadget()}}(this))},selectGadget:function(){return this.props.onGadgetSelected(this.props.gadgetProject.manifestUrl)}})})}.call(this),function(){n("views/tray/clipboard_item",["react","views/gadget_draggable"],function(e,t){var n;return n=e.createClass({render:function(){var n,r;return r=this.props.gadgetCollection.gadgets,n=function(){switch(!1){case r.length!==1:return"";case!(r.length>99):return"99+";default:return r.length}}(),e.DOM.div({className:"tray-gadget"},t({dragData:{action:"paste",gadgets:r},gadgetManifest:{title:this.props.gadgetCollection.title,author:"Gadget clipboard",version:"",distributedIconPath:this.props.gadgetCollection.icon},onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd},e.DOM.div({className:"gadget-icon clipboard-icon",style:{backgroundImage:"url("+this.props.gadgetCollection.icon+")"}},n)),_div(["tray-gadget-title"],this.props.gadgetCollection.title))}})})}.call(this),function(){n("views/tray/clipboard_controls",["underscore","react","mediator","react-coffeescript-glue"],function(e,t,n){var r;return r=t.createClass({propTypes:{onClipboardSelectionCut:t.PropTypes.func,onClipboardSelectionCopy:t.PropTypes.func,onClearClipboard:t.PropTypes.func,isClipboardSelected:t.PropTypes.bool,isSelectionAvailable:t.PropTypes.bool},render:function(){return _div(["clipboard-controls",this.props.isClipboardSelected?"visible":void 0],_div(["clipboard-control","clipboard-control-button",this.props.isSelectionAvailable?void 0:"clipboard-control-disabled",this.props.isSelectionAvailable?"clipboard-control-cut":void 0,{onClick:this.props.onClipboardSelectionCut}],"cut selection"),_div(["clipboard-control","clipboard-control-button",this.props.isSelectionAvailable?void 0:"clipboard-control-disabled",this.props.isSelectionAvailable?"clipboard-control-copy":void 0,{onClick:this.props.onClipboardSelectionCopy}],"copy selection"),_div(["clipboard-control","clipboard-control-button","clipboard-control-clear",{onClick:this.props.onClearClipboard}],"clear clipboard"))}})})}.call(this),function(){n("views/tray/tray_filters",["underscore","react","models/settings","react-coffeescript-glue"],function(e,t,n){var r;return r=t.createClass({propTypes:{catalogs:t.PropTypes.array.isRequired,onSelectTab:t.PropTypes.func.isRequired,onToggleTrayExpanded:t.PropTypes.func.isRequired,expanded:t.PropTypes.bool,selectedTab:t.PropTypes.string},getDefaultProps:function(){return{catalogs:[]}},getInitialState:function(){return{selectedTab:"core"}},render:function(){return _footer(["footer-container"],_div(["tray-filters"],e.map(this.props.catalogs,function(t){return _a(["tray-filter","spec-tray-filter",t===this.props.selectedTab&&this.props.expanded?"active":void 0,{onClick:e.partial(this.props.onSelectTab,t),key:t}],t)},this),_a(["tray-filter tray-toggle",this.props.expanded?"expanded":void 0,{onClick:this.props.onToggleTrayExpanded}],_i([this.props.expanded?"tray-toggle-collapse icon-double-angle-down":void 0,this.props.expanded?void 0:"tray-toggle-expand icon-double-angle-up"])),n.get("feature_selection")?_a(["tray-filter","tray-filter-right",this.props.selectedTab==="gadgetClipboard"&&this.props.expanded?"active":void 0,{onClick:e.partial(this.props.onSelectTab,"gadgetClipboard")}],"clipboard"):void 0))}})})}.call(this),function(){n("views/tray/version_modal",["react","views/loading_indicator","mediator","react-coffeescript-glue"],function(e,t,n){var r;return r=e.createClass({propTypes:{close:e.PropTypes.func,model:e.PropTypes.object,changeVersion:e.PropTypes.func,fromVersion:e.PropTypes.string,toVersion:e.PropTypes.string},getInitialState:function(){return{tryAgain:!1,showLoading:!1,doneLoading:!1,showError:!1}},onVersionChangeClick:function(){return this.setState({showLoading:!0,showError:!1}),this.props.changeVersion(this.props.model.type().split("@")[0],this.props.toVersion).done(this.onVersionChangeSuccess).fail(this.onVersionChangeFailed)},onVersionChangeSuccess:function(){return this.setState({doneLoading:!0,showLoading:!1,doneLoading:!0}),n.trigger("tray:gadgetUpdated",this.props.model)},onVersionChangeFailed:function(e){return function(){return e.setState({showError:!0,showLoading:!1,tryAgain:!0})}}(this),_isUpgradable:function(){var e,t;return e=this.props.fromVersion.split("."),t=this.props.toVersion.split("."),parseInt(e[0])<parseInt(t[0])?!0:parseInt(e[1])<parseInt(t[1])?!0:parseInt(e[2])<parseInt(t[2])?!0:!1},instructions:function(e){return this.state.tryAgain?"try again":this.state.doneLoading?"All instances of this gadget have been "+(e?"upgraded":"reverted"):e?"Upgrade each instance of this gadget in the current course":"Revert each instance of this gadget back to its previous version"},render:function(){var e,n,r;return e=this._isUpgradable(),n=e?"upgrade":"revert",_div([],_div(["gadget-version-modal modal"],_div(["instructions"],this.instructions(e)),_div(["gadget-info"],_div(["icon",r="background-image: url("+this.props.model.icon()+")"]),_div(["title"],this.props.model.get("title")),_div(["author"],this.props.model.get("author")),_div(["version"],""+this.props.fromVersion+" → "+this.props.toVersion)),this.state.showError?void 0:_div(["error-text"],"Gadget "+n+" failed, please check your connection and try again"),this.state.doneLoading?_div(["button-controls done-controls"],_button(["action",{onClick:this.props.close}],"okay")):_div(["button-controls"],_button(["version-change-cancel",{onClick:this.props.close}],"maybe later"),_button(["version-change-ok action",{onClick:this.onVersionChangeClick}],_span(["okay-text",this.state.showLoading?"invisible":void 0],n),this.state.showLoading?_div(["js-loading-indicator-region spinner"],t()):void 0))),_div(["modal-backdrop",{onClick:this.props.close}]))}})})}.call(this),function(){n("views/tray/tray_component",["underscore","react","models/settings","state/selection","views/render_in_body","views/tray/tray_slider","views/tray/item","views/tray/clipboard_item","views/tray/clipboard_controls","views/tray/tray_filters","views/tray/version_modal","views/gadget_info_overview","views/tether","react-coffeescript-glue"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p,d,v,m,g,y,b,w,E;return p="Select one or more gadgets to copy or cut. The clipboard will hold these gadgets so that you can add them in other places.",b=72,w=760,y=20,m=262,d=20,g=15,v=40,E=t.createClass({propTypes:{mediator:t.PropTypes.object.isRequired,trackToggleTray:t.PropTypes.func,trackCatalogClick:t.PropTypes.func,catalogs:t.PropTypes.object.isRequired,palette:t.PropTypes.object.isRequired},getDefaultProps:function(){return{catalogs:{},initialCatalog:"core"}},getInitialState:function(){var e,t,n,r,i;t=!0;if(typeof localStorage!="undefined"&&localStorage!==null?localStorage.hasOwnProperty("versalTrayExpanded"):void 0)t=localStorage.versalTrayExpanded==="true";return n=this.props.initialCatalog,t&&!((r=this.props.catalogs)!=null?(i=r.core)!=null?i.length:void 0:void 0)&&(n="sandbox"),e=localStorage.clipboardItems?JSON.parse(localStorage.clipboardItems):[],{selectedTab:n,previouslySelectedTab:n,expanded:t,activeModalComponent:null,clipboardItems:e,isSelectionAvailable:!1,gadgetInfoTooltipExpanded:!1}},componentDidMount:function(){return this.props.mediator.on("tray:gadget:dragstart",this._onGadgetDragStart),this.props.mediator.on("tray:gadget:dragend",this._onGadgetDragEnd),this.props.mediator.on("gadget:editing:start",this._onStartEditingGadget),this.props.mediator.on("gadget:editing:stop",this._onStopEditingGadget),r.on("clipboard:item:selected",this._onClipboardItemSelected),r.on("selection:empty",this._onClipboardSelectionEmpty),r.on("selection:clear",this._onClipboardSelectionClear),r.on("clipboard:item:add",this._onClipboardItemAdd)},_onClipboardItemSelected:function(){return this._selectTab("gadgetClipboard"),this._setTrayExpanded(!0),this.setState({isSelectionAvailable:!0})},_onClipboardSelectionClear:function(){return this.setState({isSelectionAvailable:!1})},_onClipboardSelectionEmpty:function(){return this._selectTab(this.state.previouslySelectedTab),this._setTrayExpanded(localStorage.versalTrayExpanded==="true"),this.setState({isSelectionAvailable:!1})},_onGadgetDragStart:function(){return this._setTrayExpanded(!1)},_onGadgetDragEnd:function(){return this._setTrayExpanded(!0)},_onStartEditingGadget:function(){return this._setTrayExpanded(!1)},_onStopEditingGadget:function(){return this._setTrayExpanded(!0)},_onClipboardItemAdd:function(e){var n;return n=t.addons.update(this.state.clipboardItems,{$push:[e]}),localStorage.clipboardItems=JSON.stringify(n),this.setState({clipboardItems:n})},_onClearClipboard:function(){return localStorage.clipboardItems=JSON.stringify([]),this.setState({clipboardItems:[]})},_toggleTrayExpanded:function(e){var t;return this._setTrayExpanded(e),localStorage.versalTrayExpanded=e,typeof (t=this.props).trackToggleTray=="function"?t.trackToggleTray(e):void 0},_setTrayExpanded:function(e){return this.setState({expanded:e})},_selectTab:function(e){var t;return this.props.mediator.trigger("tray:catalog:changed",e),this.setState({selectedTab:e}),typeof (t=this.props).trackCatalogClick=="function"?t.trackCatalogClick(e):void 0},onSelectTab:function(e){return this._selectTab(e),this._setTrayExpanded(!0),this.setState({previouslySelectedTab:e})},_showVersionModal:function(e){var t;return t={model:e,changeVersion:this.props.palette.changeVersion.bind(this.props.palette),fromVersion:typeof e.get=="function"?e.get("version"):void 0,toVersion:typeof e.get=="function"?e.get("latestVersion"):void 0,close:function(e){return function(){return e.setState({activeModalComponent:null})}}(this)},this.setState({activeModalComponent:l(t)})},_gadgetInfoExpandedTooltipOffsetLeft:function(){var e;return e=this.state.gadgetInfoTargetIndex*b+b/2+y,e-v},_gadgetInfoOverflowOffset:function(){var e,t;return this.state.gadgetInfoTooltipTarget?(e=((t=this.state.gadgetInfoTooltipTarget.getBoundingClientRect())!=null?t.left:void 0)+b/2-d/2,e<m/2?e-g:e>window.innerWidth-m/2?m-(window.innerWidth-e)+g:null):null},render:function(){var t;return this.state.selectedTab==="gadgetClipboard"?t=this._renderTrayClipboardItems():t=this._renderTrayGadgetItems(),_div([],_div(["expandable-tray",this.state.selectedTab==="gadgetClipboard"?"clipboard-controls-visible":void 0,this.state.expanded?"expandable-tray-expanded":void 0],a({isClipboardSelected:this.state.selectedTab==="gadgetClipboard",isSelectionAvailable:this.state.isSelectionAvailable,onClearClipboard:this._onClearClipboard,onClipboardSelectionCopy:function(e){return function(){return r.trigger("selection:add")}}(this),onClipboardSelectionCut:function(e){return function(){return r.trigger("selection:cut")}}(this)}),_div([{ref:"tetherTrayTarget"},"tether-tray-target"]),s({itemsPerRow:10},t),this.state.gadgetInfoTooltipProps&&n.get("feature_gadget_info")?this._renderGadgetInfo():void 0),f({catalogs:Object.keys(this.props.catalogs),selectedTab:this.state.selectedTab,expanded:this.state.expanded,onSelectTab:this.onSelectTab,onToggleTrayExpanded:e.partial(this._toggleTrayExpanded,!this.state.expanded)}),this.state.activeModalComponent?i({},this.state.activeModalComponent):void 0)},_renderTrayClipboardItems:function(){return this.state.clipboardItems.length===0?[_div(["empty-clipboard-copy"],p)]:this.state.clipboardItems.map(function(e){return function(t){return u({gadgetCollection:t,onDragStart:function(){return e.props.mediator.trigger("gadget:dragstart"),e.props.mediator.trigger("tray:gadget:dragstart")},onDragEnd:function(){return e.props.mediator.trigger("gadget:dragend"),e.props.mediator.trigger("tray:gadget:dragend")}})}}(this))},_renderTrayGadgetItems:function(){var t,n;return t=((n=this.props.catalogs[this.state.selectedTab])!=null?n.models:void 0)||[],t.map(function(t){return function(n,r){var i,s,u,a;return s=n.type().split("@")[0],a=t.props.palette.findByType(s),i=a?a.toJSON():n.toJSON(),u=a!=null?a.get("version"):void 0,o({key:i.id,paletteModel:a,gadgetProject:i,isRevertable:u&&u!==(a!=null?a.get("latestVersion"):void 0),onShowModal:t._showVersionModal,onMouseEnter:function(n){return t.showGadgetInfoTooltip(e.pick(i,"title","description","version","exampleUrl","documentationUrl"),n.target,r%10)},onMouseLeave:t.hideGadgetInfoTooltip,onDragStart:function(){return t._hideGadgetInfoTooltip(),t.props.mediator.trigger("gadget:dragstart"),t.props.mediator.trigger("tray:gadget:dragstart")},onDragEnd:function(){return t.props.mediator.trigger("gadget:dragend"),t.props.mediator.trigger("tray:gadget:dragend")},onGadgetSelected:function(e){return t.props.mediator.trigger("tray:gadgetSelected",e)}})}}(this))},_renderGadgetInfo:function(){var t,n,r;if(this.state.selectedTab!=="core")return;return this.state.gadgetInfoTooltipExpanded?(r="0px -"+v+"px",n=[{to:"window",pin:["left","right"]}]):(r="10px 0px",n=[{to:[g,0,window.innerWidth-g,0],pin:["left","right"]}]),t=window.innerWidth-w-2*v>0,h({attachment:"bottom center",targetAttachment:"top center",zIndex:26,offset:r,target:this.state.gadgetInfoTooltipExpanded?this.refs.tetherTrayTarget.getDOMNode():this.state.gadgetInfoTooltipTarget,constraints:n},_div([{onMouseEnter:function(e){return function(){return clearTimeout(e._hideGadgetInfoTooltipTimeout)}}(this),onMouseLeave:function(e){return function(){return e.hideGadgetInfoTooltip()}}(this)}],c(e.extend(this.state.gadgetInfoTooltipProps,{expanded:this.state.gadgetInfoTooltipExpanded,exampleAvailable:t,tooltipOffsetLeft:this.state.gadgetInfoTooltipExpanded?this._gadgetInfoExpandedTooltipOffsetLeft():this._gadgetInfoOverflowOffset(),onSetExpanded:function(e){return function(t){return e.setState({gadgetInfoTooltipExpanded:t}),setTimeout(function(){return clearTimeout(e._hideGadgetInfoTooltipTimeout)},1)}}(this)}))))},showGadgetInfoTooltip:function(e,t,n){var r,i;return clearTimeout(this._hideGadgetInfoTooltipTimeout),r=e,i={gadgetInfoTooltipProps:r,gadgetInfoTooltipTarget:t,gadgetInfoTargetIndex:n},n!==this.state.gadgetInfoTargetIndex&&(i.gadgetInfoTooltipExpanded=!1),this.setState(i)},hideGadgetInfoTooltip:function(){return clearTimeout(this._hideGadgetInfoTooltipTimeout),this._hideGadgetInfoTooltipTimeout=setTimeout(this._hideGadgetInfoTooltip,250)},_hideGadgetInfoTooltip:function(){return this.setState({gadgetInfoTooltipProps:null,gadgetInfoTooltipTarget:null,gadgetInfoTooltipExpanded:!1})}})})}.call(this),function(){n("templates/header",[],function(){return'<i class="toc-icon js-toggle-toc icon-reorder"></i>\n<span class="course-title"><%- title %></span>'})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("views/header",["marionette","templates/header","mediator"],function(e,n,r){var i;return i=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.template=_.template(n),i.prototype.className="player-header",i.prototype.events={"click .js-toggle-toc":"onToggleClick"},i.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render)},i.prototype.onToggleClick=function(e){return e.stopPropagation(),r.trigger("toc:toggle")},i}(e.ItemView)})}.call(this),function(){n("plugins/vs-sticky",["underscore","jquery"],function(e,t){var n,r;return r=["","-webkit-","-moz-","-ms-","-o-"],n=function(){function n(n){this.el=n,this.refresh=e.throttle(this.refresh.bind(this),10),this._current=null,this._stickyContainer=t('<div class="vs-sticky-container" />'),this.enable()}return n.prototype.selector=".js-sticky-header",n.prototype.enable=function(){return t(this.el).on("scroll",this.refresh)},n.prototype.disable=function(){return t(this.el).off("scroll",this.refresh)},n.prototype.refresh=function(){var t,n,r,i,s;return r=this.el.getBoundingClientRect().top,t=this.el.querySelectorAll(this.selector),t.length?(s=e.reduce(t,e.partial(this.findCurrent,r),null),n=s.current,i=s.next,this._sticky!==n&&this.setStickyHeader(n),this.adjustCurrent(r,n,i)):this.setStickyHeader(null)},n.prototype.findCurrent=function(e,t,n){return t==null&&(t={current:null,next:null}),t.next||(n.getBoundingClientRect().top<=e&&(t.current=n),t.current!==n&&(t.next=n)),t},n.prototype.setStickyHeader=function(n){var r,i,s;return this._sticky&&(t(this._sticky).css("visibility","visible"),this._sticky.dispatchEvent(new CustomEvent("unstuck",{bubbles:!0}))),this._sticky=n,n?(n.dispatchEvent(new CustomEvent("stuck",{bubbles:!0})),r=window.getComputedStyle(n),i=n.textContent||((s=n.querySelector("input"))!=null?s.value:void 0)||"",this._stickyContainer.text(i).css(e.pick(r,"color","fontSize","fontFamily","fontWeight","fontVariant")).appendTo(this.el),t(this._sticky).css("visibility","hidden")):this._stickyContainer.detach()},n.prototype.adjustCurrent=function(n,i,s){var o,u,a;if(!i)return;return u=((s!=null?s.getBoundingClientRect().top:void 0)||this.el.getBoundingClientRect().bottom)-n,o=u-i.getBoundingClientRect().height,a=o<=0?"translateY("+o+"px)":"none",t(this._stickyContainer).css(e.object(e.map(r,function(e){return[""+e+"transform",a]})))},n}()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};n("plugins/vs-element-seeing-observer",["jquery","underscore","mediator","state/position"],function(t,n,r,i){var s,o;return o="versal/header",s=function(){function r(r){this.el=r,this._observeCurrentSection=e(this._observeCurrentSection,this),this._viewportChanged=e(this._viewportChanged,this);if(!this.el)return;this._debouncedViewportChanged=n.debounce(this._viewportChanged,this._delay),t(this.el).on("scroll",this._debouncedViewportChanged),t(this.el).on("scroll",this._observeCurrentSection),t(window).on("resize",this._debouncedViewportChanged)}return r.prototype._viewportBottomOffset=28,r.prototype._delay=150,r.prototype.destroy=function(){return t(this.el).off("scroll",this._debouncedViewportChanged),t(this.el).off("scroll",this._observeCurrentSection),t(window).off("resize",this._debouncedViewportChanged)},r.prototype._viewportChanged=function(){var e;return e=this.el.querySelectorAll(".gadget"),n.each(e,function(e){return function(t){var n;if(t.hasAttribute("element-was-seen"))return;n=e._isInViewport(t,window.innerHeight);if(n)return t.dispatchEvent(new CustomEvent("elementWasSeen")),t.setAttribute("element-was-seen",1)}}(this))},r.prototype._isInViewport=function(e,t){var n,r;return n=t+10,r=e.getBoundingClientRect(),r.bottom<n},r.prototype._observeCurrentSection=function(e){var t,r,s;return s=this.el.getBoundingClientRect(),r=this.el.querySelectorAll(".gadget[data-type='"+o+"']"),t=null,n.each(r,function(e){if(e.getBoundingClientRect().top<=s.top)return t=e}),this.el.scrollTop>=this.el.scrollHeight-this.el.offsetHeight-this._viewportBottomOffset&&(t=n.last(r)),t?i.set("gadgetCid",t.getAttribute("data-cid")):i.unset("gadgetCid")},r}()})}.call(this),function(){n("templates/layout",[],function(){return'<div>\n  <header class="header-container js-header-container"></header>\n\n  <aside class="sidebar-container js-sidebar-container"></aside>\n\n  <div class="main-container js-main-container custom-scrollbar">\n    <div class="course-container js-course-container"></div>\n  </div>\n\n  <div class="tray-container js-tray-container"></div>\n\n  <footer class="js-footer-container"></footer>\n\n  <div class="dialogs"></div>\n  <div class="loading-container js-loading-container"></div>\n</div>'})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,r=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};n("views/player_layout",["marionette","jquery","mediator","models/settings","plugins/vs-sticky","plugins/vs-element-seeing-observer","templates/layout","views/loading"],function(t,n,i,s,o,u,a,f){var l,c;return l=1e3,c=function(t){function c(){return this.onGadgetEditingEnd=e(this.onGadgetEditingEnd,this),this.onGadgetEditingStart=e(this.onGadgetEditingStart,this),this.toggleSidebar=e(this.toggleSidebar,this),c.__super__.constructor.apply(this,arguments)}return r(c,t),c.prototype.template=a,c.prototype.regions={header:".js-header-container",sidebar:".js-sidebar-container",dialogs:".dialogs",courseContainer:".js-course-container",tray:".js-tray-container",loading:".js-loading-container"},c.prototype.ui={footer:".js-footer-container",mainContainer:".js-main-container"},c.prototype.events={click:"onClick"},c.prototype.initialize=function(){return this.listenTo(i,"toc:toggle",this.toggleSidebar),this.listenTo(i,"gadget:dragstart",function(){return this.$el.addClass("drag-in-progress")}),this.listenTo(i,"gadget:dragend",function(){return this.$el.removeClass("drag-in-progress")}),this.listenTo(i,"gadget:editing:start",this.onGadgetEditingStart),this.listenTo(i,"gadget:editing:stop",this.onGadgetEditingEnd),this.listenTo(i,"course:collab:open",function(){return this.$el.addClass("collab-connected")}),this.listenTo(i,"course:collab:close",function(){return this.$el.removeClass("collab-connected")}),this.listenTo(i,"lesson:allGadgetsRendered",function(){var e;return(e=this.loading.currentView)!=null?e.hide():void 0}),setTimeout(function(e){return function(){var t;return(t=e.loading.currentView)!=null?t.hide():void 0}}(this),l)},c.prototype.onRender=function(){var e,t;if(s.get("feature_stickyHeaders")!==!1)try{t=new o(this.ui.mainContainer.get(0)),this.listenTo(i,"stickyHeaders:refresh",t!=null?t.refresh.bind(t):void 0)}catch(n){e=n,console.warn("Sticky headers:",e)}return new u(this.ui.mainContainer.get(0)),this.loading.show(new f)},c.prototype.onClick=function(e){if(n(e.target).parents(".js-sidebar-container").length>0)return;return this.toggleSidebar(!1)},c.prototype.toggleSidebar=function(e){return this.$el.toggleClass("sidebar-expanded",e)},c.prototype.onGadgetEditingStart=function(){return this.$el.addClass("edit-in-progress"),this.toggleSidebar(!1)},c.prototype.onGadgetEditingEnd=function(){return this.$el.removeClass("edit-in-progress")},c}(t.Layout)})}.call(this),function(){n("views/error_overlay",["react"],function(e){var t;return t=e.createClass({propTypes:{title:e.PropTypes.string,description:e.PropTypes.string},render:function(){return e.DOM.div({className:"error-overlay-backdrop"},e.DOM.div({className:"error-content"},e.DOM.h2({className:"error-overlay-header"},this.props.title),e.DOM.p({className:"error-overlay-text"},this.props.description)))}})})}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};n("hardcoded_gadget_catalogs",["collections/gadget_projects","underscore"],function(t,n){var r,i,s,o;return i={core:["Section header","Text","Image","Video","Quiz","Categories","Short response","Deeper diagram","Map","Slideshow","Whiteboard","Expression","Data viewer","Essay","Survey","Markdown","References","Timeline","Typing test"],viewers:["Generic embed","Quizlet","Google Docs","Disqus","Learnosity","Sketchfab","Wolfram","Prezi","Microsoft OneDrive","Dropbox","Desmos","flowkey","Educreations","Sound","PDF","Word","Brainshark","Geogebra","ThingLink"]},s=function(e){var t,n,r,s;if(e.hidden)return"hidden";s=Object.keys(i);for(n=0,r=s.length;n<r;n++){t=s[n];if(i[t].some(function(t){return t===e.title}))return t}return"labs"},o=function(e){return function(t,n){var r,i;return r=e.indexOf(t.get("title")),i=e.indexOf(n.get("title")),r===i?0:0<=i&&i<r?1:i>=0&&r<0?1:-1}},r=function(){function r(e){this._gadgetsByCatalog=n.groupBy(e,s),this.core=this._buildCatalog("core"),this.viewers=this._buildCatalog("viewers"),this.labs=this._buildCatalog("labs"),this.hidden=this._buildCatalog("hidden")}return r.prototype._buildCatalog=function(r){var s;return s={},e.call(n.keys(i),r)>=0&&(s.comparator=o(i[r])),new t(this._gadgetsByCatalog[r],s)},r}()})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("combined_catalogue",["underscore","jquery","mediator","collections/gadget_projects","hardcoded_gadget_catalogs"],function(e,n,r,i,s){var o;return o=function(r){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,r),o.prototype.initialize=function(){return this.ready=new n.Deferred},o.prototype.getHiddenGadgets=function(t){var n,r;return n=t.authors.pluck("username"),r=this.hidden.select(function(t){return e.contains(n,t.get("username"))}),new i(r)},o.prototype.fetchAll=function(e){return e==null&&(e={}),this.approved=new i,this.sandbox=new i,n.when(this.approved.fetchApproved(),this.sandbox.fetchSandbox()).then(function(e){return function(){var t,n;return t=function(t,n){return e.add(n.models.map(function(e){return e.get("catalog")||e.set({catalog:t}),e}))},t("approved",e.approved),t("sandbox",e.sandbox),n=new s(e.approved.toJSON()),e.core=n.core,e.viewers=n.viewers,e.labs=n.labs,e.hidden=n.hidden,e.trigger("reset"),e.trigger("sync"),e.ready.resolve()}}(this))},o}(i)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("collections/gadgets",["backbone","underscore","models/gadget"],function(e,n,r){var i;return i=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.model=r,i.prototype.url=function(){if(this.lesson)return n.result(this.lesson,"url")+"/gadgets"},i.prototype.initialize=function(e,t){return this.lesson=t&&t.lesson?t.lesson:void 0},i}(e.Collection)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("models/lesson",["backbone","underscore","collections/gadgets"],function(e,n,r){var i;return i=function(e){function i(e,t){e==null&&(e={}),t==null&&(t={}),this.gadgets=new r([],{lesson:this}),t.parse=!0,this.debouncedSave=n.debounce(this.save.bind(this),1e3),i.__super__.constructor.call(this,e,t)}return t(i,e),i.prototype.defaults={title:"Untitled lesson",isActive:!1},i.prototype._locals=["isActive"],i.prototype.parse=function(e){if(!e)return;return e.gadgets&&this.gadgets.reset(e.gadgets,{parse:!0}),n.omit(e,"gadgets",this._locals)},i.prototype.toJSON=function(e){var t;t=n.clone(this.attributes);if(e!=null?e.gadgets:void 0)t.gadgets=this.gadgets.toJSON();return n.omit(t,this._locals)},i.prototype.url=function(){return this.id==null&&console.warn("Tried to get lesson URL while it doesn't have an ID yet"),i.__super__.url.apply(this,arguments)},i}(e.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("collections/lessons",["backbone","underscore","models/lesson"],function(e,n,r){var i;return i=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.model=r,i.prototype.url=function(){if(this.course)return n.result(this.course,"url")+"/lessons"},i.prototype.initialize=function(e,t){if(t!=null?!t.course:!void 0)throw new Error("Course reference is mandatory for the Lessons");return this.course=t.course},i}(e.Collection)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("collections/gadget_palette",["jquery","backbone","underscore","collections/gadget_projects"],function(e,n,r,i){var s;return s=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.initialize=function(e,t){t==null&&(t={});if(t!=null?t.course:void 0)return this.url=function(){return r.result(t.course,"url")+"/palette"}},i.prototype.upgrade=function(e,t){return this.changeVersion(e,null,t)},i.prototype.changeVersion=function(t,n,r){var i,s;return r==null&&(r={}),i=this.findByType(t),i?(s=i.url(),r.url||(r.url=s),n||(n=i.get("latestVersion")),i.save({version:n},r)):e.Deferred().reject("Gadget project not found")},i}(i)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};n("models/course",["backbone","underscore","collections/lessons","collections/gadget_palette"],function(e,n,r,i){var s;return s=function(s){function o(t,s){t==null&&(t={}),s==null&&(s={}),this.authors=new e.Collection,this.authors.url=function(e){return function(){return n.result(e,"url")+"/users"}}(this),this.lessons=new r([],{course:this}),this.progress=new e.Model,this.progress.isNew=function(){return!1},this.progress.url=function(e){return function(){return n.result(e,"url")+"/progress"}}(this),this.palette=new i([],{course:this}),this.debouncedSave=n.debounce(this.save.bind(this),1e3),s.parse=!0,e.Model.call(this,t,s)}return t(o,s),o.prototype.urlRoot="/courses",o.prototype.defaults={title:"Untitled course",isEditable:!1,shortDesc:"",longDesc:"",authorBio:"",tags:[],catalogs:[]},o.prototype.parse=function(e){return e.authors&&this.authors.set(e.authors,{parse:!0}),e.lessons&&this.lessons.set(e.lessons,{parse:!0}),e.palette&&this.palette.set(e.palette,{parse:!0}),e.currentPosition&&this.progress.set({lessonIndex:e.currentPosition.currentLesson}),n.omit(e,"lessons","authors","progress","palette")},o.prototype.toJSON=function(e){var t;return e==null&&(e={}),t=n.clone(this.attributes),t.isPublished=this._isPublished(),e.lessons&&(t.lessons=this.lessons.toJSON(e)),e.palette&&(t.palette=this.palette.toJSON(e)),t},o.prototype.validate=function(e,t){if(!e.title)return"Title must be not empty"},o.prototype.start=function(e){return e==null&&(e={}),e.attrs={},e.url=n.result(this,"url")+"/start",this.sync("create",this,e)},o.prototype.complete=function(e){return e==null&&(e={}),e.attrs={},e.url=n.result(this,"url")+"/completion",this.sync("update",this,e)},o.prototype.isStaged=function(){return n.contains(this.get("catalogs"),"staged")},o.prototype._isPublished=function(){return this.isStaged()||n.contains(this.get("catalogs"),"labs")},o.prototype.title=function(){return this.get("title")||"Untitled course"},o}(e.Model)})}.call(this),function(){n("templates/asset_picker",[],function(){return'<div class="assets-modal modal">\n  <div class="header">\n    <div class="modal-title">file picker</div>\n    <div class="modal-controls">\n      <button class="cancel js-close">cancel</button>\n      <button class="action js-use-file js-upload">use file</button>\n    </div>\n    <div class="clearfix"></div>\n  </div>\n  <div class="content">\n    <div class="preview-region">\n      <% if(allowUploading()) { %>\n        <div class="uploading-overlay">\n          <div class="uploading-spinner js-loading-indicator-region"></div>\n        </div>\n         <div class="choose-overlay">\n          <div class="drop-image"></div>\n          <div class="drop-blurb">\n            drag file here\n            <span class="click-blurb">or click to upload</span>\n          </div>\n          <div class="dropzone"></div>\n        </div>\n        <input class="hidden-uploader" type="file">\n      <% } %>\n      <div class="file-preview"></div>\n      <div class="status-message"></div>\n    </div>\n    <% if (getType() == "video") { %>\n      <input class="video-link" placeholder="paste YouTube, Vimeo or Wistia link" />\n    <% } %>\n  </div>\n</div>\n<div class="modal-backdrop"></div>'})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,r=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};n("views/modal",["jquery","marionette"],function(t,n){var i;return i=function(n){function i(){return this._onKeyDown=e(this._onKeyDown,this),i.__super__.constructor.apply(this,arguments)}return r(i,n),i.prototype.onClose=function(){return t(document).off("keydown",this._onKeyDown),this.remove()},i.prototype._onBackdropClick=function(){return this.close()},i.prototype._onModalClick=function(e){return e.stopPropagation()},i.prototype._onCloseModalClick=function(){return this.close()},i.prototype._onKeyDown=function(e){if(e.keyCode===27)return this.close()},i.prototype.onRender=function(){return t(document).on("keydown",this._onKeyDown)},i.prototype._prevent=function(e){return e.stopPropagation(),e.preventDefault()},i.prototype.events={click:"_onModalClick","click .js-close":"_onCloseModalClick","click .modal-backdrop":"_onBackdropClick"},i}(n.Layout)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,r=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};n("views/asset_picker/asset_picker",["jquery","underscore","mediator","plugins/tracker","marionette","templates/asset_picker","views/modal","models/asset","models/settings","views/react_view","views/loading_indicator"],function(t,n,i,s,o,u,a,f,l,c,h){var p;return p=function(i){function o(){return this.onUploadError=e(this.onUploadError,this),this.onAssetRefetchError=e(this.onAssetRefetchError,this),this.onAssetRefetch=e(this.onAssetRefetch,this),this.onUploadSuccess=e(this.onUploadSuccess,this),this.onDrop=e(this.onDrop,this),this.templateHelpers=e(this.templateHelpers,this),o.__super__.constructor.apply(this,arguments)}return r(o,i),o.prototype.template=n.template(u),o.prototype.templateHelpers=function(){return{getType:function(e){return function(){return e.type}}(this),allowUploading:function(e){return function(){return e.type!=="video"}}(this)}},o.prototype.initialize=function(e){this.options=e,t(window).on("dragenter dragexit dragover dragleave drop",this._prevent),this.type=this.options.type;if(!this.type)throw new Error("Asset type is required");return this.formats=this.type==="image"?["jpg","jpeg","png","gif"]:this.type==="video"?["mp4","ogg","webm","avi","mov"]:void 0},o.prototype.ui={preview:".preview-region",filePreview:".file-preview",uploading:".uploading-overlay",choose:".choose-overlay",status:".status-message",useButton:".js-use-file",hiddenUploader:".hidden-uploader",videoInput:".video-link"},o.prototype.events=n.extend({},o.prototype.events,{"click .choose-overlay":"onChooseClick","dragenter .dropzone":"onOverlayDragEnter","dragleave .dropzone":"onOverlayDragLeave","dragenter .preview-region":"onRegionDragEnter","dragexit .dropzone":"_prevent","dragover .dropzone":"_prevent","drop .dropzone":"onDrop","click .js-use-file":"onUseClick","input .video-link":"onVideoInputChange","paste .video-link":"onVideoInputChange"}),o.prototype.regions={loadingIndicatorRegion:".js-loading-indicator-region"},o.prototype.onOverlayDragEnter=function(e){return this.ui.choose.addClass("dragenter"),e.preventDefault()},o.prototype.onOverlayDragLeave=function(e){return this.ui.choose.removeClass("dragenter fromRegion"),this.hasFile&&this.ui.choose.hide(),e.preventDefault()},o.prototype.onRegionDragEnter=function(e){if(!this.hasFile)return;return this.ui.choose.addClass("dragenter fromRegion"),this.ui.choose.show(),e.preventDefault()},o.prototype.onDrop=function(e){var t,n;t=e.originalEvent,t.stopPropagation(),t.preventDefault();if(t.dataTransfer.files.length)return this.onChooseComplete((n=t.dataTransfer.files)!=null?n[0]:void 0)},o.prototype.showStatus=function(e,t){return t==null&&(t=!1),this.ui.status.toggleClass("error",t),this.ui.status.text(e)},o.prototype.showPreviewError=function(e){return this.ui.filePreview.text(e)},o.prototype.showUploading=function(){return this.ui.choose.hide(),this.ui.uploading.show(),this.loadingIndicatorRegion.show(new c({component:h()})),this.showStatus("uploading...")},o.prototype.showChoose=function(){return this.ui.uploading.hide(),this.ui.choose.show(),this.showStatus("Accepted file types: "+this.formats.join(", ")),this.hasFile=!1},o.prototype.showFilePreview=function(e){var t;return t=e.size/1048576,t>5?this.showPreviewError("File too large to preview"):typeof FileReader!="undefined"&&FileReader!==null?(this.fr=new FileReader,this.fr.onload=function(t){return function(n){return t.onPreviewLoaded.call(t,n,e)}}(this),this.fr.readAsDataURL(e)):this.showPreviewError("No preview available")},o.prototype.onPreviewLoaded=function(e,n){var r;if(n.type.split("/")[0]!==this.type)return this.showPreviewError("No preview available");if(this.type==="image")return this.ui.filePreview.html(t("<img>").attr("src",e.target.result));if(this.type==="video")return r=t("<video>")[0],!r.canPlayType||!r.canPlayType(n.type).replace(/no/,"")?this.showPreviewError("No preview available"):this.ui.filePreview.html("<video preload='metadata' controls='controls'>\n  <source src='"+e.target.result+"'>\n</video>")},o.prototype.onUploadSuccess=function(e){var t,r,i;return this.ui.uploading.hide(),t=n.partial(n.omit,n,"location"),r=n.map(e.representations.toJSON(),t),this.assetJSON=n.extend(e.toJSON(),{representations:r}),this.showStatus("processing..."),typeof (i=this.options).processing=="function"&&i.processing(),this.checkProcessingStatus(e)},o.prototype.checkProcessingStatus=function(e){return e.fetch({success:this.onAssetRefetch,error:this.onAssetRefetchError})},o.prototype.onAssetRefetch=function(e){return e.representations.findWhere({available:!1})?n.delay(this.checkProcessingStatus.bind(this),3e3,e):this.onProcessingComplete()},o.prototype.onAssetRefetchError=function(e){return this.showStatus("Server error",!0)},o.prototype.onProcessingComplete=function(e){return this.ui.useButton.prop("disabled",!1),this.showStatus("Processing complete")},o.prototype.onUploadError=function(){return this.ui.uploading.hide(),this.showStatus("Error uploading",!0)},o.prototype.onChooseClick=function(){return this.ui.hiddenUploader.one("change",function(e){return function(){var t;return e.onChooseComplete((t=e.ui.hiddenUploader[0].files)!=null?t[0]:void 0)}}(this)),this.ui.hiddenUploader.click()},o.prototype.onChooseComplete=function(e){var t,r,i,o,u;return e?(o=n.last(e.name.split(".")),n.contains(this.formats,o.toLowerCase())?(i=e.type||""+this.type+"/x-"+o,r={title:"New File",tags:[this.type],content:e,contentType:i},t=new f,u=t.save(r,{upload:!0,success:this.onUploadSuccess,error:this.onUploadError}),s.timeXHR(u,"upload-asset",{contentType:i,name:e.name,courseId:l.get("courseId")}),this.showUploading(),this.ui.videoInput.css({visibility:"hidden"}),this.showFilePreview(e),this.hasFile=!0):this.showStatus("Unsupported file type chosen. Acceptable formats: "+this.formats.join(", "),!0)):this.showStatus("No file chosen",!0)},o.prototype.onUseClick=function(){return this.options.success(this.assetJSON),this.close(),s.track("use-asset",{courseId:l.get("courseId"),assetJSON:this.assetJSON})},o.prototype.close=function(){return t(window).off("dragenter dragexit dragover dragleave drop",this._prevent),o.__super__.close.apply(this,arguments)},o.prototype.onVideoInputChange=function(){return n.defer(function(e){return function(){var t,n,r,i;t=e.ui.videoInput.val();if(e.oldInput===t)return;e.oldInput=t;if(t.length===0){e.render(),e.ui.videoInput.focus();return}i=e.getYoutubeId(t),n=e.getVimeoId(t),r=e.getWistiaId(t);if(i||n||r)e.ui.choose.hide(),e.ui.useButton.prop("disabled",!1),e.showStatus("");return i?(e.assetJSON={type:"youtube",youtube_id:i},e.ui.filePreview.html(e.getYoutubeEmbed(i))):n?(e.assetJSON={type:"vimeo",vimeo_id:n},e.ui.filePreview.html(e.getVimeoEmbed(n))):r?(e.assetJSON={type:"wistia",wistia_id:r},e.ui.filePreview.html(e.getWistiaEmbed(r))):(e.showStatus("That is not a valid YouTube or Vimeo video url",!0),e.ui.useButton.prop("disabled",!0))}}(this))},o.prototype.getWistiaId=function(e){var t,n;return t=/https?:\/\/.*(?:(?:(?:wistia.com|wi.st)\/(?:medias|embed))|(?:fast.wistia.net\/embed\/iframe))\/([0-9a-z]+)/,(n=e.match(t))!=null?n[1]:void 0},o.prototype.getYoutubeId=function(e){var t,n;return t=/(?:(?:https?:\/\/)?(?:[a-zA_Z]{2,3}.)?)?(?:(?:youtube\.com\/watch\?)(?:[a-z=_&]+|(?:[\w\d\-\_\=]+&amp;(?:amp;)?))*v(?:&lt;[A-Z]+&gt;)?=|youtu.be\/)([0-9a-zA-Z\-\_]+)/,(n=e.match(t))!=null?n[1]:void 0},o.prototype.getVimeoId=function(e){var t,n;return t=/(?:(?:https?:\/\/)?(?:[a-zA_Z]{2,3}.)?)?(?:vimeo\.com\/)([0-9]+)/,(n=e.match(t))!=null?n[1]:void 0},o.prototype.onRender=function(){return o.__super__.onRender.apply(this,arguments),this.ui.useButton.prop("disabled",!0),this.showChoose()},o.prototype.getEmbedCode=function(e){var t;if(e==="asset")return t=n.filter(this.get("representations"),function(e){return e.contentType.indexOf("video/")===0}),t=n.sortBy(t,function(e){return e.contentType==="video/webm"?0:1}),n.template('<video class="myVideo" preload="none" controls="controls">\n  <% _.each(videos, function(vid) { %>\n    <source src="<%= vid.location %>" type="<%= vid.contentType %>">\n  <% }) %>\n</video>',{videos:t})},o.prototype.getWistiaEmbed=function(e){return'<iframe src="//fast.wistia.net/embed/iframe/'+e+'?version=v1" width="100%" height="100%"  allowtransparency="true" frameborder="0" scrolling="no" allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen></iframe>'},o.prototype.getYoutubeEmbed=function(e){return'<iframe id="ytplayer" type="text/html" width="100%" height="100%" src="//www.youtube.com/embed/'+e+'" frameborder="0"/>'},o.prototype.getVimeoEmbed=function(e){return'<iframe src="//player.vimeo.com/video/'+e+'" width="100%" height="100%" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},o}(a)})}.call(this),function(){n("messages/handlers/asset_select",["jquery","views/asset_picker/asset_picker"],function(e,t){return function(n,r){var i,s;return i=this,s=new t(_.pick(n,"success","type","processing")),e("body").append(s.render().$el)}})}.call(this),function(){n("messages/handlers/parent_notify",[],function(){return function(e){return window.parent.postMessage(JSON.stringify(e),"*")}})}.call(this),function(){n("messages/decorate",["mediator","messages/handlers/asset_select","messages/handlers/parent_notify"],function(e,t,n){var r;return r={"asset:select":t,"parent:notify":n},_.each(r,function(t,n){return e.on(n,t,e)})})}.call(this),function(){n("react_test_utils_for_selenium",["react"],function(e){return window.ReactTestUtilsForSelenium=e.addons.TestUtils})}.call(this),function(){n("legacy_cdn_defines_noconflict",["jquery","backbone"],function(e,t){return e.noConflict(!0),t.noConflict()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};n("player",["underscore","jquery","marionette","react","models/patch_backbone_sync","collab/collab","views/react_view","views/course","views/sidebar/author","views/sidebar/learner","views/tray/tray_component","views/header","views/player_layout","views/error_overlay","combined_catalogue","mediator","player_palette","models/current_user","plugins/tracker","models/settings","collections/gadget_projects","models/course","messages/decorate","react_test_utils_for_selenium","legacy_cdn_defines_noconflict"],function(t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S){var x;return window.React=i,window._=t,window.VersalGadgets={},x=function(){function t(t){this._onNavigateGadget=e(this._onNavigateGadget,this),this._onNavigateLesson=e(this._onNavigateLesson,this),this.onCourseLoad=e(this.onCourseLoad,this),this._onLearnerStateChanged=e(this._onLearnerStateChanged,this);var r,i,o,u,a;t&&w.set(t),s(w.get("api")),n(document).ajaxError(function(){return m.trigger("course:save:error")}),n(document).ajaxSuccess(function(){return m.trigger("course:save:success")}),this._courseRendering=n.Deferred(),this._courseRendering.done(function(e){return function(){return m.trigger("course:rendered",e.courseView)}}(this)),o=w.get("courseId");if(o==null)return this.renderErrorOverlay("cannot start the player without a courseId");if(!(((u=w.get("api"))!=null?u.url:void 0)||w.get("apiUrl")))return this.renderErrorOverlay("cannot start the player without an apiUrl");if(!(((a=w.get("api"))!=null?a.sessionId:void 0)||w.get("sessionId")))return this.renderErrorOverlay("cannot start the player without a sessionId");this.installNavigation(o),window.onbeforeunload=function(){if(m.pendingConfig||m.pendingUserState)return"You have unsaved changes. They will be lost if you decide to leave the course."},i=w.get("container"),r=n(w.get("container")),r.addClass("versal-player"),this.layout=new p({el:r.get(0)}),this.layout.render(),m.on("lesson:allGadgetsRendered",this._onAllGadgetsRendered,this),y.fetchDeferred().done(function(e){return function(e){return w.get("embedded")&&b.track("Loaded course embed",{courseId:o,email:e.email}),m.userId=e.id}}(this)),this.loadCourse(o)}return t.prototype.renderErrorOverlay=function(e){var t;return t=d({title:"Sorry, we've encountered an error",description:e}),i.renderComponent(t,document.body)},t.prototype._installDependency=function(e,t){var n;return e==="stylesheet"?(n=document.createElement("link"),n.rel="stylesheet",n.href=t):(n=document.createElement("script"),n.src=t),document.head.appendChild(n)},t.prototype._onLearnerStateChanged=function(e){if(e.data.event==="learnerStateChanged")return this._courseRendering.done(function(t){return function(){var n,r,i;return i=e.data.data,i.gadgetIndex!=null?t.courseView.showGadget(i.lessonIndex,i.gadgetIndex):i.lessonIndex!=null?t.courseView.showLesson(i.lessonIndex):(n=t.course.progress.get("gadgetIndex")||null,r=t.course.progress.get("lessonIndex")||1,r=Math.min(r,t.course.lessons.length),window.parent.postMessage({event:"setLearnerState",data:{lessonIndex:r,gadgetIndex:n}},"*"))}}(this))},t.prototype.installNavigation=function(e){return this.uninstallNavigation(),m.on("navigate:lesson",this._onNavigateLesson),m.on("navigate:gadget",this._onNavigateGadget),window.addEventListener("message",this._onLearnerStateChanged)},t.prototype.uninstallNavigation=function(){window.removeEventListener("message",this._onLearnerStateChanged),this._onNavigateLesson&&m.off("navigate:lesson",this._onNavigateLesson);if(this._onNavigateGadget)return m.off("navigate:gadget",this._onNavigateGadget)},t.prototype.close=function(){return this.layout.sidebar.close(),this.uninstallNavigation(),m.off("lesson:allGadgetsRendered",this._onAllGadgetsRendered,this)},t.prototype.initializeCollab=function(){if(w.get("collabUrl"))return o.init(m,w.toJSON())},t.prototype.loadCourse=function(e){var t,n,r;return r=new S({id:e}),w.get("revision")&&(t=r.url(),r.url=function(e){return function(){return"/catalogs/staged"+t}}(this)),n=r.fetch({data:{depth:"sections"},silent:!0,error:this.onCourseLoadError,success:this.onCourseLoad}),b.timeXHR(n,"fetch-course",{courseId:e.toString()}),this._renderTimer=b.createTimer("render-course",{courseId:e.toString()})},t.prototype.renderTray=function(e){var t,n,r,i,s,o,a;r=function(e){return b.track("Clicked gadget tray tab",{name:e?"open":"close"})},n=function(e){return b.track("Clicked gadget tray tab",{name:e})},t={core:this.combinedCatalogue.core,viewers:this.combinedCatalogue.viewers,labs:this.combinedCatalogue.labs,course:e.palette};if((o=w.get("api"))!=null?!o.url.match(/\/stack\.versal\.com/):!void 0)t.hidden=this.combinedCatalogue.getHiddenGadgets(e);if((a=this.combinedCatalogue.sandbox)!=null?a.length:void 0)t.sandbox=this.combinedCatalogue.sandbox;return i=c({initialCatalog:"core",mediator:m,catalogs:t,trackCatalogClick:n,trackToggleTray:r,palette:e.palette}),s=new u({component:i}),s.render().$el.appendTo(this.layout.ui.footer),this.layout.ui.footer.show(),s.onShow()},t.prototype.onCourseLoad=function(e){var t;return this.course=e,this.course.palette.forEach(function(e){return g.registerManifest(e.toJSON())}),w.get("noEditable")&&e.set({isEditable:!1}),m.assetUrlTemplate=e.get("assetUrlTemplate"),m.isCourseEditable=e.get("isEditable"),this.course.get("isEditable")||(t=this.course.get("currentPosition")?"Continued course":"Started course",b.track(t,{courseId:e.id})),e.get("isEditable")&&this.initializeCollab(),this.layout.header.show(new h({model:e})),e.get("isEditable")?(this.layout.sidebar.show(new f({model:e})),this.combinedCatalogue=new v,this.combinedCatalogue.fetchAll(),this.combinedCatalogue.ready.done(function(t){return function(){return t.combinedCatalogue.models.forEach(function(e){return g.registerManifest(e.toJSON())}),t.renderTray(e),e.palette.on("sync",t.renderTray.bind(t,e))}}(this)),n(this.layout.el).addClass("editable")):(w.get("singleLesson")&&this.layout.$el.addClass("hide-toc"),this.layout.sidebar.show(new l({model:e}))),this.courseView=new a({model:e,singleLesson:w.get("singleLesson")}),this.layout.courseContainer.show(this.courseView),e.get("currentPosition")==null&&e.start(),this._notifyTitleChanged(e),e.on("change:title",this._notifyTitleChanged),e.get("org")&&this._addOneOffOrgStyles(e.get("org")),this._courseRendering.resolve()},t.prototype.onCourseLoadError=function(e,t,n){return m.trigger("parent:notify",{event:"player:loadingError",data:{status:t.status,message:t.responseText}})},t.prototype._onAllGadgetsRendered=function(e){var t;return(t=this._renderTimer)!=null&&t.stop(),this._renderTimer=null},t.prototype._onNavigateLesson=function(e){return window.parent.postMessage({event:"setLearnerState",data:{lessonIndex:e,gadgetIndex:null}},"*")},t.prototype._onNavigateGadget=function(e,t){return window.parent.postMessage({event:"setLearnerState",data:{lessonIndex:e,gadgetIndex:t}},"*")},t.prototype._notifyTitleChanged=function(e){var t;return t={event:"player:course:title:changed",data:e.title()},m.trigger("parent:notify",t)},t.prototype._addOneOffOrgStyles=function(e){if(e.id==="321993843")return n('<link rel="stylesheet" href="./one-offs/spider-learning.css">').appendTo("head")},t}(),window.VersalPlayer=x,x})}.call(this),t(["player"])})();